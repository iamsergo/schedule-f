(this["webpackJsonpschedule-f"]=this["webpackJsonpschedule-f"]||[]).push([[0],{121:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),s=n(23),i=n.n(s),a=n(25),o=n.n(a),d=(n(115),n(21)),l=n(19),u="https://schedule-all-univers.herokuapp.com",j="schedule",h="main",b="search",f={activePanel:h,history:[j]},O=Object(d.c)({name:"navigation",initialState:f,reducers:{setActivePanel:function(e,t){e.activePanel=t.payload}}}),p=O.actions.setActivePanel,m=O.reducer,x=n(34),g=n(26),v=n.n(g),y=n(29),_={schedule:{getSchedule:function(){var e=Object(y.a)(v.a.mark((function e(t){var n,c,r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.univer,c=t.tail,r=[u,"schedule",n,c].join("/"),e.next=4,fetch(r);case 4:return s=e.sent,e.next=7,s.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),searchSchedule:function(){var e=Object(y.a)(v.a.mark((function e(t){var n,c,r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.univer,c=t.q,r=[u,"schedule/search",n,c].join("/"),e.next=4,fetch(r);case 4:return s=e.sent,e.next=7,s.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},w=Object(d.b)("schedule/request",_.schedule.getSchedule),k=Object(d.b)("schedule/search/request",_.schedule.searchSchedule),S=Object(d.c)({name:"schedule",initialState:{isLoading:!1,error:null,schedule:null,isSearchLoading:!1,searchError:null,searchedSchedules:[]},reducers:{},extraReducers:function(e){e.addCase(w.pending,(function(e,t){e.isLoading=!0,e.error=null})).addCase(w.rejected,(function(e,t){e.isLoading=!1,e.error={message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f :(",payload:t.meta.arg}})).addCase(w.fulfilled,(function(e,t){e.isLoading=!1,e.error=null,e.schedule=t.payload})).addCase(k.pending,(function(e,t){e.isSearchLoading=!0,e.searchError=null})).addCase(k.rejected,(function(e,t){e.isSearchLoading=!1,e.searchError={message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f :(",payload:t.meta.arg}})).addCase(k.fulfilled,(function(e,t){e.isSearchLoading=!1,e.searchError=null,e.searchedSchedules=t.payload}))}});Object(x.a)(S.actions);var C=S.reducer,N=Object(l.b)({navigation:m,schedule:C}),E=Object(d.a)({reducer:N}),L=n(13),T=(n(121),n(7)),P=n(137),q=n(138),A=n(4),W=function(e){var t=e.id,n=Object(L.b)();return Object(A.jsxs)(T.n,{id:t,style:{paddingTop:64},children:[Object(A.jsx)(T.b,{mode:"image",header:"\u0427\u0438\u0441\u043b\u0438\u0442\u0435\u043b\u044c",subheader:"\u0414\u043e \u043a\u043e\u043d\u0446\u0430 \u0441\u0435\u043c\u0435\u0441\u0442\u0440\u0430",background:Object(A.jsx)("div",{style:{backgroundColor:"#65c063",backgroundImage:"url(https://sun9-59.userapi.com/7J6qHkTa_P8VKRTO5gkh6MizcCEefz04Y0gDmA/y6dSjdtPU4U.jpg)",backgroundPosition:"right bottom",backgroundSize:320,backgroundRepeat:"no-repeat"}}),actions:Object(A.jsx)(T.l,{style:{marginTop:4},header:"\u043e\u0441\u0442\u0430\u043b\u043e\u0441\u044c ".concat(5," \u0434\u043d."),children:Object(A.jsx)(T.r,{style:{width:"70%",marginTop:8,background:"gray"},value:60})})}),Object(A.jsx)(T.h,{children:Object(A.jsx)(T.d,{children:Object(A.jsx)(T.e,{after:Object(A.jsx)(P.a,{}),onClick:function(){n(p(b))},children:"\u0418\u0441\u043a\u0430\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})})}),Object(A.jsx)(T.h,{children:Object(A.jsx)(T.d,{children:Object(A.jsx)(T.e,{after:Object(A.jsx)(q.a,{}),children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})})})]})},I=n(24),R=n(139),V=(n(134),function(e){var t=e.lesson;return Object(A.jsxs)("div",{className:"lesson-row",children:[Object(A.jsx)("div",{className:"lesson-row__time",children:t.time.map((function(e,t){return Object(A.jsx)("div",{className:"lesson-row__time-item lesson-row__time-item--".concat(0===t?"start":"end"),children:e},e)}))}),Object(A.jsxs)("div",{className:"lesson-row__body lesson-row__body--".concat(t.type),children:[Object(A.jsxs)("div",{className:"lesson-row__place",children:[Object(A.jsx)("span",{className:"lesson-row__type-title--".concat(t.type),children:t.typeTitle}),t.place]}),Object(A.jsx)("div",{className:"lesson-row__subject",children:t.subject}),Object(A.jsx)("div",{className:"lesson-row__fromWhoms",children:t.fromWhoms.map((function(e){return Object(A.jsx)("div",{className:"lesson-row__fromWhoms-item",children:e.title},e.href)}))})]}),Object(A.jsx)("div",{className:"lesson-row__after"})]})}),z=(n(135),[{id:0,title:"\u041f\u041d"},{id:1,title:"\u0412\u0422"},{id:2,title:"\u0421\u0420"},{id:3,title:"\u0427\u0422"},{id:4,title:"\u041f\u0422"},{id:5,title:"\u0421\u0411"}]),J=[{id:0,title:"\u0427\u0438\u0441\u043b\u0438\u0442\u0435\u043b\u044c"},{id:1,title:"\u0417\u043d\u0430\u043c\u0435\u043d\u0430\u0442\u0435\u043b\u044c"}],K=function(e){var t,n=e.id,c=Object(L.b)(),s=Object(L.c)((function(e){return e.schedule})),i=s.isLoading,a=s.error,o=s.schedule,d=r.a.useState(0),l=Object(I.a)(d,2),u=l[0],j=l[1],b=r.a.useState(0),f=Object(I.a)(b,2),O=f[0],m=f[1],x=r.a.useRef(null);return i?t=Object(A.jsx)(T.t,{}):a?t=Object(A.jsx)(T.q,{stretched:!0,action:Object(A.jsx)(T.c,{onClick:function(){c(w(a.payload))},children:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c"}),children:a.message}):o&&(t=Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(T.d,{style:{marginBottom:8},children:Object(A.jsx)(T.k,{children:Object(A.jsx)(T.m,{children:o.title})})}),Object(A.jsx)("div",{className:"schedule__card",ref:x,children:Object(A.jsx)(T.j,{style:{height:"100%"},slideIndex:u,onChange:function(e){return j(e)},children:z.map((function(e,t){var n=function(e,t,n){return e.filter((function(e){var c=e.day===t,r=e.week===n||2===e.week;return c&&r}))}(o.lessons,t,O);return Object(A.jsx)(T.d,{className:"schedule__body",children:0===n.length?Object(A.jsx)(T.q,{className:"schedule__empty-placeholder",icon:Object(A.jsx)(R.a,{style:{color:"teal"}}),children:"\u0412\u044b\u0445\u043e\u0434\u043d\u043e\u0439"}):n.map((function(e,n){return Object(A.jsx)(V,{lesson:e},[t,n].join("-"))}))},t)}))})}),Object(A.jsxs)(T.d,{style:{marginTop:8},children:[Object(A.jsx)(T.u,{children:J.map((function(e){return Object(A.jsx)(T.v,{selected:e.id===O,onClick:function(){return m(e.id)},children:e.title},e.id)}))}),Object(A.jsx)(T.u,{children:z.map((function(e){return Object(A.jsx)(T.v,{selected:e.id===u,onClick:function(){return j(e.id)},children:e.title},e.id)}))})]})]})),Object(A.jsxs)(T.n,{id:n,children:[Object(A.jsx)(T.o,{separator:!1,left:Object(A.jsx)(T.p,{onClick:function(){c(p(h))}}),children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(A.jsx)(T.h,{className:"schedule__wrapper",children:t})]})},U=function(e){var t=e.id,n=Object(L.b)(),c=Object(L.c)((function(e){return e.schedule})),s=c.isSearchLoading,i=c.searchError,a=c.searchedSchedules,o=r.a.useState(""),d=Object(I.a)(o,2),l=d[0],u=d[1],b=r.a.useState(l),f=Object(I.a)(b,2),O=f[0],m=f[1];r.a.useEffect((function(){var e=window.setTimeout((function(){m(l)}),300);return function(){window.clearTimeout(e)}}),[l]),r.a.useEffect((function(){O&&n(k({univer:"nsu",q:O}))}),[O]);var x;return x=s?Object(A.jsx)(T.t,{}):i?Object(A.jsx)(T.q,{children:i.message}):0===a.length?Object(A.jsx)(T.q,{icon:Object(A.jsx)(R.a,{style:{color:"teal"}}),children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):a.map((function(e,t){return Object(A.jsx)(T.f,{onClick:function(){return function(e){n(w({univer:"nsu",tail:e.href})),n(p(j))}(e)},children:e.title},t)})),Object(A.jsxs)(T.n,{id:t,children:[Object(A.jsx)(T.o,{separator:!1,left:Object(A.jsx)(T.p,{onClick:function(){n(p(h))}}),children:"\u041f\u043e\u0438\u0441\u043a"}),Object(A.jsx)(T.i,{style:{paddingTop:24},vertical:"top",filled:!0,children:Object(A.jsx)(T.s,{after:null,value:l,onChange:function(e){u(e.target.value)}})}),Object(A.jsx)(T.h,{style:{marginTop:70},children:x})]})},B=function(){Object(L.b)();var e=Object(L.c)((function(e){return e.navigation})),t=e.activePanel,n=e.history;return r.a.useEffect((function(){document.body.setAttribute("scheme","space_gray"),window.addEventListener("touchmove",(function(e){return e.preventDefault()}),{passive:!1}),document.body.addEventListener("touchmove",(function(e){return e.stopPropagation()}),!1)}),[]),Object(A.jsx)(T.g,{isWebView:!0,children:Object(A.jsx)(T.a,{children:Object(A.jsxs)(T.w,{activePanel:t,history:n,children:[Object(A.jsx)(W,{id:h}),Object(A.jsx)(U,{id:b}),Object(A.jsx)(K,{id:j})]})})})};o.a.send("VKWebAppInit"),o.a.subscribe((function(e){"VKWebAppUpdateConfig"===e.detail.type&&document.body.setAttribute("scheme",e.detail.data.scheme)})),i.a.render(Object(A.jsx)(L.a,{store:E,children:Object(A.jsx)(B,{})}),document.getElementById("root"))}},[[136,1,2]]]);
//# sourceMappingURL=main.c9907119.chunk.js.map