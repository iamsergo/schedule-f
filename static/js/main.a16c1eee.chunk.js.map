{"version":3,"sources":["constants.ts","store/slices/navigation.ts","api/schedule.ts","api/config.ts","api/user.ts","api/index.ts","api/qoute.ts","store/slices/schedule.ts","utils/index.ts","store/slices/config.ts","store/slices/user.ts","store/rootReducer.ts","store/index.ts","components/LessonRow/index.tsx","components/ScheduleBody/index.tsx","components/Qoute/index.tsx","panels/main/index.tsx","panels/schedule/index.tsx","panels/search/index.tsx","panels/settings/index.tsx","components/AppActions/index.tsx","components/ActionsModal/index.tsx","App.tsx","index.tsx"],"names":["BASE_URL","process","GROUP_ID","SCHEDULE_PANEL","MAIN_PANEL","SEARCH_PANEL","SETTINGS_PANEL","initialState","activePanel","history","activeModal","navigationSlice","createSlice","name","reducers","setActivePanel","state","action","payload","setActiveModal","actions","schedule","getSchedule","a","univer","tail","queryTail","URLSearchParams","toString","url","join","fetch","res","json","searchSchedule","q","config","getUniverList","getUser","id","user","updateUserUniver","univerId","options","method","headers","body","JSON","stringify","deleteUserUniver","api","updateUserSchedule","scheduleId","deleteUserSchedule","qoute","getQoute","Date","getTime","requestSchedule","createAsyncThunk","thunkAPI","href","getState","scheduleHistory","userSchedule","find","record","isUniq","data","requestSearchSchedule","scheduleSlice","isLoading","error","lessonStats","scheduleHistoryHrefs","isSearchLoading","searchError","searchedSchedules","scheduleHistoryBack","pop","currentScheduleHref","length","currentSchedule","clearScheduleHistory","clearSearchedSchedules","setLessonStats","extraReducers","builder","addCase","pending","rejected","message","meta","arg","fulfilled","push","getLessonsInDay","lessons","day","week","filter","lesson","inDay","inWeek","getFromWhomsList","lessonsMap","forEach","fromWhoms","fromWhom","Object","values","isCurrentWeek","now","range","start","end","requestQoute","requestConfigUnivers","configSlice","univerList","currentUniver","passDays","countDays","toEndDays","toEndPercent","currentDay","currentWeek","setCurrentUniver","dayId","getDay","getCurrentDay","weeks","weekType","getCurrentWeek","startDate","endDate","DAYS","Math","ceil","getDaysStats","setConfig","requestGetUser","requestUpdateUserUniver","requestDeleteUserUniver","requestUpdateUserSchedule","requestDeleteUserSchedule","userSlice","isLoaderShowing","isUniverLoading","isScheduleLoading","userData","setUserData","setIsLoaderShowing","rootReducer","combineReducers","navigation","store","configureStore","reducer","LessonRow","current","onGoToSchedule","getStats","className","time","map","i","type","typeTitle","place","onClick","subject","group","title","ScheduleBody","today","onGetStats","icon","style","color","j","lessonTime","timeString","split","s","startHours","startMinutes","setHours","endHours","endMinutes","isCurrentLesson","Qoute","React","useState","isOpen","setIsOpen","description","after","author","paddingTop","text","MainPanel","content","dispatch","useDispatch","useSelector","isUserLoading","userError","isConfigLoading","configError","goToSearchSchedule","goToSettings","goToSchedule","code","fromWhomsIsOpen","setFromWhomsIsOpen","weeksIsOpen","setWeeksIsOpen","timeLessonsIsOpen","setTimeLessonsIsOpen","userMessage","configMessage","stretched","univerContent","scheduleContent","univerInfoContent","subtitle","toLocaleDateString","margin","background","value","width","height","lessonsToday","todayString","disabled","fill","padding","weekEnd","rangeString","weekPassed","textDecoration","opacity","timeLessons","separator","left","WEEKS","SchedulePanel","their","my","setPopout","activeDay","setActiveDay","activeWeek","setActiveWeek","isDiffShowing","setIsDiffShowing","toggleDiffShowing","goToMain","saveSchedule","deleteSchedule","cardRef","useRef","ls","theirLesson","myLesson","b","dayEqual","lessonNumEqual","weekEqual","groupEqual","isIntersection","ref","slideIndex","onChange","d","_","stats","lec","pass","total","pr","lab","thisLessons","thisLessons0","l","thisLessons1","thisLessons2","weeks0Count","w","weeks1Count","nowMs","currentWeekIdx","findIndex","passedWeeks","slice","weeksPassed0Count","weeksPassed1Count","n","typeLesson","getStatsForLesson","marginTop","selected","before","marginRight","toggleScheduleItem","autoclose","popout","onClose","iosCloseItem","mode","transform","baseUrl","SearchPanel","setQ","searchRef","useEffect","window","setTimeout","focus","debQ","setDebQ","timeout","clearTimeout","textAlign","vertical","filled","getRef","placeholder","e","target","SettingsPanel","userUniverId","setUniver","header","top","bottom","size","AppActions","closeModal","platform","usePlatform","bridge","send","then","console","log","catch","group_id","link","ActionsModal","subheader","right","level","weight","startDateStartOfWeek","entries","isFirstLoading","App","document","setAttribute","location","search","reduce","queryParam","key","handleSetPopout","initApp","addToHomeScreenInfo","is_feature_supported","is_added_to_home_screen","is_favorite","is_member","openModal","isWebView","modal","subscribe","detail","scheme","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.a16c1eee.chunk.js","sourcesContent":["export const BASE_URL = process.env.REACT_APP_BASE_URL\n\nexport const GROUP_ID = 198278031\n\nexport const SCHEDULE_PANEL = 'schedule'\nexport const MAIN_PANEL = 'main'\nexport const SEARCH_PANEL = 'search'\nexport const SETTINGS_PANEL = 'settings'","import { createSlice } from \"@reduxjs/toolkit\";\nimport { MAIN_PANEL } from \"../../constants\";\nimport { PanelType } from \"../../types\";\n\ntype NavigationState = {\n  activePanel: PanelType\n  history: PanelType[]\n  activeModal: string | null\n}\n\nconst initialState: NavigationState = {\n  activePanel: MAIN_PANEL,\n  history: [MAIN_PANEL],\n  activeModal: null,\n}\n\nconst navigationSlice = createSlice({\n  name: 'navigation',\n  initialState,\n  reducers: {\n    setActivePanel(state, action)\n    {\n      state.activePanel = action.payload\n    },\n    setActiveModal(state, action)\n    {\n      state.activeModal = action.payload\n    }\n  },\n})\n\nexport const { setActivePanel, setActiveModal } = navigationSlice.actions\nexport default navigationSlice.reducer","import { BASE_URL } from \"../constants\"\nimport { HrefTitle, Schedule } from \"../types\"\n\nconst getSchedule = async ({\n  univer,\n  tail,\n} : {\n  univer: string,\n  tail: string,\n}): Promise<Schedule> => {\n  const queryTail = new URLSearchParams(`tail=${tail}`).toString()\n  const url = [BASE_URL, \"schedule\", univer].join(\"/\") + '?' + queryTail\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst searchSchedule = async ({\n  univer,\n  q,\n} : {\n  univer: string,\n  q: string,\n}) : Promise<HrefTitle[]> => {\n  const url = [ BASE_URL, 'schedule/search', univer, q, ].join('/')\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst schedule = {\n  getSchedule,\n  searchSchedule,\n}\n\nexport default schedule","import { BASE_URL } from \"../constants\"\nimport { Univer } from \"../types\"\n\nconst getUniverList = async (): Promise<Univer[]> => {\n  const url = [ BASE_URL, 'univers'].join('/')\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst config = {\n  getUniverList,\n}\n\nexport default config","import { BASE_URL } from \"../constants\"\nimport { User } from \"../types\"\n\nconst getUser = async (id: number): Promise<User> => {\n  const url = [ BASE_URL, 'users', id].join('/')\n  const res = await fetch(url)\n  const user = await res.json()\n\n  return user  \n}\n\nconst updateUserUniver = async ({\n  id, univerId,\n}: { id: number, univerId: number }): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'univer'].join('/')\n  const options = {\n    method: 'PUT',\n    headers: { 'Content-Type': 'application/json;charset=utf-8' },\n    body: JSON.stringify({univerId}),\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst deleteUserUniver = async (id: number): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'univer'].join('/')\n  const options = {\n    method: 'DELETE',\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst updateUserSchedule = async ({\n  id, scheduleId,\n}: { id: number, scheduleId: string }): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'schedule'].join('/')\n  const options = {\n    method: 'PUT',\n    headers: { 'Content-Type': 'application/json;charset=utf-8' },\n    body: JSON.stringify({scheduleId}),\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst deleteUserSchedule = async (id: number): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'schedule'].join('/')\n  const options = {\n    method: 'DELETE',\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst user = {\n  getUser,\n  updateUserSchedule,\n  deleteUserSchedule,\n  updateUserUniver,\n  deleteUserUniver,\n}\n\nexport default user","import schedule from './schedule'\nimport config from './config'\nimport user from './user'\nimport qoute from './qoute'\n\nconst api = {\n  schedule,\n  config,\n  user,\n  qoute,\n}\n\nexport default api","import { BASE_URL } from \"../constants\"\nimport { Qoute } from \"../types\"\n\nconst getQoute = async (): Promise<Qoute | null> => {\n  const url = [ BASE_URL, 'qoute', new Date().getTime()].join('/')\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst config = {\n  getQoute,\n}\n\nexport default config","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\"\nimport { HrefTitle, Schedule, Stats } from \"../../types\"\nimport api from \"../../api\"\nimport { RootState } from \"../rootReducer\"\n\ntype ScheduleHistoryRecord = {\n    id: string,\n    data: Schedule\n  }\n\ntype ScheduleState = {\n  isLoading: boolean\n  error: {\n    message: string,\n    payload: any,\n  } | null\n  schedule: Schedule | null\n  lessonStats: {\n    title: string\n    stats: Stats\n    fromWhoms: HrefTitle[]\n  } | null\n  scheduleHistory: ScheduleHistoryRecord[]\n  scheduleHistoryHrefs: string[]\n\n  q: string\n  isSearchLoading: boolean\n  searchError: {\n    message: string,\n    payload: any,\n  } | null\n  searchedSchedules: HrefTitle[]\n}\n\nexport const requestSchedule = createAsyncThunk(\n  'schedule/request',\n  async ({ univer, tail: href }: {\n    univer: string,\n    tail: string,\n  }, thunkAPI): Promise<{record: ScheduleHistoryRecord, isUniq: boolean }> => {\n    const state = (thunkAPI.getState() as RootState)\n    const scheduleHistory = state.schedule.scheduleHistory\n    const userSchedule = state.user.user?.schedule\n    \n    const schedule = scheduleHistory.find(schedule => schedule.id === href)\n    if(schedule)\n    {\n      return { record: schedule, isUniq: false}\n    }\n    else if(userSchedule && userSchedule.href === href)\n    {\n      return {\n        record: { id: href, data: userSchedule },\n        isUniq: true,\n      }\n    }\n    else\n    {\n      const schedule = await api.schedule.getSchedule({ univer, tail: href })\n      return {\n        record: { id: href, data: schedule },\n        isUniq: true,\n      }\n    }\n  }\n)\n\nexport const requestSearchSchedule = createAsyncThunk(\n  'schedule/search/request',\n  api.schedule.searchSchedule\n)\n\nconst initialState: ScheduleState = {\n  isLoading: false,\n  error: null,\n  schedule: null,\n  lessonStats: null,\n  scheduleHistory: [],\n  scheduleHistoryHrefs: [],\n\n  q: '',\n  isSearchLoading: false,\n  searchError: null,\n  searchedSchedules: [],\n}\n\nconst scheduleSlice = createSlice({\n  name: 'schedule',\n  initialState,\n  reducers: {\n    scheduleHistoryBack(state)\n    {\n      state.scheduleHistoryHrefs.pop()\n      const currentScheduleHref = state.scheduleHistoryHrefs[state.scheduleHistoryHrefs.length - 1]\n      if(currentScheduleHref)\n      {\n        const currentSchedule = state.scheduleHistory.find(schedule => schedule.id === currentScheduleHref)!\n        state.schedule = currentSchedule.data\n      }\n      else\n      {\n        state.schedule = null\n      }\n    },\n    clearScheduleHistory(state)\n    {\n      state.scheduleHistoryHrefs = []\n      state.schedule = null\n    },\n    clearSearchedSchedules(state)\n    {\n      state.searchedSchedules = []\n    },\n    setLessonStats(state,action)\n    {\n      state.lessonStats = action.payload\n    },\n  },\n  extraReducers(builder)\n  {\n    builder\n      .addCase(requestSchedule.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(requestSchedule.rejected, (state,action) => {\n        state.isLoading = false\n        state.error = {\n          message: 'Ошибка при запросе расписания :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestSchedule.fulfilled, (state,action) => {\n        state.isLoading = false\n        state.error = null\n\n        const { isUniq, record } = action.payload\n\n        if(isUniq)\n        {\n          state.scheduleHistory.push(record)\n        }\n\n        state.scheduleHistoryHrefs.push(record.id)\n        state.schedule = record.data\n      })\n\n      .addCase(requestSearchSchedule.pending, (state) => {\n        state.isSearchLoading = true\n        state.searchError = null\n      })\n      .addCase(requestSearchSchedule.rejected, (state,action) => {\n        state.isSearchLoading = false\n        state.searchError = {\n          message: 'Ошибка при запросе расписания :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestSearchSchedule.fulfilled, (state,action) => {\n        state.isSearchLoading = false\n        state.searchError = null\n        state.searchedSchedules = action.payload\n      })\n  },\n})\n\nexport const {\n  scheduleHistoryBack,\n  clearScheduleHistory,\n  clearSearchedSchedules,\n  setLessonStats,\n} = scheduleSlice.actions\nexport default scheduleSlice.reducer","import { DayRange, HrefTitle, Lesson, Stats, Univer, WeekRange, WeekTypeRange } from \"../types\";\n\nexport const getLessonsInDay = (\n  lessons: Lesson[],\n  day: DayRange,\n  week: WeekRange\n): Lesson[] => {\n  return lessons.filter(lesson => {\n    const inDay = lesson.day === day\n    const inWeek = lesson.week === week || lesson.week === 2\n\n    return inDay && inWeek\n  })\n}\n\nexport const getFromWhomsList = (lessons: Lesson[]): HrefTitle[] => {\n  const lessonsMap: {\n    [key: string]: HrefTitle\n  } = {}\n  lessons.forEach(lesson => {\n    lesson.fromWhoms.forEach(fromWhom => {\n      if(!lessonsMap[fromWhom.href])\n      {\n        lessonsMap[fromWhom.href] = fromWhom\n      }\n    })\n  })\n\n  return Object.values(lessonsMap)\n}\n\nexport const getCurrentDay = (): DayRange => {\n  const dayId = new Date().getDay()\n\n  return (dayId > 0 ? dayId - 1 : dayId) as DayRange\n}\n\nexport const getDaysStats = (\n  startDate: number,\n  endDate: number,\n): {\n  passDays: number,\n  countDays: number,\n  toEndDays: number,\n} => {\n  const DAYS = 1000 * 60 * 60 * 24\n  const now = new Date().getTime()\n  const start = new Date(startDate).getTime()\n  const end = new Date(endDate).getTime()\n\n  const countDays = Math.ceil((end - start) / DAYS)\n  const passDays = Math.ceil((now - start) / DAYS)\n  const toEndDays = Math.ceil((end - now) / DAYS)\n\n  return { passDays, countDays, toEndDays }\n}\n\nexport const isPassWeek = (weekEnd: number): boolean => {\n  const now = new Date().getTime()\n  return now > weekEnd\n}\n\nexport const isCurrentWeek = (week: WeekTypeRange): boolean => {\n  const now = new Date().getTime()\n  const [start,end] = week.range\n  return start <= now && now <= end\n}\n\nexport const getCurrentWeek = (weeks: WeekTypeRange[]): WeekRange => {\n  const currentWeek = weeks.find(week => isCurrentWeek(week))\n\n  if(!currentWeek) return 0\n\n  return currentWeek.weekType\n}\n\nexport const getDiff = (their: Lesson[], my: Lesson[]): Lesson[] => {\n  const isIntersection = (a: Lesson, b: Lesson) => {\n    const dayEqual = a.day === b.day\n    const lessonNumEqual = a.lesson === b.lesson\n    const weekEqual = a.week === b.week || a.week === 2 || b.week === 2\n    const groupEqual = a.group === b.group || a.group === 2 || b.group === 2\n\n    return dayEqual && lessonNumEqual && weekEqual && groupEqual\n  }\n\n  return their.filter(theirLesson => !my.find(myLesson => isIntersection(theirLesson, myLesson)))\n}\n\nexport const getStatsForLesson = ({\n  lesson,\n  lessons,\n  currentUniver,\n}: {\n  lesson: Lesson,\n  lessons: Lesson[],\n  currentUniver: Univer\n}): { stats: Stats, fromWhoms: HrefTitle[] } => {\n  const { subject, time } = lesson\n  const { weeks } = currentUniver\n\n  const stats: Stats = {\n    lec: {pass:0,total:0},\n    pr: {pass:0,total:0},\n    lab: {pass:0,total:0},\n  }\n\n  const thisLessons = lessons.filter(lesson => lesson.subject === subject)\n  const thisLessons0 = thisLessons.filter(l => l.week === 0)\n  const thisLessons1 = thisLessons.filter(l => l.week === 1)\n  const thisLessons2 = thisLessons.filter(l => l.week === 2)\n\n  const weeks0Count = weeks.filter(w => w.weekType === 0).length\n  const weeks1Count = weeks.filter(w => w.weekType === 1).length\n\n  stats.lec.total =\n    weeks0Count * thisLessons0.filter(l => l.type === 0).length +\n    weeks1Count * thisLessons1.filter(l => l.type === 0).length +\n    (weeks0Count + weeks1Count) * thisLessons2.filter(l => l.type === 0).length\n\n  stats.pr.total =\n    weeks0Count * thisLessons0.filter(l => l.type === 1).length +\n    weeks1Count * thisLessons1.filter(l => l.type === 1).length +\n    (weeks0Count + weeks1Count) * thisLessons2.filter(l => l.type === 1).length\n\n  stats.lab.total =\n    weeks0Count * thisLessons0.filter(l => l.type === 2).length +\n    weeks1Count * thisLessons1.filter(l => l.type === 2).length +\n    (weeks0Count + weeks1Count) * thisLessons2.filter(l => l.type === 2).length\n\n\n  const now = new Date()\n  const nowMs = now.getTime()\n\n  const currentWeekIdx = weeks.findIndex(w => {\n    const [start, end] = w.range\n    return start <= nowMs && nowMs <= end\n  })\n  const passedWeeks = weeks.slice(0, currentWeekIdx)\n\n  const weeksPassed0Count = passedWeeks.filter(w => w.weekType === 0).length\n  const weeksPassed1Count = passedWeeks.filter(w => w.weekType === 1).length\n\n  stats.lec.pass =\n    weeksPassed0Count * thisLessons0.filter(l => l.type === 0).length +\n    weeksPassed1Count * thisLessons1.filter(l => l.type === 0).length +\n    (weeks0Count + weeksPassed1Count) * thisLessons2.filter(l => l.type === 0).length\n\n  stats.pr.pass =\n    weeksPassed0Count * thisLessons0.filter(l => l.type === 1).length +\n    weeksPassed1Count * thisLessons1.filter(l => l.type === 1).length +\n    (weeksPassed0Count + weeksPassed1Count) * thisLessons2.filter(l => l.type === 1).length\n\n  stats.lab.pass =\n    weeksPassed0Count * thisLessons0.filter(l => l.type === 2).length +\n    weeksPassed1Count * thisLessons1.filter(l => l.type === 2).length +\n    (weeksPassed0Count + weeksPassed1Count) * thisLessons2.filter(l => l.type === 2).length\n\n\n  const currentWeek = weeks[currentWeekIdx]\n  if(currentWeek)\n  {\n    const d = now.getDay()\n    const currentDay = d === 0 ? 6 : d - 1\n    \n    const thisLessonsEarlier = thisLessons\n      .filter(lesson => {\n        if(lesson.week !== currentWeek.weekType && lesson.week !== 2) return false\n        if(lesson.day < currentDay) return true\n        if(lesson.day === currentDay)\n        {\n          const n = now.getTime()\n          const [start, end] = time\n  \n          const [startHours, startMinutes] = start.split(':').map(s=>+s)\n          const s = new Date(n).setHours(startHours, startMinutes)\n          if(s > n) return false\n  \n          const [endHours, endMinutes] = end.split(':').map(s=>+s)\n          const e = new Date(n).setHours(endHours, endMinutes)\n          if(n > e) return false\n  \n          return true\n        }\n        return false\n      })\n  \n    thisLessonsEarlier.forEach(lesson => {\n      const typeLesson = (['lec','pr','lab'][lesson.type]) as keyof Stats\n      stats[typeLesson].pass++\n    })\n  }\n\n  const fromWhoms = getFromWhomsList(thisLessons)\n\n  return { stats, fromWhoms }\n}\n\nexport const isCurrentLesson = (lessonTime: number[][]): boolean => {\n  const TEN_MINUTES = 10 * 60 * 1000\n  const now = new Date().getTime()\n\n  const [start, end] = lessonTime\n  \n  const [startHours, startMinutes] = start\n  const lessonStart = new Date().setHours(startHours, startMinutes) - TEN_MINUTES\n  if(lessonStart > now) return false\n\n  const [endHours, endMinutes] = end\n  const lessonEnd = new Date().setHours(endHours, endMinutes)\n  if(lessonEnd < now) return false\n\n  return true\n}","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport api from \"../../api\";\nimport { DayRange, Qoute, Univer, WeekRange } from \"../../types\";\nimport { getCurrentDay, getCurrentWeek, getDaysStats } from \"../../utils\";\n\ntype ConfigState = {\n  isLoading: boolean\n  error: {\n    message: string\n    payload: any\n  } | null\n  univerList: Univer[]\n  currentUniver: Univer | null\n  \n  passDays: number\n  countDays: number\n  toEndDays: number\n  toEndPercent: number\n  currentDay: DayRange\n  currentWeek: WeekRange\n  config: { [key:string]: boolean }\n\n  qoute: Qoute | null\n}\n\nconst initialState: ConfigState = {\n  isLoading: false,\n  error: null,\n  univerList: [],\n  currentUniver: null,\n\n  passDays: 0,\n  countDays: 0,\n  toEndDays: 0,\n  toEndPercent: 0,\n  currentDay: 0,\n  currentWeek: 0,\n  config: {},\n\n  qoute: null,\n}\n\nexport const requestQoute = createAsyncThunk(\n  'qoute/request',\n  api.qoute.getQoute,\n)\n\nexport const requestConfigUnivers = createAsyncThunk(\n  'config/univers',\n  api.config.getUniverList\n)\n\nconst configSlice = createSlice({\n  name: 'config',\n  initialState,\n  reducers: {\n    setCurrentUniver(state, action)\n    {\n      let currentUniver = action.payload\n      if(!currentUniver)\n      {\n        state.currentUniver = null\n        return\n      }\n      \n      currentUniver = state.univerList.find(univer => univer.id === currentUniver.id)\n      state.currentUniver = currentUniver\n      state.currentDay = getCurrentDay()\n      state.currentWeek = getCurrentWeek(currentUniver.weeks)\n\n      const { passDays, countDays, toEndDays } = getDaysStats(\n        currentUniver.startDate,\n        currentUniver.endDate,\n      )\n      state.countDays = countDays\n      state.passDays = passDays\n      state.toEndDays = toEndDays\n      state.toEndPercent = passDays / countDays * 100\n    },\n    setConfig(state,action)\n    {\n      state.config = action.payload\n    },\n  },\n  extraReducers(builder)\n  {\n    builder\n      .addCase(requestConfigUnivers.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(requestConfigUnivers.rejected, (state,action) => {\n        state.isLoading = false\n        state.error = {\n          message: 'Ошибка при запросе университетов :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestConfigUnivers.fulfilled, (state,action) => {\n        state.isLoading = false\n        state.error = null\n        state.univerList = action.payload\n      })\n\n      .addCase(requestQoute.pending, state => {\n        state.isLoading = true\n      })\n      .addCase(requestQoute.fulfilled, (state, action) => {\n        state.isLoading = false\n        state.qoute = action.payload as Qoute | null\n      })\n  },\n})\n\nexport const { setCurrentUniver, setConfig } = configSlice.actions\nexport default configSlice.reducer","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport api from \"../../api\";\nimport { User, UserData } from \"../../types\";\n\ntype ConfigState = {\n  isLoading: boolean\n  isUniverLoading: boolean\n  isScheduleLoading: boolean\n  error: {\n    message: string\n    payload: any\n  } | null\n  user: User | null\n  userData: UserData | null\n  isLoaderShowing: boolean\n}\n\nconst initialState: ConfigState = {\n  isLoading: false,\n  isLoaderShowing: true,\n  isUniverLoading: false,\n  isScheduleLoading: false,\n  error: null,\n  user: null,\n  userData: null,\n}\n\nexport const requestGetUser = createAsyncThunk(\n  'user/request',\n  api.user.getUser\n)\n\nexport const requestUpdateUserUniver = createAsyncThunk(\n  'user/update/univer',\n  api.user.updateUserUniver\n)\n\nexport const requestDeleteUserUniver = createAsyncThunk(\n  'user/delete/univer',\n  api.user.deleteUserUniver\n)\n\nexport const requestUpdateUserSchedule = createAsyncThunk(\n  'user/update/schedule',\n  api.user.updateUserSchedule\n)\n\nexport const requestDeleteUserSchedule = createAsyncThunk(\n  'user/delete/schedule',\n  api.user.deleteUserSchedule\n)\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setUserData(state, action)\n    {\n      state.userData = action.payload\n    },\n    setIsLoaderShowing(state, action)\n    {\n      state.isLoaderShowing = action.payload\n    },\n  },\n  extraReducers(builder)\n  {\n    builder\n      .addCase(requestGetUser.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(requestGetUser.rejected, (state,action) => {\n        state.isLoading = false\n        state.error = {\n          message: 'Произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestGetUser.fulfilled, (state,action) => {\n        state.isLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestUpdateUserUniver.pending, (state) => {\n        state.isUniverLoading = true\n        state.error = null\n      })\n      .addCase(requestUpdateUserUniver.rejected, (state,action) => {\n        state.isUniverLoading = false\n        state.error = {\n          message: 'При обновлении университета произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestUpdateUserUniver.fulfilled, (state,action) => {\n        state.isUniverLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestDeleteUserUniver.pending, (state) => {\n        state.isUniverLoading = true\n        state.error = null\n      })\n      .addCase(requestDeleteUserUniver.rejected, (state,action) => {\n        state.isUniverLoading = false\n        state.error = {\n          message: 'При обновлении университета произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestDeleteUserUniver.fulfilled, (state,action) => {\n        state.isUniverLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestUpdateUserSchedule.pending, (state) => {\n        state.isScheduleLoading = true\n        state.error = null\n      })\n      .addCase(requestUpdateUserSchedule.rejected, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = {\n          message: 'При обновлении расписания произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestUpdateUserSchedule.fulfilled, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestDeleteUserSchedule.pending, (state) => {\n        state.isScheduleLoading = true\n        state.error = null\n      })\n      .addCase(requestDeleteUserSchedule.rejected, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = {\n          message: 'При обновлении расписания произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestDeleteUserSchedule.fulfilled, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n  },\n})\n\nexport const { setUserData, setIsLoaderShowing } = userSlice.actions\nexport default userSlice.reducer","import { combineReducers } from \"@reduxjs/toolkit\"\n\nimport navigation from './slices/navigation'\nimport schedule from './slices/schedule'\nimport config from './slices/config'\nimport user from './slices/user'\n\nconst rootReducer = combineReducers({\n  navigation,\n  schedule,\n  config,\n  user,\n})\n\nexport type RootState = ReturnType<typeof rootReducer>\nexport default rootReducer","import { configureStore } from \"@reduxjs/toolkit\"\nimport { useDispatch } from \"react-redux\"\n\nimport rootReducer from './rootReducer'\n\nconst store = configureStore({ reducer : rootReducer })\n\nexport const useAppDispatch = () => useDispatch<typeof store.dispatch>()\nexport default store","import React from 'react'\nimport { Lesson } from '../../types'\nimport './LessonRow.sass'\n\ntype LessonRowProps = {\n  current: boolean\n  lesson: Lesson\n  onGoToSchedule: (href: string) => void\n  getStats?: () => void\n}\n\nconst LessonRow: React.FC<LessonRowProps> = ({\n  current,\n  lesson,\n  onGoToSchedule,\n  getStats,\n}) => {\n  return (\n    <div className={`lesson-row${current ? ' lesson-row--current' : ''}`}>\n      <div className=\"lesson-row__time\">\n        {lesson.time.map((time, i) => {\n          return <div\n            key={time}\n            className={`lesson-row__time-item lesson-row__time-item--${i === 0 ? 'start' : 'end'}`}\n          >{time}</div>\n        })}\n      </div>\n      <div className={`lesson-row__body lesson-row__body--${lesson.type}`}>\n        {lesson.typeTitle &&\n          <div className=\"lesson-row__place\">\n            <span className={`lesson-row__type-title--${lesson.type}`}>\n              {lesson.typeTitle}\n            </span>\n            {lesson.place}\n          </div>\n        }\n        {/* <div onClick={() => getStats && getStats()} className=\"lesson-row__subject\"> */}\n        <div onClick={()=>{}} className=\"lesson-row__subject\">\n          {lesson.subject} {lesson.group !== 2 && `(${lesson.group+1}гр.)`}\n        </div>\n        <div className=\"lesson-row__fromWhoms\">\n          {lesson.fromWhoms.map(fromWhom => {\n            return <div\n              key={fromWhom.href}\n              className={`lesson-row__fromWhoms-item${!fromWhom.href ? '' : ' link'}`}\n              onClick={() => fromWhom.href && onGoToSchedule(fromWhom.href)}\n            >{fromWhom.title}</div>\n          })}\n        </div>\n      </div>\n      <div className=\"lesson-row__after\"></div>\n    </div>\n  )\n}\n\nexport default LessonRow","import React from 'react'\nimport { Icon56GhostOutline } from '@vkontakte/icons'\nimport { Card, Placeholder } from '@vkontakte/vkui'\nimport { Lesson } from '../../types'\nimport LessonRow from '../LessonRow'\nimport { isCurrentLesson } from '../../utils'\n\ntype ScheduleBodyProps = {\n  today: boolean\n  lessons: Lesson[]\n  onGoToSchedule: (href: string) => void\n  onGetStats?: (lesson: Lesson) => void\n}\n\nconst ScheduleBody: React.FC<ScheduleBodyProps> = ({\n  today,\n  lessons,\n  onGoToSchedule,\n  onGetStats,\n}) => {\n  return (\n    <Card className=\"schedule__body\">\n      {lessons.length === 0\n        ? <Placeholder\n            className=\"schedule__empty-placeholder\"\n            icon={<Icon56GhostOutline style={{color:\"teal\"}}/>}\n          >Ничего нет</Placeholder>\n        : lessons.map((lesson, j) => {\n            const lessonTime = lesson.time.map(timeString => timeString.split(':').map(s=>+s))\n            const current = today && isCurrentLesson(lessonTime)\n\n            return <LessonRow\n              key={j}\n              lesson={lesson}\n              onGoToSchedule={onGoToSchedule}\n              current={current}\n              getStats={() => onGetStats && onGetStats(lesson)}\n            />\n          })}\n    </Card>\n  )\n}\n\nexport default ScheduleBody","import React from 'react'\nimport { Icon28ChevronDownOutline, Icon28ChevronUpOutline, Icon28Like, Icon28LikeOutline } from '@vkontakte/icons'\nimport { Avatar, Card, Cell, Div, IconButton } from '@vkontakte/vkui'\nimport { Qoute as QouteType } from '../../types'\n\ntype QouteProps = {\n  qoute: QouteType\n}\n\nconst Qoute: React.FC<QouteProps> = ({\n  qoute,\n}) => {\n  const [isOpen, setIsOpen] = React.useState(false)\n\n  return (\n    <Div>\n      <Card>\n        <Cell\n          onClick={()=>setIsOpen(!isOpen)}\n          description=\"Цитата дня\"\n          after={!isOpen ? <Icon28ChevronDownOutline/> : <Icon28ChevronUpOutline/>}\n        >{qoute.author}</Cell>\n        {isOpen && <Div style={{paddingTop:4}}>{qoute.text}</Div>}\n      </Card>\n    </Div>\n  )\n}\n\nexport default Qoute","import React from 'react'\nimport {\n  Avatar,\n  Button,\n  Card,\n  Cell,\n  CellButton,\n  Div,\n  Header,\n  IconButton,\n  Panel,\n  PanelHeader,\n  Placeholder,\n  Progress,\n  Separator,\n  Spinner,\n} from '@vkontakte/vkui'\nimport {\n  Icon28Search,\n  Icon28SettingsOutline,\n  Icon28ChevronDownOutline,\n  Icon28ChevronUpOutline,\n  Icon28DeleteOutline,\n  Icon28AddOutline,\n  Icon28EducationOutline,\n  Icon28ArrowUpOutline,\n  Icon28ArrowDownOutline,\n  \n} from '@vkontakte/icons';\nimport { PanelProps } from '../../types'\nimport { useSelector } from 'react-redux';\nimport { setActivePanel } from '../../store/slices/navigation';\nimport { SCHEDULE_PANEL, SEARCH_PANEL, SETTINGS_PANEL } from '../../constants';\nimport { requestDeleteUserSchedule, requestGetUser, setIsLoaderShowing } from '../../store/slices/user';\nimport { requestConfigUnivers } from '../../store/slices/config';\nimport { RootState } from '../../store/rootReducer';\nimport { getFromWhomsList, getLessonsInDay, isCurrentWeek, isPassWeek } from '../../utils';\nimport { requestSchedule } from '../../store/slices/schedule';\nimport ScheduleBody from '../../components/ScheduleBody';\nimport { useAppDispatch } from '../../store';\nimport Qoute from '../../components/Qoute';\nimport Loader from '../../components/Loader';\n\nconst MainPanel: React.FC<PanelProps> = ({\n  id,\n}) => {\n  const dispatch = useAppDispatch()\n  const {\n    isLoaderShowing,\n    user,\n    isLoading: isUserLoading,\n    error: userError,\n  } = useSelector((s: RootState) => s.user)\n  const {\n    currentUniver,\n    currentWeek,\n    currentDay,\n    toEndDays,\n    toEndPercent,\n    isLoading: isConfigLoading,\n    error: configError,\n    qoute,\n  } = useSelector((s: RootState) => s.config)\n\n  const goToSearchSchedule = () => {\n    dispatch(setActivePanel(SEARCH_PANEL))\n  }\n\n  const goToSettings = () => {\n    dispatch(setActivePanel(SETTINGS_PANEL))\n  }\n\n  const goToSchedule = (tail: string) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail,\n    }))\n    dispatch(setActivePanel(SCHEDULE_PANEL))\n  }\n\n  const deleteSchedule = () => {\n    dispatch(requestDeleteUserSchedule(user!.id))\n  }\n\n  const tryAgain = () => {\n    if(userError && user)\n    {\n      dispatch(requestGetUser(user.id))\n    }\n    if(configError)\n    {\n      dispatch(requestConfigUnivers())\n    }\n  }\n\n  const [fromWhomsIsOpen, setFromWhomsIsOpen] = React.useState(false)\n  const toggleFromWhoms = () => {\n    setFromWhomsIsOpen(!fromWhomsIsOpen)\n  }\n\n  const [weeksIsOpen, setWeeksIsOpen] = React.useState(false)\n  const toggleWeeks = () => {\n    setWeeksIsOpen(!weeksIsOpen)\n  }\n\n  const [timeLessonsIsOpen, setTimeLessonsIsOpen] = React.useState(false)\n  const toggleTimeLessons = () => {\n    setTimeLessonsIsOpen(!timeLessonsIsOpen)\n  }\n  \n  const hideLoader = () => {\n    dispatch(setIsLoaderShowing(false))\n  }\n\n  let content\n  if(isUserLoading || isConfigLoading)// || isLoaderShowing)\n  {\n    // content = <Loader isEnd={!isUserLoading && !isConfigLoading} onHide={hideLoader} />\n    content = <Spinner style={{paddingTop:'20vh'}} />\n  }\n  else if(userError || configError)\n  {\n    const userMessage = userError && userError.message\n    const configMessage = configError && configError.message\n\n    content = (\n      <Placeholder\n        stretched\n        action={\n          <Button onClick={tryAgain}>Повторить</Button>\n        }\n      >{userMessage}<br/>{configMessage}</Placeholder>\n    )\n  }\n  else if(user)\n  {\n    let univerContent\n    if(user.univer && currentUniver)\n    {\n      univerContent = (<>\n        {qoute && <>\n          <Qoute qoute={qoute} />\n          <Separator/>\n        </>}\n\n        <Div>\n          <Card>\n            <Header\n              subtitle={`До конца семестра ${toEndDays} дн. (${new Date(currentUniver.endDate).toLocaleDateString()})`}\n            >{currentWeek ? 'Числитель' : 'Знаменатель'}</Header>\n            <Progress\n              style={{margin: '0px 12px', background: 'gray'}}\n              value={toEndPercent}\n            />\n            <br />\n            <Separator />\n\n            <Cell\n              after={<Icon28Search/>}\n              onClick={goToSearchSchedule}\n            >Искать расписание</Cell>\n          </Card>\n        </Div>\n      </>)\n    }\n\n    if(!user.univer)\n    {\n      univerContent = (\n        <Placeholder\n          stretched\n          icon={<Icon28EducationOutline width={64} height={64}/>}\n          action={<Button onClick={goToSettings}>Выбрать</Button>}\n        >Выберите университет, чтобы пользоваться приложением</Placeholder>\n      )\n    }\n\n    let scheduleContent\n    if(user.schedule)\n    {\n      const lessonsToday = getLessonsInDay(user.schedule.lessons, currentDay, currentWeek)\n      const DAYS = ['Понедельник','Вторник','Среда','Четверг','Пятница','Суббота']\n      const todayString = `${DAYS[currentDay]}, ${new Date().toLocaleDateString()}`\n\n      scheduleContent = (<>\n        <Div style={{paddingTop:0}}>\n          <Card>\n            <Cell\n              disabled\n              after={\n                <IconButton>\n                  <Icon28DeleteOutline fill=\"tomato\" onClick={deleteSchedule}/>\n                </IconButton>\n              }\n            >{user.schedule.title}</Cell>\n            <Separator/>\n\n            <Header subtitle={todayString}>\n              Расписание на сегодня\n            </Header>\n            <div style={{padding:'0px 8px'}}>\n              <ScheduleBody today lessons={lessonsToday} onGoToSchedule={goToSchedule} />\n            </div>\n            <br/><Separator/>\n            \n            <CellButton\n              onClick={() => goToSchedule(user.schedule!.href)}\n            >Полное расписание</CellButton>\n          </Card>\n        </Div>\n        <Div style={{paddingTop:0}}>\n          <Card>\n            <Cell\n              onClick={toggleFromWhoms}\n              after={!fromWhomsIsOpen ? <Icon28ChevronDownOutline /> : <Icon28ChevronUpOutline/>}\n            >Преподаватели/Группы</Cell>\n            {fromWhomsIsOpen && getFromWhomsList(user.schedule.lessons).map(fromWhom => {\n              return <CellButton\n                key={fromWhom.href}\n                onClick={() => goToSchedule(fromWhom.href)}\n              >{fromWhom.title}</CellButton>\n            })}\n          </Card>\n        </Div>\n      </>)\n    }\n    \n    if(user.univer && !user.schedule)\n    {\n      scheduleContent = (\n        <Div style={{paddingTop:0}}>\n          <Card>\n            <Cell\n              after={<Icon28AddOutline fill=\"orange\"/>}\n              onClick={goToSearchSchedule}\n            >Расписание не выбрано</Cell>\n          </Card>\n        </Div>\n      )\n    }\n\n    let univerInfoContent\n    if(currentUniver)\n    {\n      univerInfoContent = (<>\n        <Separator/>\n        <Div>\n          <Card>\n            <Cell\n              onClick={toggleWeeks}\n              after={!weeksIsOpen ? <Icon28ChevronDownOutline /> : <Icon28ChevronUpOutline/>}\n            >Учебные недели</Cell>\n            {weeksIsOpen && <Separator/>}\n            {weeksIsOpen && currentUniver.weeks.map((week, i) => {\n              const startRangString = new Date(week.range[0]).toLocaleDateString()\n              const endRangeString = new Date(week.range[1]).toLocaleDateString()\n              const rangeString = startRangString + ' - ' + endRangeString\n              \n              const weekPassed = isPassWeek(week.range[1])\n\n              return <Cell\n                key={i}\n                disabled\n                description={rangeString}\n                after={\n                  week.weekType === 0\n                    ? <Icon28ArrowUpOutline fill={isCurrentWeek(week) ? 'tomato' : 'teal'}/>\n                    : <Icon28ArrowDownOutline fill={isCurrentWeek(week) ? 'tomato' : 'violet'}/>\n                }\n              >\n                <span style={{\n                  textDecoration: weekPassed ? 'line-through': 'none',\n                  opacity: weekPassed ? 0.5 : 1,\n                  color: isCurrentWeek(week) ? 'tomato' : '',\n                }}>\n                  {week.weekType === 0?'Числитель':'Знаменатель'}\n                </span>\n              </Cell>\n            })}\n          </Card>\n        </Div>\n        <Div style={{paddingTop:0}}>\n          <Card>\n            <Cell\n              onClick={toggleTimeLessons}\n              after={!timeLessonsIsOpen ? <Icon28ChevronDownOutline /> : <Icon28ChevronUpOutline/>}\n            >Время занятий</Cell>\n            {timeLessonsIsOpen && <Separator/>}\n            {timeLessonsIsOpen && currentUniver.timeLessons.map((time, i) => {\n              return <Cell\n                key={i}\n                disabled\n                description={`${i+1} пара`}\n              >{time}</Cell>\n            })}\n          </Card>\n        </Div>\n      </>)\n    }\n\n    content = (<>\n      {univerContent}\n      {scheduleContent}\n      {univerInfoContent}\n    </>)\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        // left={!(isUserLoading || isConfigLoading || isLoaderShowing) && user?.univer && <Icon28SettingsOutline onClick={goToSettings}/>}\n        left={!(isUserLoading || isConfigLoading) && user?.univer && <Icon28SettingsOutline onClick={goToSettings}/>}\n      />\n      {content}\n    </Panel>\n  )\n}\n\nexport default MainPanel","import React from 'react'\nimport {\n  ActionSheet,\n  ActionSheetItem,\n  Button,\n  Card,\n  Div,\n  Gallery,\n  IconButton,\n  Link,\n  Panel,\n  PanelHeader,\n  Placeholder,\n  SimpleCell,\n  Spinner,\n  Tabs,\n  TabsItem,\n} from '@vkontakte/vkui'\nimport {\n  Icon28ArrowUturnLeftOutline,\n  Icon28HomeOutline,\n  Icon28MoreVertical,\n  Icon28DeleteOutline,\n  Icon28SortHorizontalOutline,\n  Icon28Users3Outline,\n  Icon28FavoriteCircleFillYellow,\n} from '@vkontakte/icons';\nimport { useDispatch, useSelector } from 'react-redux'\nimport { RootState } from '../../store/rootReducer'\nimport { DayRange, Lesson, PanelProps, WeekRange } from '../../types'\nimport { getDiff, getLessonsInDay, getStatsForLesson } from '../../utils'\nimport { clearScheduleHistory, requestSchedule, scheduleHistoryBack, setLessonStats } from '../../store/slices/schedule';\nimport { setActiveModal, setActivePanel } from '../../store/slices/navigation';\nimport { MAIN_PANEL } from '../../constants';\nimport { requestDeleteUserSchedule, requestUpdateUserSchedule } from '../../store/slices/user';\nimport ScheduleBody from '../../components/ScheduleBody';\nimport './Schedule.sass'\n\nconst DAYS = [\n  { id: 0, title: 'ПН' },\n  { id: 1, title: 'ВТ' },\n  { id: 2, title: 'СР' },\n  { id: 3, title: 'ЧТ' },\n  { id: 4, title: 'ПТ' },\n  { id: 5, title: 'СБ' },\n]\nconst WEEKS = [\n  { id: 0, title: 'Числитель'},\n  { id: 1, title: 'Знаменатель'},\n]\n\nconst SchedulePanel: React.FC<PanelProps> = ({\n  id,\n  setPopout,\n}) => {\n  const dispatch = useDispatch()\n  const { isLoading, error, schedule, scheduleHistoryHrefs, } = useSelector((s: RootState) => s.schedule)\n  const { user } = useSelector((s: RootState) => s.user)\n  const { currentUniver, currentDay, currentWeek } = useSelector((s: RootState) => s.config)\n\n  const [activeDay, setActiveDay] = React.useState<DayRange>(currentDay)\n  const [activeWeek, setActiveWeek] = React.useState<WeekRange>(currentWeek)\n\n  const [isDiffShowing, setIsDiffShowing] = React.useState(false)\n  const toggleDiffShowing = () => {\n    setIsDiffShowing(!isDiffShowing)\n  }\n\n  const goToMain = () => {\n    dispatch(setActivePanel(MAIN_PANEL))\n    dispatch(clearScheduleHistory())\n  }\n\n  const goBack = () => {\n    if(scheduleHistoryHrefs.length === 1)\n    {\n      goToMain()\n    }\n    else\n    {\n      dispatch(scheduleHistoryBack())\n      setIsDiffShowing(false)\n    }\n  }\n\n  const saveSchedule = () => {\n    setIsDiffShowing(false)\n    dispatch(requestUpdateUserSchedule({\n      id: user!.id,\n      scheduleId: schedule!.href,\n    }))\n  }\n\n  const deleteSchedule = () => {\n    setIsDiffShowing(false)\n    dispatch(requestDeleteUserSchedule(user!.id))\n  }\n\n  const showActions = () => {\n    let toggleScheduleItem =\n      user!.schedule && user!.schedule.href === schedule!.href\n        ? <ActionSheetItem\n            autoclose\n            style={{color: 'tomato'}}\n            onClick={deleteSchedule}\n            before={<Icon28DeleteOutline fill=\"tomato\"/>}\n          >Удалить расписание</ActionSheetItem>\n        : <ActionSheetItem\n            autoclose\n            onClick={saveSchedule}\n            before={<Icon28FavoriteCircleFillYellow/>}\n            subtitle={user!.schedule?'вместо текущего':''}\n          >Сохранить расписание</ActionSheetItem>\n\n    const popout = (\n      <ActionSheet\n        onClose={() => setPopout!(null)}\n        iosCloseItem={\n          <ActionSheetItem autoclose mode=\"cancel\">\n            Отменить\n          </ActionSheetItem>\n        }\n      >\n        {false &&\n          <ActionSheetItem\n            autoclose\n            style={{color:'tan'}}\n            before={<Icon28Users3Outline fill=\"tan\"/>}\n            onClick={()=>{}}\n          >Экзамены</ActionSheetItem>\n        }\n        {user!.schedule && !(user!.schedule.href === schedule!.href) &&\n          <ActionSheetItem\n            autoclose\n            style={{color:'teal'}}\n            before={\n              <Icon28SortHorizontalOutline\n                fill={isDiffShowing?'tomato':'orange'}\n                style={{transform:`rotateY(${isDiffShowing?0:180}deg)`}}\n              />\n            }\n            subtitle={\n              isDiffShowing\n                ? 'Все занятия данного расписания'\n                : 'Занятия вне вашего расписания'\n              }\n            onClick={toggleDiffShowing}\n          >\n            {isDiffShowing ? 'Расписание без разницы' : 'Разница расписаний'}\n          </ActionSheetItem>\n        }\n        {toggleScheduleItem}\n      </ActionSheet>\n    )\n    setPopout!(popout)\n  }\n\n  const goToSchedule = (tail: string) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail,\n    }))\n    setIsDiffShowing(false)\n  }\n\n  const cardRef = React.useRef<HTMLDivElement>(null)\n\n  let content\n  if(isLoading)\n  {\n    content = <Spinner />\n  }\n  else if(error)\n  {\n    content = <Placeholder\n      stretched\n      action={\n        <Button onClick={() => {\n          dispatch(requestSchedule(error.payload))\n        }}>Повторить</Button>}\n    >{error.message}</Placeholder>\n  }\n  else if(schedule)\n  {\n    const ls = isDiffShowing ? getDiff(schedule.lessons, user!.schedule!.lessons) : schedule.lessons\n\n    content = ( <>      \n      <div className=\"schedule__card\" ref={cardRef}>\n        <Gallery\n          style={{height:'100%'}}\n          slideIndex={activeDay}\n          onChange={d => setActiveDay(d as DayRange)}\n        >\n          {DAYS.map((_,i) => {\n            const lessons = getLessonsInDay(ls, i as DayRange, activeWeek)\n\n            return <ScheduleBody\n              key={i}\n              today={activeDay === currentDay && activeWeek === currentWeek}\n              lessons={lessons}\n              onGoToSchedule={goToSchedule}\n              onGetStats={(lesson: Lesson) => {\n                const { stats, fromWhoms } = getStatsForLesson({\n                  lesson,\n                  lessons: schedule.lessons,\n                  currentUniver: currentUniver!,\n                })\n                dispatch(setLessonStats({\n                  title: lesson.subject,\n                  stats,\n                  fromWhoms,\n                }))\n                dispatch(setActiveModal('stats'))\n              }}\n            />\n          })}\n        </Gallery>\n      </div>\n\n      <Card style={{marginTop:8}}>\n        <Tabs>\n          {WEEKS.map(week => {\n            return <TabsItem\n              key={week.id}\n              selected={week.id === activeWeek}\n              onClick={() => setActiveWeek(week.id as WeekRange)}\n              style={{color: currentWeek === week.id ? 'tomato': ''}}\n            >{week.title}</TabsItem>\n          })}\n        </Tabs>\n        <Tabs>\n          {DAYS.map(day => {\n            return <TabsItem\n              key={day.id}\n              selected={day.id === activeDay}\n              onClick={() => setActiveDay(day.id as DayRange)}\n              style={{color: currentDay === day.id ? 'tomato': ''}}\n            >{day.title}</TabsItem>\n          })}\n        </Tabs>\n        <SimpleCell\n          disabled\n          before={\n            <IconButton>\n              <Icon28ArrowUturnLeftOutline onClick={goBack} width={20} style={{marginRight: 12, color:'teal'}}/>\n            </IconButton>\n          }\n          after={\n            <IconButton>\n              <Icon28MoreVertical onClick={showActions} width={20} style={{color:'violet'}}/>\n            </IconButton>\n          }\n        >\n          <Link href={`${user!.univer!.baseUrl}${schedule.href}`}>\n            {schedule.title}\n          </Link>\n          {isDiffShowing &&\n            <Icon28SortHorizontalOutline className=\"schedule__icon--diff\"/>\n          }\n          {user?.schedule && user.schedule.href === schedule.href &&\n            <Icon28FavoriteCircleFillYellow className=\"schedule__icon--fav\"/>\n          }\n        </SimpleCell>\n      </Card>\n    </>)\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={\n          <Icon28HomeOutline onClick={goToMain} />\n        }\n      />\n      <Div className=\"schedule__wrapper\">\n        {content}\n      </Div>\n    </Panel>\n  )\n}\n\nexport default SchedulePanel","import React, { ChangeEvent } from 'react'\nimport {\n  CellButton,\n  Div,\n  FixedLayout,\n  Panel,\n  PanelHeader,\n  PanelHeaderBack,\n  Placeholder,\n  Search,\n  Spinner,\n} from '@vkontakte/vkui'\nimport { Icon56GhostOutline } from '@vkontakte/icons'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { MAIN_PANEL, SCHEDULE_PANEL } from '../../constants'\nimport { RootState } from '../../store/rootReducer'\nimport { setActivePanel } from '../../store/slices/navigation'\nimport { clearSearchedSchedules, requestSchedule, requestSearchSchedule } from '../../store/slices/schedule'\nimport { HrefTitle, PanelProps } from '../../types'\n\nconst SearchPanel: React.FC<PanelProps> = ({\n  id,\n}) => {\n  const dispatch = useDispatch()\n  const { isSearchLoading, searchedSchedules, } = useSelector((s: RootState) => s.schedule)\n  const { user } = useSelector((s: RootState) => s.user)\n\n  const [q, setQ] = React.useState<string>('')\n  const handleQChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const q = e.target.value\n\n    setQ(q)\n    if(!q)\n    {\n      dispatch(clearSearchedSchedules())\n    }\n  }\n\n  const searchRef = React.useRef<HTMLInputElement>(null)\n  React.useEffect(() => {\n    window.setTimeout(() => {\n      searchRef.current && searchRef.current.focus()\n    },100)\n    return () => {\n      dispatch(clearSearchedSchedules())\n    }\n  },[])\n\n  const [debQ, setDebQ] = React.useState(q)\n  React.useEffect(() => {\n    const timeout = window.setTimeout(() => {\n      setDebQ(q)\n    }, 500)\n\n    return () => {\n      window.clearTimeout(timeout)\n    }\n  }, [q])\n\n  React.useEffect(() => {\n    if(debQ)\n    {\n      dispatch(requestSearchSchedule({\n        univer: user!.univer!.code,\n        q: debQ,\n      }))\n    }\n  }, [debQ])\n\n  const goToMainPanel = () => {\n    dispatch(setActivePanel(MAIN_PANEL))\n  }\n\n  const goToSchedule = (schedule: HrefTitle) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail: schedule.href,\n    }))\n    dispatch(setActivePanel(SCHEDULE_PANEL))\n  }\n\n  let content\n\n  if(isSearchLoading)\n  {\n    content = <Spinner />\n  }\n  else if(searchedSchedules.length === 0)\n  {\n    content = <Placeholder\n      icon={<Icon56GhostOutline style={{color:\"teal\"}} />}\n    >Ничего не найдено</Placeholder>\n  }\n  else\n  {\n    content = (<>\n      {searchedSchedules.map((schedule, i) => {\n        return <CellButton\n          key={i}\n          onClick={() => goToSchedule(schedule)}\n        >{schedule.title}</CellButton>\n      })}\n      <div style={{textAlign:'center'}}>\n        Уточните или исправьте запрос, если не нашли нужное расписание\n      </div>\n    </>)\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={\n          <PanelHeaderBack onClick={goToMainPanel} />\n        }\n      >Поиск</PanelHeader>\n\n      <FixedLayout style={{paddingTop:24}} vertical=\"top\" filled>\n        <Search\n          getRef={searchRef}\n          placeholder=\"Поиск расписания\"\n          after={null}\n          value={q}\n          onChange={handleQChange}\n        />\n      </FixedLayout>\n\n      <Div style={{marginTop:70}}>{content}</Div>\n    </Panel>\n  )\n}\n\nexport default SearchPanel","import React, { ChangeEvent } from 'react'\nimport {\n  Button,\n  Div,\n  FormItem,\n  Group,\n  Header,\n  NativeSelect,\n  Panel,\n  PanelHeader,\n  PanelHeaderBack,\n} from '@vkontakte/vkui'\nimport { PanelProps } from '../../types'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { setActivePanel } from '../../store/slices/navigation'\nimport { MAIN_PANEL } from '../../constants'\nimport { RootState } from '../../store/rootReducer'\nimport { requestDeleteUserUniver, requestUpdateUserUniver } from '../../store/slices/user'\n\nconst SettingsPanel: React.FC<PanelProps> = ({\n  id,\n}) => {\n  const dispatch = useDispatch()\n  const { univerList } = useSelector((s: RootState) => s.config)\n  const { user } = useSelector((s: RootState) => s.user)\n\n  const goToMain = () => {\n    dispatch(setActivePanel(MAIN_PANEL))\n  }\n\n  const userUniverId = user?.univer?.id ?? ''\n  const [univer, setUniver] = React.useState(''+userUniverId)\n  const handleChangeUniver = (e: ChangeEvent<HTMLSelectElement>) => {\n    setUniver(e.target.value)\n  }\n\n  const changeUniver = () => {\n    if((''+userUniverId) !== univer)\n    {\n      if(univer === '')\n      {\n        dispatch(requestDeleteUserUniver(user!.id))\n      }\n      else\n      {\n        dispatch(requestUpdateUserUniver({\n          id: user!.id,\n          univerId: +univer,\n        }))\n      }\n    }\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={<PanelHeaderBack onClick={goToMain} />}\n      >Настройки</PanelHeader>\n\n      <Group header={<Header mode=\"secondary\">Главное</Header>}>      \n        <FormItem\n          top=\"Университет\"\n          bottom=\"При изменении университета, выбранная группа удалится!\"\n          >\n          <NativeSelect\n            placeholder=\"Не выбран\"\n            value={univer}\n            onChange={handleChangeUniver}\n            >\n            {univerList.map(univer => {\n              return <option\n              key={univer.code}\n              value={univer.id}\n              >{univer.subtitle}</option>\n            })}\n          </NativeSelect>\n        </FormItem>\n        <Div style={{paddingTop:0}}>\n          <Button\n            disabled={(''+userUniverId) === univer}\n            style={{width:'100%'}}\n            size=\"l\"\n            onClick={changeUniver}\n            >Сохранить</Button>\n        </Div>\n      </Group>\n    </Panel>\n  )\n}\n\nexport default SettingsPanel","import React from \"react\"\nimport {\n  Cell,\n  IconButton,\n  usePlatform,\n} from \"@vkontakte/vkui\"\nimport {\n  Icon28FavoriteOutline,\n  Icon28ShareOutline,\n  Icon28SmartphoneOutline,\n  Icon28UsersOutline,\n} from \"@vkontakte/icons\"\nimport bridge from '@vkontakte/vk-bridge'\nimport './AppActions.sass'\nimport { GROUP_ID } from \"../../constants\"\n\ntype AppActionsProps = {\n  closeModal: () => void\n}\n\nconst AppActions: React.FC<AppActionsProps> = ({\n  closeModal,\n}) => {\n  const platform = usePlatform()\n\n  const addToFavorite = () => {\n    closeModal()\n    bridge.send('VKWebAppAddToFavorites')\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  const joinToGroup = () => {\n    closeModal()\n    bridge.send('VKWebAppJoinGroup', { group_id: GROUP_ID })\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  const addToHomeScreen = () => {\n    closeModal()\n    bridge.send('VKWebAppAddToHomeScreen')\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  const share = () => {\n    closeModal()\n    bridge.send('VKWebAppShare', {link: 'https://vk.com/app7908078'})\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  return (\n    <div>\n      {/* <Header>Не теряйте приложение</Header>\n      <Div className=\"actions-wrapper\" style={{paddingTop:0}}>\n        {true &&\n          <div className=\"actions__item\">\n            <IconButton>\n              <Icon28FavoriteOutline fill=\"orange\"/>\n            </IconButton>\n            Добавить в избранное\n          </div>\n        }\n        {true &&\n          <div className=\"actions__item\">\n            <IconButton>\n              <Icon28UsersOutline fill=\"var(--accent)\"/>\n            </IconButton>\n            Вступить в сообщество\n          </div>\n        }\n        {true &&\n          <div className=\"actions__item\">\n            <IconButton>\n              <Icon28ShareOutline fill=\"teal\"/>\n            </IconButton>\n            Поделиться приложением\n          </div>\n        }\n        {true &&\n          <div className=\"actions__item\">\n            <IconButton>\n              <Icon28SmartphoneOutline fill=\"tan\"/>\n            </IconButton>\n            На домашний экран\n          </div>\n        }\n      </Div> */}\n      {true &&\n        <Cell\n          before={\n            <IconButton>\n              <Icon28FavoriteOutline style={{marginRight:8,padding:0}} fill=\"orange\"/>\n            </IconButton>\n          }\n          description=\"Мини-приложения > Избранное\"\n          onClick={addToFavorite}\n        >В избранном</Cell>\n      }\n      {true &&\n        <Cell\n          before={\n            <IconButton>\n              <Icon28UsersOutline style={{marginRight:8,padding:0}} fill=\"var(--accent)\"/>\n            </IconButton>\n          }\n          description=\"Шапка группы\"\n          onClick={joinToGroup}\n        >Вступите в группу</Cell>\n      }\n      {platform === 'android' &&\n        <Cell\n          before={\n            <IconButton>\n                <Icon28SmartphoneOutline style={{marginRight:8,padding:0}} fill=\"tan\"/>\n              </IconButton>\n            }\n          description=\"Быстрый доступ с дом. экрана\"\n          onClick={addToHomeScreen}\n        >На домашний экран</Cell>\n      }\n      {true &&\n        <Cell\n          before={\n            <IconButton>\n              <Icon28ShareOutline style={{marginRight:8}} fill=\"teal\"/>\n            </IconButton>\n          }\n          description=\"Доступ по ссылке\"\n          onClick={share}\n        >Расскажите друзьям</Cell>\n      }\n    </div>\n  )\n}\n\nexport default AppActions","import React from \"react\"\nimport { Avatar, Caption, Card, CellButton, Div, Header, ModalCard, ModalPage, ModalPageHeader, ModalRoot, Progress } from \"@vkontakte/vkui\"\nimport AppActions from \"../AppActions\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { RootState } from \"../../store/rootReducer\"\nimport { setActiveModal } from \"../../store/slices/navigation\"\nimport { Icon24Dismiss } from \"@vkontakte/icons\"\nimport './ActionsModal.sass'\nimport { requestSchedule } from \"../../store/slices/schedule\"\n\n\nconst ActionsModal = () => {\n  const dispatch = useDispatch()\n  const { activeModal } = useSelector((s: RootState) => s.navigation)\n  const { lessonStats } = useSelector((s: RootState) => s.schedule)\n  const { user } = useSelector((s: RootState) => s.user)\n  const { currentUniver } = useSelector((s: RootState) => s.config)\n  \n  const closeModal = () => {\n    dispatch(setActiveModal(null))\n  }\n\n  const goToSchedule = (tail: string) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail,\n    }))\n    closeModal()\n  }\n\n  return (\n    <ModalRoot\n      activeModal={activeModal}\n      onClose={closeModal}\n    >\n      <ModalCard\n        id=\"actions\"\n        header=\"Не теряйте приложение\"\n        subheader=\"Т.к. приложение не находится в каталоге, найти через поиск его не получится. Поэтому, чтобы не потерять его, сохраните любым удомным способом:\"\n        icon={<Avatar size={72}/>}\n      >\n        <AppActions closeModal={closeModal}/>\n      </ModalCard>\n      <ModalPage id=\"stats\">\n        <ModalPageHeader\n          right={<Icon24Dismiss onClick={closeModal} style={{marginRight:8}}/>}\n        >Статистика</ModalPageHeader>\n        {lessonStats && <>\n          <Div>\n            <Card>\n              <Div>{lessonStats.title}</Div>\n            </Card>\n          </Div>\n          <Div style={{paddingTop:'0px 12px'}}>\n            {currentUniver &&\n              <Caption level=\"2\" weight=\"regular\" style={{opacity:0.5}}>\n                Пожалуйста, не воспринимайте данную статистику буквально!\n                Т.к. для расчета, первым днем принят {new Date(currentUniver.startDateStartOfWeek).toLocaleDateString()},\n                а последним {new Date(currentUniver.endDate).toLocaleDateString()}.\n              </Caption>\n            }\n          </Div>\n          <Div style={{padding:'0px 12px'}}>\n            {Object.entries(lessonStats.stats).map(([typeLesson, values]) => {\n              const { pass, total } = values\n              if(total === 0) return null\n              \n              const title = {\n                lec: 'Лекция',\n                pr: 'Практика',\n                lab: 'Лабораторная',\n              }[typeLesson]\n              \n              return (\n                <div className=\"stats__item\" key={typeLesson}>\n                  <Header>\n                    {title}\n                    <span className=\"stats__secondary\">{pass}/{total}</span>\n                  </Header>\n                  <Progress\n                    className={`stats__progress--${typeLesson}`}\n                    style={{margin: '0px 12px 8px 12px',}}\n                    value={pass / total * 100}\n                    />\n                </div>\n              )\n            })}\n          </Div>\n          <Div>\n            <Header>Преподаватели / группы</Header>\n            {lessonStats.fromWhoms.map(fromWhom => {\n              return <CellButton\n                key={fromWhom.href}\n                onClick={() => goToSchedule(fromWhom.href)}\n              >{fromWhom.title}</CellButton>\n            })}\n          </Div>\n        </>}\n      </ModalPage>\n    </ModalRoot>\n  )\n}\n\nexport default ActionsModal","import React from 'react';\nimport {\n  AppRoot,\n  ConfigProvider,\n  ScreenSpinner,\n  usePlatform,\n  View,\n} from '@vkontakte/vkui';\nimport bridge from '@vkontakte/vk-bridge'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { GROUP_ID, MAIN_PANEL, SCHEDULE_PANEL, SEARCH_PANEL, SETTINGS_PANEL } from './constants';\nimport MainPanel from './panels/main';\nimport SchedulePanel from './panels/schedule';\nimport SearchPanel from './panels/search';\nimport SettingsPanel from './panels/settings';\nimport { RootState } from './store/rootReducer';\nimport ActionsModal from './components/ActionsModal';\nimport { requestGetUser, setUserData } from './store/slices/user';\nimport { requestConfigUnivers, requestQoute, setConfig, setCurrentUniver } from './store/slices/config';\nimport { setActiveModal } from './store/slices/navigation';\n\nlet isFirstLoading = true\nconst App: React.FC = () => {\n  const dispatch = useDispatch()\n  const { activePanel, history } = useSelector((s: RootState) => s.navigation)\n  const {\n    isLoaderShowing,\n    user,\n    isLoading: isUserLoading,\n    error: userError,\n    isUniverLoading,\n    isScheduleLoading,\n  } = useSelector((s: RootState) => s.user)\n  const { config, isLoading: isConfigLoading, error: configError, } = useSelector((s: RootState) => s.config)\n\n  const platform = usePlatform()\n\n  React.useEffect(() => {\n    document.body.setAttribute('scheme', 'space_gray')\n\n    const config =\n      window.location.search.slice(1)\n        .split('&')\n        .reduce((config, queryParam) => {\n          const [key, value] = queryParam.split('=')\n          return { ...config, [key.slice(3)]: value === '1' }\n        },{})\n    dispatch(setConfig(config))\n  },[])\n\n  const [popout, setPopout] = React.useState<React.ReactNode>(null)\n  const handleSetPopout = (popout: React.ReactNode) => {\n    setPopout(popout)\n  }\n\n  React.useEffect(() => {\n    const initApp = async () => {\n      // const userData = await bridge.send('VKWebAppGetUserInfo')\n      const userData = { id: 0 }\n      dispatch(setUserData(userData))\n      dispatch(requestConfigUnivers())\n      dispatch(requestGetUser(userData.id))\n      dispatch(requestQoute())\n    }\n\n    if(!user) initApp()\n  },[])\n\n  React.useEffect(() => {\n    if(user)\n    {\n      if(user.univer)\n        dispatch(setCurrentUniver(user.univer))\n      else\n        dispatch(setCurrentUniver(null))\n    }\n  }, [user])\n\n  React.useEffect(() => {\n    if(isUniverLoading || isScheduleLoading)\n    {\n      setPopout(<ScreenSpinner/>)\n    }\n    else\n    {\n      setPopout(null)\n    }\n  }, [isUniverLoading, isScheduleLoading])\n\n  React.useEffect(() => {\n    const openModal = async () => {\n      if(platform === 'android')\n      {\n        const addToHomeScreenInfo = await bridge.send('VKWebAppAddToHomeScreenInfo')\n        if(\n          addToHomeScreenInfo.is_feature_supported &&\n          addToHomeScreenInfo.is_added_to_home_screen\n        ) return\n      }\n\n      if(config.is_favorite) return\n\n      const groupInfo = await bridge.send(\n        'VKWebAppGetGroupInfo',\n        {'group_id': GROUP_ID}\n      )\n      if(groupInfo.is_member) return\n\n      dispatch(setActiveModal('actions'))\n    }\n    \n    if(\n      !isConfigLoading && !isUserLoading && !isFirstLoading &&\n      !userError && !configError &&\n      !isLoaderShowing\n    )\n    {\n      openModal()      \n    }\n    isFirstLoading = false\n  }, [isConfigLoading, isUserLoading, isLoaderShowing])\n\n  return (\n    <ConfigProvider isWebView={true}>\n      <AppRoot>\n        <View\n          popout={popout}\n          modal={<ActionsModal/>}\n          activePanel={activePanel}\n          history={history}\n        >\n          <MainPanel id={MAIN_PANEL} />\n          <SettingsPanel id={SETTINGS_PANEL} setPopout={handleSetPopout}/>\n          <SearchPanel id={SEARCH_PANEL} />\n          <SchedulePanel id={SCHEDULE_PANEL} setPopout={handleSetPopout}/>\n        </View>\n      </AppRoot>\n    </ConfigProvider>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport bridge from '@vkontakte/vk-bridge'\nimport '@vkontakte/vkui/dist/vkui.css'\n\nimport store from './store'\nimport { Provider } from 'react-redux'\n\nimport './index.sass';\n\nimport App from './App';\n\nbridge.send('VKWebAppInit')\nbridge.subscribe(e => {\n  if(e.detail.type === 'VKWebAppUpdateConfig')\n    document.body.setAttribute('scheme', e.detail.data.scheme)\n})\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}