{"version":3,"sources":["constants.ts","store/slices/navigation.ts","api/schedule.ts","api/config.ts","api/user.ts","api/index.ts","store/slices/schedule.ts","utils/index.ts","store/slices/config.ts","store/slices/user.ts","store/rootReducer.ts","store/index.ts","components/LessonRow/index.tsx","components/ScheduleBody/index.tsx","assets/start.gif","assets/pause.gif","assets/end.gif","components/Loader/index.tsx","panels/main/index.tsx","panels/schedule/index.tsx","panels/search/index.tsx","panels/settings/index.tsx","components/AppActions/index.tsx","components/ActionsModal/index.tsx","App.tsx","index.tsx"],"names":["BASE_URL","process","GROUP_ID","SCHEDULE_PANEL","MAIN_PANEL","SEARCH_PANEL","SETTINGS_PANEL","initialState","activePanel","history","activeModal","navigationSlice","createSlice","name","reducers","setActivePanel","state","action","payload","setActiveModal","actions","schedule","getSchedule","a","univer","tail","url","join","fetch","res","json","searchSchedule","q","config","getUniverList","getUser","id","user","updateUserUniver","univerId","options","method","headers","body","JSON","stringify","deleteUserUniver","api","updateUserSchedule","scheduleId","deleteUserSchedule","requestSchedule","createAsyncThunk","thunkAPI","href","getState","scheduleHistory","userSchedule","find","record","isUniq","data","requestSearchSchedule","scheduleSlice","isLoading","error","lessonStats","scheduleHistoryHrefs","isSearchLoading","searchError","searchedSchedules","scheduleHistoryBack","pop","currentScheduleHref","length","currentSchedule","clearScheduleHistory","clearSearchedSchedules","setLessonStats","extraReducers","builder","addCase","pending","rejected","message","meta","arg","fulfilled","push","getLessonsInDay","lessons","day","week","filter","lesson","inDay","inWeek","getFromWhomsList","lessonsMap","forEach","fromWhoms","fromWhom","Object","values","isCurrentWeek","now","Date","getTime","range","start","end","requestConfigUnivers","configSlice","univerList","currentUniver","passDays","countDays","toEndDays","toEndPercent","currentDay","currentWeek","setCurrentUniver","dayId","getDay","getCurrentDay","weeks","weekType","getCurrentWeek","startDate","endDate","DAYS","Math","ceil","getDaysStats","setConfig","requestGetUser","requestUpdateUserUniver","requestDeleteUserUniver","requestUpdateUserSchedule","requestDeleteUserSchedule","userSlice","isLoaderShowing","isUniverLoading","isScheduleLoading","userData","setUserData","setIsLoaderShowing","rootReducer","combineReducers","navigation","store","configureStore","reducer","LessonRow","current","onGoToSchedule","getStats","className","time","map","i","type","typeTitle","place","onClick","subject","group","title","ScheduleBody","today","onGetStats","icon","style","color","j","lessonTime","timeString","split","s","startHours","startMinutes","setHours","endHours","endMinutes","isCurrentLesson","isFirstLoading","Loader","isEnd","onHide","React","useState","src","setSrc","isEndStartAnimation","setIsEndStartAnimation","useEffect","window","setTimeout","pause","alt","MainPanel","content","dispatch","useDispatch","useSelector","isUserLoading","userError","isConfigLoading","configError","goToSearchSchedule","goToSettings","goToSchedule","code","fromWhomsIsOpen","setFromWhomsIsOpen","weeksIsOpen","setWeeksIsOpen","timeLessonsIsOpen","setTimeLessonsIsOpen","userMessage","configMessage","stretched","univerContent","scheduleContent","univerInfoContent","subtitle","toLocaleDateString","margin","background","value","after","width","height","lessonsToday","todayString","paddingTop","disabled","fill","padding","weekEnd","rangeString","weekPassed","description","textDecoration","opacity","timeLessons","separator","left","WEEKS","SchedulePanel","their","my","setPopout","activeDay","setActiveDay","activeWeek","setActiveWeek","isDiffShowing","setIsDiffShowing","toggleDiffShowing","goToMain","saveSchedule","deleteSchedule","cardRef","useRef","ls","theirLesson","myLesson","b","dayEqual","lessonNumEqual","weekEqual","groupEqual","isIntersection","ref","slideIndex","onChange","d","_","stats","lec","pass","total","pr","lab","thisLessons","thisLessons0","l","thisLessons1","thisLessons2","weeks0Count","w","weeks1Count","nowMs","currentWeekIdx","findIndex","passedWeeks","slice","weeksPassed0Count","weeksPassed1Count","n","typeLesson","getStatsForLesson","marginTop","selected","before","marginRight","toggleScheduleItem","autoclose","popout","onClose","iosCloseItem","mode","transform","baseUrl","SearchPanel","setQ","searchRef","focus","debQ","setDebQ","timeout","clearTimeout","textAlign","vertical","filled","getRef","placeholder","e","target","SettingsPanel","userUniverId","setUniver","header","top","bottom","size","AppActions","closeModal","platform","usePlatform","bridge","send","then","console","log","catch","group_id","link","ActionsModal","subheader","right","level","weight","startDateStartOfWeek","entries","App","document","setAttribute","location","search","reduce","queryParam","key","handleSetPopout","initApp","addToHomeScreenInfo","is_feature_supported","is_added_to_home_screen","is_favorite","is_member","openModal","isWebView","modal","subscribe","detail","scheme","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.103026cc.chunk.js","sourcesContent":["export const BASE_URL = process.env.REACT_APP_BASE_URL\n\nexport const GROUP_ID = 198278031\n\nexport const SCHEDULE_PANEL = 'schedule'\nexport const MAIN_PANEL = 'main'\nexport const SEARCH_PANEL = 'search'\nexport const SETTINGS_PANEL = 'settings'","import { createSlice } from \"@reduxjs/toolkit\";\nimport { MAIN_PANEL } from \"../../constants\";\nimport { PanelType } from \"../../types\";\n\ntype NavigationState = {\n  activePanel: PanelType\n  history: PanelType[]\n  activeModal: string | null\n}\n\nconst initialState: NavigationState = {\n  activePanel: MAIN_PANEL,\n  history: [MAIN_PANEL],\n  activeModal: null,\n}\n\nconst navigationSlice = createSlice({\n  name: 'navigation',\n  initialState,\n  reducers: {\n    setActivePanel(state, action)\n    {\n      state.activePanel = action.payload\n    },\n    setActiveModal(state, action)\n    {\n      state.activeModal = action.payload\n    }\n  },\n})\n\nexport const { setActivePanel, setActiveModal } = navigationSlice.actions\nexport default navigationSlice.reducer","import { BASE_URL } from \"../constants\"\nimport { HrefTitle, Schedule } from \"../types\"\n\nconst getSchedule = async ({\n  univer,\n  tail,\n} : {\n  univer: string,\n  tail: string,\n}): Promise<Schedule> => {\n  const url = [ BASE_URL, 'schedule', univer, tail, ].join('/')\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst searchSchedule = async ({\n  univer,\n  q,\n} : {\n  univer: string,\n  q: string,\n}) : Promise<HrefTitle[]> => {\n  const url = [ BASE_URL, 'schedule/search', univer, q, ].join('/')\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst schedule = {\n  getSchedule,\n  searchSchedule,\n}\n\nexport default schedule","import { BASE_URL } from \"../constants\"\nimport { Univer } from \"../types\"\n\nconst getUniverList = async (): Promise<Univer[]> => {\n  const url = [ BASE_URL, 'univers'].join('/')\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst config = {\n  getUniverList,\n}\n\nexport default config","import { BASE_URL } from \"../constants\"\nimport { User } from \"../types\"\n\nconst getUser = async (id: number): Promise<User> => {\n  const url = [ BASE_URL, 'users', id].join('/')\n  const res = await fetch(url)\n  const user = await res.json()\n\n  return user  \n}\n\nconst updateUserUniver = async ({\n  id, univerId,\n}: { id: number, univerId: number }): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'univer'].join('/')\n  const options = {\n    method: 'PUT',\n    headers: { 'Content-Type': 'application/json;charset=utf-8' },\n    body: JSON.stringify({univerId}),\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst deleteUserUniver = async (id: number): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'univer'].join('/')\n  const options = {\n    method: 'DELETE',\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst updateUserSchedule = async ({\n  id, scheduleId,\n}: { id: number, scheduleId: string }): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'schedule'].join('/')\n  const options = {\n    method: 'PUT',\n    headers: { 'Content-Type': 'application/json;charset=utf-8' },\n    body: JSON.stringify({scheduleId}),\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst deleteUserSchedule = async (id: number): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'schedule'].join('/')\n  const options = {\n    method: 'DELETE',\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst user = {\n  getUser,\n  updateUserSchedule,\n  deleteUserSchedule,\n  updateUserUniver,\n  deleteUserUniver,\n}\n\nexport default user","import schedule from './schedule'\nimport config from './config'\nimport user from './user'\n\nconst api = {\n  schedule,\n  config,\n  user,\n}\n\nexport default api","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\"\nimport { HrefTitle, Schedule, Stats } from \"../../types\"\nimport api from \"../../api\"\nimport { RootState } from \"../rootReducer\"\n\ntype ScheduleHistoryRecord = {\n    id: string,\n    data: Schedule\n  }\n\ntype ScheduleState = {\n  isLoading: boolean\n  error: {\n    message: string,\n    payload: any,\n  } | null\n  schedule: Schedule | null\n  lessonStats: {\n    title: string\n    stats: Stats\n    fromWhoms: HrefTitle[]\n  } | null\n  scheduleHistory: ScheduleHistoryRecord[]\n  scheduleHistoryHrefs: string[]\n\n  q: string\n  isSearchLoading: boolean\n  searchError: {\n    message: string,\n    payload: any,\n  } | null\n  searchedSchedules: HrefTitle[]\n}\n\nexport const requestSchedule = createAsyncThunk(\n  'schedule/request',\n  async ({ univer, tail: href }: {\n    univer: string,\n    tail: string,\n  }, thunkAPI): Promise<{record: ScheduleHistoryRecord, isUniq: boolean }> => {\n    const state = (thunkAPI.getState() as RootState)\n    const scheduleHistory = state.schedule.scheduleHistory\n    const userSchedule = state.user.user?.schedule\n    \n    const schedule = scheduleHistory.find(schedule => schedule.id === href)\n    if(schedule)\n    {\n      return { record: schedule, isUniq: false}\n    }\n    else if(userSchedule && userSchedule.href === href)\n    {\n      return {\n        record: { id: href, data: userSchedule },\n        isUniq: true,\n      }\n    }\n    else\n    {\n      const schedule = await api.schedule.getSchedule({ univer, tail: href })\n      return {\n        record: { id: href, data: schedule },\n        isUniq: true,\n      }\n    }\n  }\n)\n\nexport const requestSearchSchedule = createAsyncThunk(\n  'schedule/search/request',\n  api.schedule.searchSchedule\n)\n\nconst initialState: ScheduleState = {\n  isLoading: false,\n  error: null,\n  schedule: null,\n  lessonStats: null,\n  scheduleHistory: [],\n  scheduleHistoryHrefs: [],\n\n  q: '',\n  isSearchLoading: false,\n  searchError: null,\n  searchedSchedules: [],\n}\n\nconst scheduleSlice = createSlice({\n  name: 'schedule',\n  initialState,\n  reducers: {\n    scheduleHistoryBack(state)\n    {\n      state.scheduleHistoryHrefs.pop()\n      const currentScheduleHref = state.scheduleHistoryHrefs[state.scheduleHistoryHrefs.length - 1]\n      if(currentScheduleHref)\n      {\n        const currentSchedule = state.scheduleHistory.find(schedule => schedule.id === currentScheduleHref)!\n        state.schedule = currentSchedule.data\n      }\n      else\n      {\n        state.schedule = null\n      }\n    },\n    clearScheduleHistory(state)\n    {\n      state.scheduleHistoryHrefs = []\n      state.schedule = null\n    },\n    clearSearchedSchedules(state)\n    {\n      state.searchedSchedules = []\n    },\n    setLessonStats(state,action)\n    {\n      state.lessonStats = action.payload\n    },\n  },\n  extraReducers(builder)\n  {\n    builder\n      .addCase(requestSchedule.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(requestSchedule.rejected, (state,action) => {\n        state.isLoading = false\n        state.error = {\n          message: 'Ошибка при запросе расписания :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestSchedule.fulfilled, (state,action) => {\n        state.isLoading = false\n        state.error = null\n\n        const { isUniq, record } = action.payload\n\n        if(isUniq)\n        {\n          state.scheduleHistory.push(record)\n        }\n\n        state.scheduleHistoryHrefs.push(record.id)\n        state.schedule = record.data\n      })\n\n      .addCase(requestSearchSchedule.pending, (state) => {\n        state.isSearchLoading = true\n        state.searchError = null\n      })\n      .addCase(requestSearchSchedule.rejected, (state,action) => {\n        state.isSearchLoading = false\n        state.searchError = {\n          message: 'Ошибка при запросе расписания :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestSearchSchedule.fulfilled, (state,action) => {\n        state.isSearchLoading = false\n        state.searchError = null\n        state.searchedSchedules = action.payload\n      })\n  },\n})\n\nexport const {\n  scheduleHistoryBack,\n  clearScheduleHistory,\n  clearSearchedSchedules,\n  setLessonStats,\n} = scheduleSlice.actions\nexport default scheduleSlice.reducer","import { DayRange, HrefTitle, Lesson, Stats, Univer, WeekRange, WeekTypeRange } from \"../types\";\n\nexport const getLessonsInDay = (\n  lessons: Lesson[],\n  day: DayRange,\n  week: WeekRange\n): Lesson[] => {\n  return lessons.filter(lesson => {\n    const inDay = lesson.day === day\n    const inWeek = lesson.week === week || lesson.week === 2\n\n    return inDay && inWeek\n  })\n}\n\nexport const getFromWhomsList = (lessons: Lesson[]): HrefTitle[] => {\n  const lessonsMap: {\n    [key: string]: HrefTitle\n  } = {}\n  lessons.forEach(lesson => {\n    lesson.fromWhoms.forEach(fromWhom => {\n      if(!lessonsMap[fromWhom.href])\n      {\n        lessonsMap[fromWhom.href] = fromWhom\n      }\n    })\n  })\n\n  return Object.values(lessonsMap)\n}\n\nexport const getCurrentDay = (): DayRange => {\n  const dayId = new Date().getDay()\n\n  return (dayId > 0 ? dayId - 1 : dayId) as DayRange\n}\n\nexport const getDaysStats = (\n  startDate: number,\n  endDate: number,\n): {\n  passDays: number,\n  countDays: number,\n  toEndDays: number,\n} => {\n  const DAYS = 1000 * 60 * 60 * 24\n  const now = new Date().getTime()\n  const start = new Date(startDate).getTime()\n  const end = new Date(endDate).getTime()\n\n  const countDays = Math.ceil((end - start) / DAYS)\n  const passDays = Math.ceil((now - start) / DAYS)\n  const toEndDays = Math.ceil((end - now) / DAYS)\n\n  return { passDays, countDays, toEndDays }\n}\n\nexport const isPassWeek = (weekEnd: number): boolean => {\n  const now = new Date().getTime()\n  return now > weekEnd\n}\n\nexport const isCurrentWeek = (week: WeekTypeRange): boolean => {\n  const now = new Date().getTime()\n  const [start,end] = week.range\n  return start <= now && now <= end\n}\n\nexport const getCurrentWeek = (weeks: WeekTypeRange[]): WeekRange => {\n  const currentWeek = weeks.find(week => isCurrentWeek(week))\n\n  if(!currentWeek) return 0\n\n  return currentWeek.weekType\n}\n\nexport const getDiff = (their: Lesson[], my: Lesson[]): Lesson[] => {\n  const isIntersection = (a: Lesson, b: Lesson) => {\n    const dayEqual = a.day === b.day\n    const lessonNumEqual = a.lesson === b.lesson\n    const weekEqual = a.week === b.week || a.week === 2 || b.week === 2\n    const groupEqual = a.group === b.group || a.group === 2 || b.group === 2\n\n    return dayEqual && lessonNumEqual && weekEqual && groupEqual\n  }\n\n  return their.filter(theirLesson => !my.find(myLesson => isIntersection(theirLesson, myLesson)))\n}\n\nexport const getStatsForLesson = ({\n  lesson,\n  lessons,\n  currentUniver,\n}: {\n  lesson: Lesson,\n  lessons: Lesson[],\n  currentUniver: Univer\n}): { stats: Stats, fromWhoms: HrefTitle[] } => {\n  const { subject, time } = lesson\n  const { weeks } = currentUniver\n\n  const stats: Stats = {\n    lec: {pass:0,total:0},\n    pr: {pass:0,total:0},\n    lab: {pass:0,total:0},\n  }\n\n  const thisLessons = lessons.filter(lesson => lesson.subject === subject)\n  const thisLessons0 = thisLessons.filter(l => l.week === 0)\n  const thisLessons1 = thisLessons.filter(l => l.week === 1)\n  const thisLessons2 = thisLessons.filter(l => l.week === 2)\n\n  const weeks0Count = weeks.filter(w => w.weekType === 0).length\n  const weeks1Count = weeks.filter(w => w.weekType === 1).length\n\n  stats.lec.total =\n    weeks0Count * thisLessons0.filter(l => l.type === 0).length +\n    weeks1Count * thisLessons1.filter(l => l.type === 0).length +\n    (weeks0Count + weeks1Count) * thisLessons2.filter(l => l.type === 0).length\n\n  stats.pr.total =\n    weeks0Count * thisLessons0.filter(l => l.type === 1).length +\n    weeks1Count * thisLessons1.filter(l => l.type === 1).length +\n    (weeks0Count + weeks1Count) * thisLessons2.filter(l => l.type === 1).length\n\n  stats.lab.total =\n    weeks0Count * thisLessons0.filter(l => l.type === 2).length +\n    weeks1Count * thisLessons1.filter(l => l.type === 2).length +\n    (weeks0Count + weeks1Count) * thisLessons2.filter(l => l.type === 2).length\n\n\n  const now = new Date()\n  const nowMs = now.getTime()\n\n  const currentWeekIdx = weeks.findIndex(w => {\n    const [start, end] = w.range\n    return start <= nowMs && nowMs <= end\n  })\n  const passedWeeks = weeks.slice(0, currentWeekIdx)\n\n  const weeksPassed0Count = passedWeeks.filter(w => w.weekType === 0).length\n  const weeksPassed1Count = passedWeeks.filter(w => w.weekType === 1).length\n\n  stats.lec.pass =\n    weeksPassed0Count * thisLessons0.filter(l => l.type === 0).length +\n    weeksPassed1Count * thisLessons1.filter(l => l.type === 0).length +\n    (weeks0Count + weeksPassed1Count) * thisLessons2.filter(l => l.type === 0).length\n\n  stats.pr.pass =\n    weeksPassed0Count * thisLessons0.filter(l => l.type === 1).length +\n    weeksPassed1Count * thisLessons1.filter(l => l.type === 1).length +\n    (weeksPassed0Count + weeksPassed1Count) * thisLessons2.filter(l => l.type === 1).length\n\n  stats.lab.pass =\n    weeksPassed0Count * thisLessons0.filter(l => l.type === 2).length +\n    weeksPassed1Count * thisLessons1.filter(l => l.type === 2).length +\n    (weeksPassed0Count + weeksPassed1Count) * thisLessons2.filter(l => l.type === 2).length\n\n\n  const currentWeek = weeks[currentWeekIdx]\n  if(currentWeek)\n  {\n    const d = now.getDay()\n    const currentDay = d === 0 ? 6 : d - 1\n    \n    const thisLessonsEarlier = thisLessons\n      .filter(lesson => {\n        if(lesson.week !== currentWeek.weekType && lesson.week !== 2) return false\n        if(lesson.day < currentDay) return true\n        if(lesson.day === currentDay)\n        {\n          const n = now.getTime()\n          const [start, end] = time\n  \n          const [startHours, startMinutes] = start.split(':').map(s=>+s)\n          const s = new Date(n).setHours(startHours, startMinutes)\n          if(s > n) return false\n  \n          const [endHours, endMinutes] = end.split(':').map(s=>+s)\n          const e = new Date(n).setHours(endHours, endMinutes)\n          if(n > e) return false\n  \n          return true\n        }\n        return false\n      })\n  \n    thisLessonsEarlier.forEach(lesson => {\n      const typeLesson = (['lec','pr','lab'][lesson.type]) as keyof Stats\n      stats[typeLesson].pass++\n    })\n  }\n\n  const fromWhoms = getFromWhomsList(thisLessons)\n\n  return { stats, fromWhoms }\n}\n\nexport const isCurrentLesson = (lessonTime: number[][]): boolean => {\n  const TEN_MINUTES = 10 * 60 * 1000\n  const now = new Date().getTime()\n\n  const [start, end] = lessonTime\n  \n  const [startHours, startMinutes] = start\n  const lessonStart = new Date().setHours(startHours, startMinutes) - TEN_MINUTES\n  if(lessonStart > now) return false\n\n  const [endHours, endMinutes] = end\n  const lessonEnd = new Date().setHours(endHours, endMinutes)\n  if(lessonEnd < now) return false\n\n  return true\n}","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport api from \"../../api\";\nimport { DayRange, Univer, WeekRange, WeekTypeRange } from \"../../types\";\nimport { getCurrentDay, getCurrentWeek, getDaysStats } from \"../../utils\";\n\ntype ConfigState = {\n  isLoading: boolean\n  error: {\n    message: string\n    payload: any\n  } | null\n  univerList: Univer[]\n  currentUniver: Univer | null\n  \n  passDays: number\n  countDays: number\n  toEndDays: number\n  toEndPercent: number\n  currentDay: DayRange\n  currentWeek: WeekRange\n  config: { [key:string]: boolean }\n}\n\nconst initialState: ConfigState = {\n  isLoading: false,\n  error: null,\n  univerList: [],\n  currentUniver: null,\n\n  passDays: 0,\n  countDays: 0,\n  toEndDays: 0,\n  toEndPercent: 0,\n  currentDay: 0,\n  currentWeek: 0,\n  config: {}\n}\n\nexport const requestConfigUnivers = createAsyncThunk(\n  'config/univers',\n  api.config.getUniverList\n)\n\nconst configSlice = createSlice({\n  name: 'config',\n  initialState,\n  reducers: {\n    setCurrentUniver(state, action)\n    {\n      let currentUniver = action.payload\n      if(!currentUniver)\n      {\n        state.currentUniver = null\n        return\n      }\n      \n      currentUniver = state.univerList.find(univer => univer.id === currentUniver.id)\n      state.currentUniver = currentUniver\n      state.currentDay = getCurrentDay()\n      state.currentWeek = getCurrentWeek(currentUniver.weeks)\n\n      const { passDays, countDays, toEndDays } = getDaysStats(\n        currentUniver.startDate,\n        currentUniver.endDate,\n      )\n      state.countDays = countDays\n      state.passDays = passDays\n      state.toEndDays = toEndDays\n      state.toEndPercent = passDays / countDays * 100\n    },\n    setConfig(state,action)\n    {\n      state.config = action.payload\n    },\n  },\n  extraReducers(builder)\n  {\n    builder\n      .addCase(requestConfigUnivers.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(requestConfigUnivers.rejected, (state,action) => {\n        state.isLoading = false\n        state.error = {\n          message: 'Ошибка при запросе университетов :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestConfigUnivers.fulfilled, (state,action) => {\n        state.isLoading = false\n        state.error = null\n        state.univerList = action.payload\n      })\n  },\n})\n\nexport const { setCurrentUniver, setConfig } = configSlice.actions\nexport default configSlice.reducer","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport api from \"../../api\";\nimport { User, UserData } from \"../../types\";\n\ntype ConfigState = {\n  isLoading: boolean\n  isUniverLoading: boolean\n  isScheduleLoading: boolean\n  error: {\n    message: string\n    payload: any\n  } | null\n  user: User | null\n  userData: UserData | null\n  isLoaderShowing: boolean\n}\n\nconst initialState: ConfigState = {\n  isLoading: false,\n  isLoaderShowing: true,\n  isUniverLoading: false,\n  isScheduleLoading: false,\n  error: null,\n  user: null,\n  userData: null,\n}\n\nexport const requestGetUser = createAsyncThunk(\n  'user/request',\n  api.user.getUser\n)\n\nexport const requestUpdateUserUniver = createAsyncThunk(\n  'user/update/univer',\n  api.user.updateUserUniver\n)\n\nexport const requestDeleteUserUniver = createAsyncThunk(\n  'user/delete/univer',\n  api.user.deleteUserUniver\n)\n\nexport const requestUpdateUserSchedule = createAsyncThunk(\n  'user/update/schedule',\n  api.user.updateUserSchedule\n)\n\nexport const requestDeleteUserSchedule = createAsyncThunk(\n  'user/delete/schedule',\n  api.user.deleteUserSchedule\n)\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setUserData(state, action)\n    {\n      state.userData = action.payload\n    },\n    setIsLoaderShowing(state, action)\n    {\n      state.isLoaderShowing = action.payload\n    },\n  },\n  extraReducers(builder)\n  {\n    builder\n      .addCase(requestGetUser.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(requestGetUser.rejected, (state,action) => {\n        state.isLoading = false\n        state.error = {\n          message: 'Произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestGetUser.fulfilled, (state,action) => {\n        state.isLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestUpdateUserUniver.pending, (state) => {\n        state.isUniverLoading = true\n        state.error = null\n      })\n      .addCase(requestUpdateUserUniver.rejected, (state,action) => {\n        state.isUniverLoading = false\n        state.error = {\n          message: 'При обновлении университета произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestUpdateUserUniver.fulfilled, (state,action) => {\n        state.isUniverLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestDeleteUserUniver.pending, (state) => {\n        state.isUniverLoading = true\n        state.error = null\n      })\n      .addCase(requestDeleteUserUniver.rejected, (state,action) => {\n        state.isUniverLoading = false\n        state.error = {\n          message: 'При обновлении университета произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestDeleteUserUniver.fulfilled, (state,action) => {\n        state.isUniverLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestUpdateUserSchedule.pending, (state) => {\n        state.isScheduleLoading = true\n        state.error = null\n      })\n      .addCase(requestUpdateUserSchedule.rejected, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = {\n          message: 'При обновлении расписания произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestUpdateUserSchedule.fulfilled, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestDeleteUserSchedule.pending, (state) => {\n        state.isScheduleLoading = true\n        state.error = null\n      })\n      .addCase(requestDeleteUserSchedule.rejected, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = {\n          message: 'При обновлении расписания произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestDeleteUserSchedule.fulfilled, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n  },\n})\n\nexport const { setUserData, setIsLoaderShowing } = userSlice.actions\nexport default userSlice.reducer","import { combineReducers } from \"@reduxjs/toolkit\"\n\nimport navigation from './slices/navigation'\nimport schedule from './slices/schedule'\nimport config from './slices/config'\nimport user from './slices/user'\n\nconst rootReducer = combineReducers({\n  navigation,\n  schedule,\n  config,\n  user,\n})\n\nexport type RootState = ReturnType<typeof rootReducer>\nexport default rootReducer","import { configureStore } from \"@reduxjs/toolkit\"\nimport { useDispatch } from \"react-redux\"\n\nimport rootReducer from './rootReducer'\n\nconst store = configureStore({ reducer : rootReducer })\n\nexport const useAppDispatch = () => useDispatch<typeof store.dispatch>()\nexport default store","import React from 'react'\nimport { Lesson } from '../../types'\nimport './LessonRow.sass'\n\ntype LessonRowProps = {\n  current: boolean\n  lesson: Lesson\n  onGoToSchedule: (href: string) => void\n  getStats?: () => void\n}\n\nconst LessonRow: React.FC<LessonRowProps> = ({\n  current,\n  lesson,\n  onGoToSchedule,\n  getStats,\n}) => {\n  return (\n    <div className={`lesson-row${current ? ' lesson-row--current' : ''}`}>\n      <div className=\"lesson-row__time\">\n        {lesson.time.map((time, i) => {\n          return <div\n            key={time}\n            className={`lesson-row__time-item lesson-row__time-item--${i === 0 ? 'start' : 'end'}`}\n          >{time}</div>\n        })}\n      </div>\n      <div className={`lesson-row__body lesson-row__body--${lesson.type}`}>\n        {lesson.typeTitle &&\n          <div className=\"lesson-row__place\">\n            <span className={`lesson-row__type-title--${lesson.type}`}>\n              {lesson.typeTitle}\n            </span>\n            {lesson.place}\n          </div>\n        }\n        <div onClick={() => getStats && getStats()} className=\"lesson-row__subject\">\n          {lesson.subject} {lesson.group !== 2 && `(${lesson.group+1}гр.)`}\n        </div>\n        <div className=\"lesson-row__fromWhoms\">\n          {lesson.fromWhoms.map(fromWhom => {\n            return <div\n              key={fromWhom.href}\n              className={`lesson-row__fromWhoms-item${!fromWhom.href ? '' : ' link'}`}\n              onClick={() => fromWhom.href && onGoToSchedule(fromWhom.href)}\n            >{fromWhom.title}</div>\n          })}\n        </div>\n      </div>\n      <div className=\"lesson-row__after\"></div>\n    </div>\n  )\n}\n\nexport default LessonRow","import React from 'react'\nimport { Icon56GhostOutline } from '@vkontakte/icons'\nimport { Card, Placeholder } from '@vkontakte/vkui'\nimport { Lesson } from '../../types'\nimport LessonRow from '../LessonRow'\nimport { isCurrentLesson } from '../../utils'\n\ntype ScheduleBodyProps = {\n  today: boolean\n  lessons: Lesson[]\n  onGoToSchedule: (href: string) => void\n  onGetStats?: (lesson: Lesson) => void\n}\n\nconst ScheduleBody: React.FC<ScheduleBodyProps> = ({\n  today,\n  lessons,\n  onGoToSchedule,\n  onGetStats,\n}) => {\n  return (\n    <Card className=\"schedule__body\">\n      {lessons.length === 0\n        ? <Placeholder\n            className=\"schedule__empty-placeholder\"\n            icon={<Icon56GhostOutline style={{color:\"teal\"}}/>}\n          >Ничего нет</Placeholder>\n        : lessons.map((lesson, j) => {\n            const lessonTime = lesson.time.map(timeString => timeString.split(':').map(s=>+s))\n            const current = today && isCurrentLesson(lessonTime)\n\n            return <LessonRow\n              key={j}\n              lesson={lesson}\n              onGoToSchedule={onGoToSchedule}\n              current={current}\n              getStats={() => onGetStats && onGetStats(lesson)}\n            />\n          })}\n    </Card>\n  )\n}\n\nexport default ScheduleBody","export default __webpack_public_path__ + \"static/media/start.56ca684e.gif\";","export default __webpack_public_path__ + \"static/media/pause.2c6daeb9.gif\";","export default __webpack_public_path__ + \"static/media/end.f4254f8f.gif\";","import React from 'react'\nimport start from '../../assets/start.gif'\nimport pause from '../../assets/pause.gif'\nimport end from '../../assets/end.gif'\nimport './Loader.sass'\n\ntype LoaderProps = {\n  isEnd: boolean\n  onHide: () => void\n}\n\nlet isFirstLoading = true\nconst Loader: React.FC<LoaderProps> = ({\n  isEnd,\n  onHide,\n}) => {\n  const [src, setSrc] = React.useState(start)\n  const [isEndStartAnimation, setIsEndStartAnimation] = React.useState(false)\n\n  React.useEffect(() => {\n    if(isEnd && !isFirstLoading && isEndStartAnimation)\n    {\n      setSrc(end)\n      window.setTimeout(onHide, 1550)\n    }\n  },[isEnd, isEndStartAnimation])\n\n  React.useEffect(() => {\n    isFirstLoading = false\n    window.setTimeout(() => {\n      if(!isEnd) setSrc(pause)\n      setIsEndStartAnimation(true)\n    },1760)\n  },[])\n\n  return (\n    <div className=\"loader-wrapper\">\n      <div className=\"loader-img-wrapper\">\n        <img src={src} alt=\"oops...\"/>\n      </div>\n    </div>\n  )\n}\n\nexport default Loader","import React from 'react'\nimport {\n  Avatar,\n  Button,\n  Card,\n  Cell,\n  CellButton,\n  Div,\n  Header,\n  IconButton,\n  Panel,\n  PanelHeader,\n  Placeholder,\n  Progress,\n  Separator,\n  Spinner,\n} from '@vkontakte/vkui'\nimport {\n  Icon28Search,\n  Icon28SettingsOutline,\n  Icon28ChevronDownOutline,\n  Icon28ChevronUpOutline,\n  Icon28DeleteOutline,\n  Icon28AddOutline,\n  Icon28EducationOutline,\n  Icon28ArrowUpOutline,\n  Icon28ArrowDownOutline,\n  \n} from '@vkontakte/icons';\nimport { PanelProps } from '../../types'\nimport { useSelector } from 'react-redux';\nimport { setActivePanel } from '../../store/slices/navigation';\nimport { SCHEDULE_PANEL, SEARCH_PANEL, SETTINGS_PANEL } from '../../constants';\nimport { requestDeleteUserSchedule, requestGetUser, setIsLoaderShowing } from '../../store/slices/user';\nimport { requestConfigUnivers } from '../../store/slices/config';\nimport { RootState } from '../../store/rootReducer';\nimport { getFromWhomsList, getLessonsInDay, isCurrentWeek, isPassWeek } from '../../utils';\nimport { requestSchedule } from '../../store/slices/schedule';\nimport ScheduleBody from '../../components/ScheduleBody';\nimport { useAppDispatch } from '../../store';\nimport Qoute from '../../components/Qoute';\nimport Loader from '../../components/Loader';\n\nconst MainPanel: React.FC<PanelProps> = ({\n  id,\n}) => {\n  const dispatch = useAppDispatch()\n  const {\n    isLoaderShowing,\n    user,\n    isLoading: isUserLoading,\n    error: userError,\n  } = useSelector((s: RootState) => s.user)\n  const {\n    currentUniver,\n    currentWeek,\n    currentDay,\n    toEndDays,\n    toEndPercent,\n    isLoading: isConfigLoading,\n    error: configError,\n  } = useSelector((s: RootState) => s.config)\n\n  const goToSearchSchedule = () => {\n    dispatch(setActivePanel(SEARCH_PANEL))\n  }\n\n  const goToSettings = () => {\n    dispatch(setActivePanel(SETTINGS_PANEL))\n  }\n\n  const goToSchedule = (tail: string) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail,\n    }))\n    dispatch(setActivePanel(SCHEDULE_PANEL))\n  }\n\n  const deleteSchedule = () => {\n    dispatch(requestDeleteUserSchedule(user!.id))\n  }\n\n  const tryAgain = () => {\n    if(userError && user)\n    {\n      dispatch(requestGetUser(user.id))\n    }\n    if(configError)\n    {\n      dispatch(requestConfigUnivers())\n    }\n  }\n\n  const [fromWhomsIsOpen, setFromWhomsIsOpen] = React.useState(false)\n  const toggleFromWhoms = () => {\n    setFromWhomsIsOpen(!fromWhomsIsOpen)\n  }\n\n  const [weeksIsOpen, setWeeksIsOpen] = React.useState(false)\n  const toggleWeeks = () => {\n    setWeeksIsOpen(!weeksIsOpen)\n  }\n\n  const [timeLessonsIsOpen, setTimeLessonsIsOpen] = React.useState(false)\n  const toggleTimeLessons = () => {\n    setTimeLessonsIsOpen(!timeLessonsIsOpen)\n  }\n  \n  const hideLoader = () => {\n    dispatch(setIsLoaderShowing(false))\n  }\n\n  let content\n  if(isUserLoading || isConfigLoading || isLoaderShowing)\n  {\n    content = <Loader isEnd={!isUserLoading && !isConfigLoading} onHide={hideLoader} />\n  }\n  else if(userError || configError)\n  {\n    const userMessage = userError && userError.message\n    const configMessage = configError && configError.message\n\n    content = (\n      <Placeholder\n        stretched\n        action={\n          <Button onClick={tryAgain}>Повторить</Button>\n        }\n      >{userMessage}<br/>{configMessage}</Placeholder>\n    )\n  }\n  else if(user)\n  {\n    let univerContent\n    if(user.univer && currentUniver)\n    {\n      univerContent = (<>\n        {/* <Qoute photo=\"\" name=\"Величайший\">Силен не тот, а этот</Qoute> */}\n        {/* <Separator/> */}\n\n        <Div>\n          <Card>\n            <Header\n              subtitle={`До конца семестра ${toEndDays} дн. (${new Date(currentUniver.endDate).toLocaleDateString()})`}\n            >{currentWeek ? 'Числитель' : 'Знаменатель'}</Header>\n            <Progress\n              style={{margin: '0px 12px', background: 'gray'}}\n              value={toEndPercent}\n            />\n            <br />\n            <Separator />\n\n            <Cell\n              after={<Icon28Search/>}\n              onClick={goToSearchSchedule}\n            >Искать расписание</Cell>\n          </Card>\n        </Div>\n      </>)\n    }\n\n    if(!user.univer)\n    {\n      univerContent = (\n        <Placeholder\n          stretched\n          icon={<Icon28EducationOutline width={64} height={64}/>}\n          action={<Button onClick={goToSettings}>Выбрать</Button>}\n        >Выберите университет, чтобы пользоваться приложением</Placeholder>\n      )\n    }\n\n    let scheduleContent\n    if(user.schedule)\n    {\n      const lessonsToday = getLessonsInDay(user.schedule.lessons, currentDay, currentWeek)\n      const DAYS = ['Понедельник','Вторник','Среда','Четверг','Пятница','Суббота']\n      const todayString = `${DAYS[currentDay]}, ${new Date().toLocaleDateString()}`\n\n      scheduleContent = (<>\n        <Div style={{paddingTop:0}}>\n          <Card>\n            <Cell\n              disabled\n              after={\n                <IconButton>\n                  <Icon28DeleteOutline fill=\"tomato\" onClick={deleteSchedule}/>\n                </IconButton>\n              }\n            >{user.schedule.title}</Cell>\n            <Separator/>\n\n            <Header subtitle={todayString}>\n              Расписание на сегодня\n            </Header>\n            <div style={{padding:'0px 8px'}}>\n              <ScheduleBody today lessons={lessonsToday} onGoToSchedule={goToSchedule} />\n            </div>\n            <br/><Separator/>\n            \n            <CellButton\n              onClick={() => goToSchedule(user.schedule!.href)}\n            >Полное расписание</CellButton>\n          </Card>\n        </Div>\n        <Div style={{paddingTop:0}}>\n          <Card>\n            <Cell\n              onClick={toggleFromWhoms}\n              after={!fromWhomsIsOpen ? <Icon28ChevronDownOutline /> : <Icon28ChevronUpOutline/>}\n            >Преподаватели/Группы</Cell>\n            {fromWhomsIsOpen && getFromWhomsList(user.schedule.lessons).map(fromWhom => {\n              return <CellButton\n                key={fromWhom.href}\n                onClick={() => goToSchedule(fromWhom.href)}\n              >{fromWhom.title}</CellButton>\n            })}\n          </Card>\n        </Div>\n      </>)\n    }\n    \n    if(user.univer && !user.schedule)\n    {\n      scheduleContent = (\n        <Div style={{paddingTop:0}}>\n          <Card>\n            <Cell\n              after={<Icon28AddOutline fill=\"orange\"/>}\n              onClick={goToSearchSchedule}\n            >Расписание не выбрано</Cell>\n          </Card>\n        </Div>\n      )\n    }\n\n    let univerInfoContent\n    if(currentUniver)\n    {\n      univerInfoContent = (<>\n        <Separator/>\n        <Div>\n          <Card>\n            <Cell\n              onClick={toggleWeeks}\n              after={!weeksIsOpen ? <Icon28ChevronDownOutline /> : <Icon28ChevronUpOutline/>}\n            >Учебные недели</Cell>\n            {weeksIsOpen && <Separator/>}\n            {weeksIsOpen && currentUniver.weeks.map((week, i) => {\n              const startRangString = new Date(week.range[0]).toLocaleDateString()\n              const endRangeString = new Date(week.range[1]).toLocaleDateString()\n              const rangeString = startRangString + ' - ' + endRangeString\n              \n              const weekPassed = isPassWeek(week.range[1])\n\n              return <Cell\n                key={i}\n                disabled\n                description={rangeString}\n                after={\n                  week.weekType === 0\n                    ? <Icon28ArrowUpOutline fill={isCurrentWeek(week) ? 'tomato' : 'teal'}/>\n                    : <Icon28ArrowDownOutline fill={isCurrentWeek(week) ? 'tomato' : 'violet'}/>\n                }\n              >\n                <span style={{\n                  textDecoration: weekPassed ? 'line-through': 'none',\n                  opacity: weekPassed ? 0.5 : 1,\n                  color: isCurrentWeek(week) ? 'tomato' : '',\n                }}>\n                  {week.weekType === 0?'Числитель':'Знаменатель'}\n                </span>\n              </Cell>\n            })}\n          </Card>\n        </Div>\n        <Div style={{paddingTop:0}}>\n          <Card>\n            <Cell\n              onClick={toggleTimeLessons}\n              after={!timeLessonsIsOpen ? <Icon28ChevronDownOutline /> : <Icon28ChevronUpOutline/>}\n            >Время занятий</Cell>\n            {timeLessonsIsOpen && <Separator/>}\n            {timeLessonsIsOpen && currentUniver.timeLessons.map((time, i) => {\n              return <Cell\n                key={i}\n                disabled\n                description={`${i+1} пара`}\n              >{time}</Cell>\n            })}\n          </Card>\n        </Div>\n      </>)\n    }\n\n    content = (<>\n      {univerContent}\n      {scheduleContent}\n      {univerInfoContent}\n    </>)\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={!(isUserLoading || isConfigLoading || isLoaderShowing) && user?.univer && <Icon28SettingsOutline onClick={goToSettings}/>}\n      />\n      {content}\n    </Panel>\n  )\n}\n\nexport default MainPanel","import React from 'react'\nimport {\n  ActionSheet,\n  ActionSheetItem,\n  Button,\n  Card,\n  Div,\n  Gallery,\n  IconButton,\n  Link,\n  Panel,\n  PanelHeader,\n  Placeholder,\n  SimpleCell,\n  Spinner,\n  Tabs,\n  TabsItem,\n} from '@vkontakte/vkui'\nimport {\n  Icon28ArrowUturnLeftOutline,\n  Icon28HomeOutline,\n  Icon28MoreVertical,\n  Icon28DeleteOutline,\n  Icon28SortHorizontalOutline,\n  Icon28Users3Outline,\n  Icon28FavoriteCircleFillYellow,\n} from '@vkontakte/icons';\nimport { useDispatch, useSelector } from 'react-redux'\nimport { RootState } from '../../store/rootReducer'\nimport { DayRange, Lesson, PanelProps, WeekRange } from '../../types'\nimport { getDiff, getLessonsInDay, getStatsForLesson } from '../../utils'\nimport { clearScheduleHistory, requestSchedule, scheduleHistoryBack, setLessonStats } from '../../store/slices/schedule';\nimport { setActiveModal, setActivePanel } from '../../store/slices/navigation';\nimport { MAIN_PANEL } from '../../constants';\nimport { requestDeleteUserSchedule, requestUpdateUserSchedule } from '../../store/slices/user';\nimport ScheduleBody from '../../components/ScheduleBody';\nimport './Schedule.sass'\n\nconst DAYS = [\n  { id: 0, title: 'ПН' },\n  { id: 1, title: 'ВТ' },\n  { id: 2, title: 'СР' },\n  { id: 3, title: 'ЧТ' },\n  { id: 4, title: 'ПТ' },\n  { id: 5, title: 'СБ' },\n]\nconst WEEKS = [\n  { id: 0, title: 'Числитель'},\n  { id: 1, title: 'Знаменатель'},\n]\n\nconst SchedulePanel: React.FC<PanelProps> = ({\n  id,\n  setPopout,\n}) => {\n  const dispatch = useDispatch()\n  const { isLoading, error, schedule, scheduleHistoryHrefs, } = useSelector((s: RootState) => s.schedule)\n  const { user } = useSelector((s: RootState) => s.user)\n  const { currentUniver, currentDay, currentWeek } = useSelector((s: RootState) => s.config)\n\n  const [activeDay, setActiveDay] = React.useState<DayRange>(currentDay)\n  const [activeWeek, setActiveWeek] = React.useState<WeekRange>(currentWeek)\n\n  const [isDiffShowing, setIsDiffShowing] = React.useState(false)\n  const toggleDiffShowing = () => {\n    setIsDiffShowing(!isDiffShowing)\n  }\n\n  const goToMain = () => {\n    dispatch(setActivePanel(MAIN_PANEL))\n    dispatch(clearScheduleHistory())\n  }\n\n  const goBack = () => {\n    if(scheduleHistoryHrefs.length === 1)\n    {\n      goToMain()\n    }\n    else\n    {\n      dispatch(scheduleHistoryBack())\n      setIsDiffShowing(false)\n    }\n  }\n\n  const saveSchedule = () => {\n    setIsDiffShowing(false)\n    dispatch(requestUpdateUserSchedule({\n      id: user!.id,\n      scheduleId: schedule!.href,\n    }))\n  }\n\n  const deleteSchedule = () => {\n    setIsDiffShowing(false)\n    dispatch(requestDeleteUserSchedule(user!.id))\n  }\n\n  const showActions = () => {\n    let toggleScheduleItem =\n      user!.schedule && user!.schedule.href === schedule!.href\n        ? <ActionSheetItem\n            autoclose\n            style={{color: 'tomato'}}\n            onClick={deleteSchedule}\n            before={<Icon28DeleteOutline fill=\"tomato\"/>}\n          >Удалить расписание</ActionSheetItem>\n        : <ActionSheetItem\n            autoclose\n            onClick={saveSchedule}\n            before={<Icon28FavoriteCircleFillYellow/>}\n            subtitle={user!.schedule?'вместо текущего':''}\n          >Сохранить расписание</ActionSheetItem>\n\n    const popout = (\n      <ActionSheet\n        onClose={() => setPopout!(null)}\n        iosCloseItem={\n          <ActionSheetItem autoclose mode=\"cancel\">\n            Отменить\n          </ActionSheetItem>\n        }\n      >\n        {false &&\n          <ActionSheetItem\n            autoclose\n            style={{color:'tan'}}\n            before={<Icon28Users3Outline fill=\"tan\"/>}\n            onClick={()=>{}}\n          >Экзамены</ActionSheetItem>\n        }\n        {user!.schedule && !(user!.schedule.href === schedule!.href) &&\n          <ActionSheetItem\n            autoclose\n            style={{color:'teal'}}\n            before={\n              <Icon28SortHorizontalOutline\n                fill={isDiffShowing?'tomato':'orange'}\n                style={{transform:`rotateY(${isDiffShowing?0:180}deg)`}}\n              />\n            }\n            subtitle={\n              isDiffShowing\n                ? 'Все занятия данного расписания'\n                : 'Занятия вне вашего расписания'\n              }\n            onClick={toggleDiffShowing}\n          >\n            {isDiffShowing ? 'Расписание без разницы' : 'Разница расписаний'}\n          </ActionSheetItem>\n        }\n        {toggleScheduleItem}\n      </ActionSheet>\n    )\n    setPopout!(popout)\n  }\n\n  const goToSchedule = (tail: string) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail,\n    }))\n    setIsDiffShowing(false)\n  }\n\n  const cardRef = React.useRef<HTMLDivElement>(null)\n\n  let content\n  if(isLoading)\n  {\n    content = <Spinner />\n  }\n  else if(error)\n  {\n    content = <Placeholder\n      stretched\n      action={\n        <Button onClick={() => {\n          dispatch(requestSchedule(error.payload))\n        }}>Повторить</Button>}\n    >{error.message}</Placeholder>\n  }\n  else if(schedule)\n  {\n    const ls = isDiffShowing ? getDiff(schedule.lessons, user!.schedule!.lessons) : schedule.lessons\n\n    content = ( <>      \n      <div className=\"schedule__card\" ref={cardRef}>\n        <Gallery\n          style={{height:'100%'}}\n          slideIndex={activeDay}\n          onChange={d => setActiveDay(d as DayRange)}\n        >\n          {DAYS.map((_,i) => {\n            const lessons = getLessonsInDay(ls, i as DayRange, activeWeek)\n\n            return <ScheduleBody\n              key={i}\n              today={activeDay === currentDay && activeWeek === currentWeek}\n              lessons={lessons}\n              onGoToSchedule={goToSchedule}\n              onGetStats={(lesson: Lesson) => {\n                const { stats, fromWhoms } = getStatsForLesson({\n                  lesson,\n                  lessons: schedule.lessons,\n                  currentUniver: currentUniver!,\n                })\n                dispatch(setLessonStats({\n                  title: lesson.subject,\n                  stats,\n                  fromWhoms,\n                }))\n                dispatch(setActiveModal('stats'))\n              }}\n            />\n          })}\n        </Gallery>\n      </div>\n\n      <Card style={{marginTop:8}}>\n        <Tabs>\n          {WEEKS.map(week => {\n            return <TabsItem\n              key={week.id}\n              selected={week.id === activeWeek}\n              onClick={() => setActiveWeek(week.id as WeekRange)}\n              style={{color: currentWeek === week.id ? 'tomato': ''}}\n            >{week.title}</TabsItem>\n          })}\n        </Tabs>\n        <Tabs>\n          {DAYS.map(day => {\n            return <TabsItem\n              key={day.id}\n              selected={day.id === activeDay}\n              onClick={() => setActiveDay(day.id as DayRange)}\n              style={{color: currentDay === day.id ? 'tomato': ''}}\n            >{day.title}</TabsItem>\n          })}\n        </Tabs>\n        <SimpleCell\n          disabled\n          before={\n            <IconButton>\n              <Icon28ArrowUturnLeftOutline onClick={goBack} width={20} style={{marginRight: 12, color:'teal'}}/>\n            </IconButton>\n          }\n          after={\n            <IconButton>\n              <Icon28MoreVertical onClick={showActions} width={20} style={{color:'violet'}}/>\n            </IconButton>\n          }\n        >\n          <Link href={`${user!.univer!.baseUrl}${schedule.href}`}>\n            {schedule.title}\n          </Link>\n          {isDiffShowing &&\n            <Icon28SortHorizontalOutline className=\"schedule__icon--diff\"/>\n          }\n          {user?.schedule && user.schedule.href === schedule.href &&\n            <Icon28FavoriteCircleFillYellow className=\"schedule__icon--fav\"/>\n          }\n        </SimpleCell>\n      </Card>\n    </>)\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={\n          <Icon28HomeOutline onClick={goToMain} />\n        }\n      />\n      <Div className=\"schedule__wrapper\">\n        {content}\n      </Div>\n    </Panel>\n  )\n}\n\nexport default SchedulePanel","import React, { ChangeEvent } from 'react'\nimport {\n  CellButton,\n  Div,\n  FixedLayout,\n  Panel,\n  PanelHeader,\n  PanelHeaderBack,\n  Placeholder,\n  Search,\n  Spinner,\n} from '@vkontakte/vkui'\nimport { Icon56GhostOutline } from '@vkontakte/icons'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { MAIN_PANEL, SCHEDULE_PANEL } from '../../constants'\nimport { RootState } from '../../store/rootReducer'\nimport { setActivePanel } from '../../store/slices/navigation'\nimport { clearSearchedSchedules, requestSchedule, requestSearchSchedule } from '../../store/slices/schedule'\nimport { HrefTitle, PanelProps } from '../../types'\n\nconst SearchPanel: React.FC<PanelProps> = ({\n  id,\n}) => {\n  const dispatch = useDispatch()\n  const { isSearchLoading, searchedSchedules, } = useSelector((s: RootState) => s.schedule)\n  const { user } = useSelector((s: RootState) => s.user)\n\n  const [q, setQ] = React.useState<string>('')\n  const handleQChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const q = e.target.value\n\n    setQ(q)\n    if(!q)\n    {\n      dispatch(clearSearchedSchedules())\n    }\n  }\n\n  const searchRef = React.useRef<HTMLInputElement>(null)\n  React.useEffect(() => {\n    window.setTimeout(() => {\n      searchRef.current && searchRef.current.focus()\n    },100)\n    return () => {\n      dispatch(clearSearchedSchedules())\n    }\n  },[])\n\n  const [debQ, setDebQ] = React.useState(q)\n  React.useEffect(() => {\n    const timeout = window.setTimeout(() => {\n      setDebQ(q)\n    }, 300)\n\n    return () => {\n      window.clearTimeout(timeout)\n    }\n  }, [q])\n\n  React.useEffect(() => {\n    if(debQ)\n    {\n      dispatch(requestSearchSchedule({\n        univer: user!.univer!.code,\n        q: debQ,\n      }))\n    }\n  }, [debQ])\n\n  const goToMainPanel = () => {\n    dispatch(setActivePanel(MAIN_PANEL))\n  }\n\n  const goToSchedule = (schedule: HrefTitle) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail: schedule.href,\n    }))\n    dispatch(setActivePanel(SCHEDULE_PANEL))\n  }\n\n  let content\n\n  if(isSearchLoading)\n  {\n    content = <Spinner />\n  }\n  else if(searchedSchedules.length === 0)\n  {\n    content = <Placeholder\n      icon={<Icon56GhostOutline style={{color:\"teal\"}} />}\n    >Ничего не найдено</Placeholder>\n  }\n  else\n  {\n    content = (<>\n      {searchedSchedules.map((schedule, i) => {\n        return <CellButton\n          key={i}\n          onClick={() => goToSchedule(schedule)}\n        >{schedule.title}</CellButton>\n      })}\n      <div style={{textAlign:'center'}}>\n        Уточните или исправьте запрос, если не нашли нужное расписание\n      </div>\n    </>)\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={\n          <PanelHeaderBack onClick={goToMainPanel} />\n        }\n      >Поиск</PanelHeader>\n\n      <FixedLayout style={{paddingTop:24}} vertical=\"top\" filled>\n        <Search\n          getRef={searchRef}\n          placeholder=\"Поиск расписания\"\n          after={null}\n          value={q}\n          onChange={handleQChange}\n        />\n      </FixedLayout>\n\n      <Div style={{marginTop:70}}>{content}</Div>\n    </Panel>\n  )\n}\n\nexport default SearchPanel","import React, { ChangeEvent } from 'react'\nimport {\n  Button,\n  Div,\n  FormItem,\n  Group,\n  Header,\n  NativeSelect,\n  Panel,\n  PanelHeader,\n  PanelHeaderBack,\n} from '@vkontakte/vkui'\nimport { PanelProps } from '../../types'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { setActivePanel } from '../../store/slices/navigation'\nimport { MAIN_PANEL } from '../../constants'\nimport { RootState } from '../../store/rootReducer'\nimport { requestDeleteUserUniver, requestUpdateUserUniver } from '../../store/slices/user'\n\nconst SettingsPanel: React.FC<PanelProps> = ({\n  id,\n}) => {\n  const dispatch = useDispatch()\n  const { univerList } = useSelector((s: RootState) => s.config)\n  const { user } = useSelector((s: RootState) => s.user)\n\n  const goToMain = () => {\n    dispatch(setActivePanel(MAIN_PANEL))\n  }\n\n  const userUniverId = user?.univer?.id ?? ''\n  const [univer, setUniver] = React.useState(''+userUniverId)\n  const handleChangeUniver = (e: ChangeEvent<HTMLSelectElement>) => {\n    setUniver(e.target.value)\n  }\n\n  const changeUniver = () => {\n    if((''+userUniverId) !== univer)\n    {\n      if(univer === '')\n      {\n        dispatch(requestDeleteUserUniver(user!.id))\n      }\n      else\n      {\n        dispatch(requestUpdateUserUniver({\n          id: user!.id,\n          univerId: +univer,\n        }))\n      }\n    }\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={<PanelHeaderBack onClick={goToMain} />}\n      >Настройки</PanelHeader>\n\n      <Group header={<Header mode=\"secondary\">Главное</Header>}>      \n        <FormItem\n          top=\"Университет\"\n          bottom=\"При изменении университета, выбранная группа удалится!\"\n          >\n          <NativeSelect\n            placeholder=\"Не выбран\"\n            value={univer}\n            onChange={handleChangeUniver}\n            >\n            {univerList.map(univer => {\n              return <option\n              key={univer.code}\n              value={univer.id}\n              >{univer.subtitle}</option>\n            })}\n          </NativeSelect>\n        </FormItem>\n        <Div style={{paddingTop:0}}>\n          <Button\n            disabled={(''+userUniverId) === univer}\n            style={{width:'100%'}}\n            size=\"l\"\n            onClick={changeUniver}\n            >Сохранить</Button>\n        </Div>\n      </Group>\n    </Panel>\n  )\n}\n\nexport default SettingsPanel","import React from \"react\"\nimport {\n  Cell,\n  IconButton,\n  usePlatform,\n} from \"@vkontakte/vkui\"\nimport {\n  Icon28FavoriteOutline,\n  Icon28ShareOutline,\n  Icon28SmartphoneOutline,\n  Icon28UsersOutline,\n} from \"@vkontakte/icons\"\nimport bridge from '@vkontakte/vk-bridge'\nimport './AppActions.sass'\nimport { GROUP_ID } from \"../../constants\"\n\ntype AppActionsProps = {\n  closeModal: () => void\n}\n\nconst AppActions: React.FC<AppActionsProps> = ({\n  closeModal,\n}) => {\n  const platform = usePlatform()\n\n  const addToFavorite = () => {\n    closeModal()\n    bridge.send('VKWebAppAddToFavorites')\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  const joinToGroup = () => {\n    closeModal()\n    bridge.send('VKWebAppJoinGroup', { group_id: GROUP_ID })\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  const addToHomeScreen = () => {\n    closeModal()\n    bridge.send('VKWebAppAddToHomeScreen')\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  const share = () => {\n    closeModal()\n    bridge.send('VKWebAppShare', {link: 'https://vk.com/app7908078'})\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  return (\n    <div>\n      {/* <Header>Не теряйте приложение</Header>\n      <Div className=\"actions-wrapper\" style={{paddingTop:0}}>\n        {true &&\n          <div className=\"actions__item\">\n            <IconButton>\n              <Icon28FavoriteOutline fill=\"orange\"/>\n            </IconButton>\n            Добавить в избранное\n          </div>\n        }\n        {true &&\n          <div className=\"actions__item\">\n            <IconButton>\n              <Icon28UsersOutline fill=\"var(--accent)\"/>\n            </IconButton>\n            Вступить в сообщество\n          </div>\n        }\n        {true &&\n          <div className=\"actions__item\">\n            <IconButton>\n              <Icon28ShareOutline fill=\"teal\"/>\n            </IconButton>\n            Поделиться приложением\n          </div>\n        }\n        {true &&\n          <div className=\"actions__item\">\n            <IconButton>\n              <Icon28SmartphoneOutline fill=\"tan\"/>\n            </IconButton>\n            На домашний экран\n          </div>\n        }\n      </Div> */}\n      {true &&\n        <Cell\n          before={\n            <IconButton>\n              <Icon28FavoriteOutline style={{marginRight:8,padding:0}} fill=\"orange\"/>\n            </IconButton>\n          }\n          description=\"Мини-приложения > Избранное\"\n          onClick={addToFavorite}\n        >В избранном</Cell>\n      }\n      {true &&\n        <Cell\n          before={\n            <IconButton>\n              <Icon28UsersOutline style={{marginRight:8,padding:0}} fill=\"var(--accent)\"/>\n            </IconButton>\n          }\n          description=\"Шапка группы\"\n          onClick={joinToGroup}\n        >Вступите в группу</Cell>\n      }\n      {platform === 'android' &&\n        <Cell\n          before={\n            <IconButton>\n                <Icon28SmartphoneOutline style={{marginRight:8,padding:0}} fill=\"tan\"/>\n              </IconButton>\n            }\n          description=\"Быстрый доступ с дом. экрана\"\n          onClick={addToHomeScreen}\n        >На домашний экран</Cell>\n      }\n      {true &&\n        <Cell\n          before={\n            <IconButton>\n              <Icon28ShareOutline style={{marginRight:8}} fill=\"teal\"/>\n            </IconButton>\n          }\n          description=\"Доступ по ссылке\"\n          onClick={share}\n        >Расскажите друзьям</Cell>\n      }\n    </div>\n  )\n}\n\nexport default AppActions","import React from \"react\"\nimport { Avatar, Caption, Card, CellButton, Div, Header, ModalCard, ModalPage, ModalPageHeader, ModalRoot, Progress } from \"@vkontakte/vkui\"\nimport AppActions from \"../AppActions\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { RootState } from \"../../store/rootReducer\"\nimport { setActiveModal } from \"../../store/slices/navigation\"\nimport { Icon24Dismiss } from \"@vkontakte/icons\"\nimport './ActionsModal.sass'\nimport { requestSchedule } from \"../../store/slices/schedule\"\n\n\nconst ActionsModal = () => {\n  const dispatch = useDispatch()\n  const { activeModal } = useSelector((s: RootState) => s.navigation)\n  const { lessonStats } = useSelector((s: RootState) => s.schedule)\n  const { user } = useSelector((s: RootState) => s.user)\n  const { currentUniver } = useSelector((s: RootState) => s.config)\n  \n  const closeModal = () => {\n    dispatch(setActiveModal(null))\n  }\n\n  const goToSchedule = (tail: string) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail,\n    }))\n    closeModal()\n  }\n\n  return (\n    <ModalRoot\n      activeModal={activeModal}\n      onClose={closeModal}\n    >\n      <ModalCard\n        id=\"actions\"\n        header=\"Не теряйте приложение\"\n        subheader=\"Т.к. приложение не находится в каталоге, найти через поиск его не получится. Поэтому, чтобы не потерять его, сохраните любым удомным способом:\"\n        icon={<Avatar size={72}/>}\n      >\n        <AppActions closeModal={closeModal}/>\n      </ModalCard>\n      <ModalPage id=\"stats\">\n        <ModalPageHeader\n          right={<Icon24Dismiss onClick={closeModal} style={{marginRight:8}}/>}\n        >Статистика</ModalPageHeader>\n        {lessonStats && <>\n          <Div>\n            <Card>\n              <Div>{lessonStats.title}</Div>\n            </Card>\n          </Div>\n          <Div style={{paddingTop:'0px 12px'}}>\n            {currentUniver &&\n              <Caption level=\"2\" weight=\"regular\" style={{opacity:0.5}}>\n                Пожалуйста, не воспринимайте данную статистику, буквально!\n                Т.к. для расчета, первым днем принят {new Date(currentUniver.startDateStartOfWeek).toLocaleDateString()},\n                а последним {new Date(currentUniver.endDate).toLocaleDateString()}.\n              </Caption>\n            }\n          </Div>\n          <Div style={{padding:'0px 12px'}}>\n            {Object.entries(lessonStats.stats).map(([typeLesson, values]) => {\n              const { pass, total } = values\n              if(total === 0) return null\n              \n              const title = {\n                lec: 'Лекция',\n                pr: 'Практика',\n                lab: 'Лабораторная',\n              }[typeLesson]\n              \n              return (\n                <div className=\"stats__item\" key={typeLesson}>\n                  <Header>\n                    {title}\n                    <span className=\"stats__secondary\">{pass}/{total}</span>\n                  </Header>\n                  <Progress\n                    className={`stats__progress--${typeLesson}`}\n                    style={{margin: '0px 12px 8px 12px',}}\n                    value={pass / total * 100}\n                    />\n                </div>\n              )\n            })}\n          </Div>\n          <Div>\n            <Header>Преподаватели / группы</Header>\n            {lessonStats.fromWhoms.map(fromWhom => {\n              return <CellButton\n                key={fromWhom.href}\n                onClick={() => goToSchedule(fromWhom.href)}\n              >{fromWhom.title}</CellButton>\n            })}\n          </Div>\n        </>}\n      </ModalPage>\n    </ModalRoot>\n  )\n}\n\nexport default ActionsModal","import React from 'react';\nimport {\n  AppRoot,\n  ConfigProvider,\n  ScreenSpinner,\n  usePlatform,\n  View,\n} from '@vkontakte/vkui';\nimport bridge from '@vkontakte/vk-bridge'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { GROUP_ID, MAIN_PANEL, SCHEDULE_PANEL, SEARCH_PANEL, SETTINGS_PANEL } from './constants';\nimport MainPanel from './panels/main';\nimport SchedulePanel from './panels/schedule';\nimport SearchPanel from './panels/search';\nimport SettingsPanel from './panels/settings';\nimport { RootState } from './store/rootReducer';\nimport ActionsModal from './components/ActionsModal';\nimport { requestGetUser, setUserData } from './store/slices/user';\nimport { requestConfigUnivers, setConfig, setCurrentUniver } from './store/slices/config';\nimport { setActiveModal } from './store/slices/navigation';\n\nlet isFirstLoading = true\nconst App: React.FC = () => {\n  const dispatch = useDispatch()\n  const { activePanel, history } = useSelector((s: RootState) => s.navigation)\n  const {\n    isLoaderShowing,\n    user,\n    isLoading: isUserLoading,\n    error: userError,\n    isUniverLoading,\n    isScheduleLoading,\n  } = useSelector((s: RootState) => s.user)\n  const { config, isLoading: isConfigLoading, error: configError, } = useSelector((s: RootState) => s.config)\n\n  const platform = usePlatform()\n\n  React.useEffect(() => {\n    document.body.setAttribute('scheme', 'space_gray')\n\n    const config =\n      window.location.search.slice(1)\n        .split('&')\n        .reduce((config, queryParam) => {\n          const [key, value] = queryParam.split('=')\n          return { ...config, [key.slice(3)]: value === '1' }\n        },{})\n    dispatch(setConfig(config))\n  },[])\n\n  const [popout, setPopout] = React.useState<React.ReactNode>(null)\n  const handleSetPopout = (popout: React.ReactNode) => {\n    setPopout(popout)\n  }\n\n  React.useEffect(() => {\n    const initApp = async () => {\n      // const userData = await bridge.send('VKWebAppGetUserInfo')\n      const userData = { id: 0 }\n      dispatch(setUserData(userData))\n      dispatch(requestConfigUnivers())\n      dispatch(requestGetUser(userData.id))\n    }\n\n    if(!user) initApp()\n  },[])\n\n  React.useEffect(() => {\n    if(user)\n    {\n      if(user.univer)\n        dispatch(setCurrentUniver(user.univer))\n      else\n        dispatch(setCurrentUniver(null))\n    }\n  }, [user])\n\n  React.useEffect(() => {\n    if(isUniverLoading || isScheduleLoading)\n    {\n      setPopout(<ScreenSpinner/>)\n    }\n    else\n    {\n      setPopout(null)\n    }\n  }, [isUniverLoading, isScheduleLoading])\n\n  React.useEffect(() => {\n    const openModal = async () => {\n      if(platform === 'android')\n      {\n        const addToHomeScreenInfo = await bridge.send('VKWebAppAddToHomeScreenInfo')\n        if(\n          addToHomeScreenInfo.is_feature_supported &&\n          addToHomeScreenInfo.is_added_to_home_screen\n        ) return\n      }\n\n      if(config.is_favorite) return\n\n      const groupInfo = await bridge.send(\n        'VKWebAppGetGroupInfo',\n        {'group_id': GROUP_ID}\n      )\n      if(groupInfo.is_member) return\n\n      dispatch(setActiveModal('actions'))\n    }\n    \n    if(\n      !isConfigLoading && !isUserLoading && !isFirstLoading &&\n      !userError && !configError &&\n      !isLoaderShowing\n    )\n    {\n      openModal()      \n    }\n    isFirstLoading = false\n  }, [isConfigLoading, isUserLoading, isLoaderShowing])\n\n  return (\n    <ConfigProvider isWebView={true}>\n      <AppRoot>\n        <View\n          popout={popout}\n          modal={<ActionsModal/>}\n          activePanel={activePanel}\n          history={history}\n        >\n          <MainPanel id={MAIN_PANEL} />\n          <SettingsPanel id={SETTINGS_PANEL} setPopout={handleSetPopout}/>\n          <SearchPanel id={SEARCH_PANEL} />\n          <SchedulePanel id={SCHEDULE_PANEL} setPopout={handleSetPopout}/>\n        </View>\n      </AppRoot>\n    </ConfigProvider>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport bridge from '@vkontakte/vk-bridge'\nimport '@vkontakte/vkui/dist/vkui.css'\n\nimport store from './store'\nimport { Provider } from 'react-redux'\n\nimport './index.sass';\n\nimport App from './App';\n\nbridge.send('VKWebAppInit')\nbridge.subscribe(e => {\n  if(e.detail.type === 'VKWebAppUpdateConfig')\n    document.body.setAttribute('scheme', e.detail.data.scheme)\n})\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}