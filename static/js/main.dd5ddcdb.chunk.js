(this["webpackJsonpschedule-f"]=this["webpackJsonpschedule-f"]||[]).push([[0],{108:function(e,t,n){},120:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),s=n(27),i=n.n(s),a=n(23),o=n.n(a),u=(n(102),n(20)),l=n(12),d=n(25),j="https://schedule-all-univers.herokuapp.com",f=198278031,h="schedule",b="main",p="search",O="settings",g={activePanel:b,history:[b],activeModal:null,prevActivePanel:b},x=Object(u.c)({name:"navigation",initialState:g,reducers:{setActivePanel:function(e,t){e.prevActivePanel=e.activePanel,e.activePanel=t.payload},setActiveModal:function(e,t){e.activeModal=t.payload}}}),v=x.actions,y=v.setActivePanel,m=v.setActiveModal,k=x.reducer,w=n(15),S=n.n(w),C=n(22),L={getSchedule:function(){var e=Object(C.a)(S.a.mark((function e(t){var n,r,c,s,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.univer,r=t.tail,c=new URLSearchParams("tail=".concat(r)).toString(),s=[j,"schedule",n].join("/")+"?"+c,e.next=5,fetch(s);case 5:return i=e.sent,e.next=8,i.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),searchSchedule:function(){var e=Object(C.a)(S.a.mark((function e(t){var n,r,c,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.univer,r=t.q,c=[j,"schedule/search",n,r].join("/"),e.next=4,fetch(c);case 4:return s=e.sent,e.next=7,s.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D={getUniverList:function(){var e=Object(C.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[j,"univers"].join("/"),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},T=function(){var e=Object(C.a)(S.a.mark((function e(t){var n,r,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[j,"users",t].join("/"),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(C.a)(S.a.mark((function e(t){var n,r,c,s,i,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.univerId,c=[j,"users",n,"univer"].join("/"),s={method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({univerId:r})},e.next=5,fetch(c,s);case 5:return i=e.sent,e.next=8,i.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(C.a)(S.a.mark((function e(t){var n,r,c,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[j,"users",t,"univer"].join("/"),r={method:"DELETE"},e.next=4,fetch(n,r);case 4:return c=e.sent,e.next=7,c.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H={schedule:L,config:D,user:{getUser:T,updateUserSchedule:function(){var e=Object(C.a)(S.a.mark((function e(t){var n,r,c,s,i,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.scheduleId,c=[j,"users",n,"schedule"].join("/"),s={method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({scheduleId:r})},e.next=5,fetch(c,s);case 5:return i=e.sent,e.next=8,i.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteUserSchedule:function(){var e=Object(C.a)(S.a.mark((function e(t){var n,r,c,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[j,"users",t,"schedule"].join("/"),r={method:"DELETE"},e.next=4,fetch(n,r);case 4:return c=e.sent,e.next=7,c.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateUserUniver:U,deleteUserUniver:_},qoute:{getQoute:function(){var e=Object(C.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[j,"qoute",(new Date).getTime()].join("/"),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},E=Object(u.b)("schedule/request",function(){var e=Object(C.a)(S.a.mark((function e(t,n){var r,c,s,i,a,o,u,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.univer,s=t.tail,i=n.getState(),a=i.schedule.scheduleHistory,o=null===(r=i.user.user)||void 0===r?void 0:r.schedule,!(u=a.find((function(e){return e.id===s})))){e.next=9;break}return e.abrupt("return",{record:u,isUniq:!1});case 9:if(!o||o.href!==s){e.next=13;break}return e.abrupt("return",{record:{id:s,data:o},isUniq:!0});case 13:return e.next=15,H.schedule.getSchedule({univer:c,tail:s});case 15:return l=e.sent,e.abrupt("return",{record:{id:s,data:l},isUniq:!0});case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),q=Object(u.b)("schedule/search/request",H.schedule.searchSchedule),A=Object(u.c)({name:"schedule",initialState:{isLoading:!1,error:null,schedule:null,lessonStats:null,scheduleHistory:[],scheduleHistoryHrefs:[],q:"",isSearchLoading:!1,searchError:null,searchedSchedules:[]},reducers:{scheduleHistoryBack:function(e){e.scheduleHistoryHrefs.pop();var t=e.scheduleHistoryHrefs[e.scheduleHistoryHrefs.length-1];if(t){var n=e.scheduleHistory.find((function(e){return e.id===t}));e.schedule=n.data}else e.schedule=null},clearScheduleHistory:function(e){e.scheduleHistoryHrefs=[],e.schedule=null},clearSearchedSchedules:function(e){e.searchedSchedules=[]},setLessonStats:function(e,t){e.lessonStats=t.payload},setQ:function(e,t){e.q=t.payload}},extraReducers:function(e){e.addCase(E.pending,(function(e){e.isLoading=!0,e.error=null})).addCase(E.rejected,(function(e,t){e.isLoading=!1,e.error={message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f :(",payload:t.meta.arg}})).addCase(E.fulfilled,(function(e,t){e.isLoading=!1,e.error=null;var n=t.payload,r=n.isUniq,c=n.record;r&&e.scheduleHistory.push(c),e.scheduleHistoryHrefs.push(c.id),e.schedule=c.data})).addCase(q.pending,(function(e){e.isSearchLoading=!0,e.searchError=null})).addCase(q.rejected,(function(e,t){e.isSearchLoading=!1,e.searchError={message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f :(",payload:t.meta.arg}})).addCase(q.fulfilled,(function(e,t){e.isSearchLoading=!1,e.searchError=null,e.searchedSchedules=t.payload}))}}),W=A.actions,N=W.scheduleHistoryBack,P=W.clearScheduleHistory,F=W.clearSearchedSchedules,R=W.setLessonStats,I=W.setQ,K=A.reducer,V=n(14),G=function(e,t,n){return e.filter((function(e){var r=e.day===t,c=e.week===n||2===e.week;return r&&c}))},M=function(e){var t={};return e.forEach((function(e){e.fromWhoms.forEach((function(e){t[e.href]||(t[e.href]=e)}))})),Object.values(t)},B=function(e){var t=(new Date).getTime(),n=Object(V.a)(e.range,2),r=n[0],c=n[1];return r<=t&&t<=c},J=Object(u.b)("qoute/request",H.qoute.getQoute),z=Object(u.b)("config/univers",H.config.getUniverList),Q=Object(u.c)({name:"config",initialState:{isLoading:!1,error:null,univerList:[],currentUniver:null,passDays:0,countDays:0,toEndDays:0,toEndPercent:0,currentDay:0,currentWeek:0,config:{},qoute:null},reducers:{setCurrentUniver:function(e,t){var n=t.payload;if(n){n=e.univerList.find((function(e){return e.id===n.id})),e.currentUniver=n,e.currentDay=function(){var e=(new Date).getDay();return e>0?e-1:e}(),e.currentWeek=function(e){var t=e.find((function(e){return B(e)}));return t?t.weekType:0}(n.weeks);var r=function(e,t){var n=864e5,r=(new Date).getTime(),c=new Date(e).getTime(),s=new Date(t).getTime(),i=Math.ceil((s-c)/n),a=Math.ceil((r-c)/n);return{passDays:a<0?0:a,countDays:i,toEndDays:Math.ceil((s-r)/n)}}(n.startDate,n.endDate),c=r.passDays,s=r.countDays,i=r.toEndDays;e.countDays=s,e.passDays=c,e.toEndDays=i,e.toEndPercent=c/s*100}else e.currentUniver=null},setConfig:function(e,t){e.config=t.payload}},extraReducers:function(e){e.addCase(z.pending,(function(e){e.isLoading=!0,e.error=null})).addCase(z.rejected,(function(e,t){e.isLoading=!1,e.error={message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u043e\u0432 :(",payload:t.meta.arg}})).addCase(z.fulfilled,(function(e,t){e.isLoading=!1,e.error=null,e.univerList=t.payload})).addCase(J.pending,(function(e){e.isLoading=!0})).addCase(J.fulfilled,(function(e,t){e.isLoading=!1,e.qoute=t.payload}))}}),Y=Q.actions,X=Y.setCurrentUniver,Z=Y.setConfig,$=Q.reducer,ee=Object(u.b)("user/request",H.user.getUser),te=Object(u.b)("user/update/univer",H.user.updateUserUniver),ne=Object(u.b)("user/delete/univer",H.user.deleteUserUniver),re=Object(u.b)("user/update/schedule",H.user.updateUserSchedule),ce=Object(u.b)("user/delete/schedule",H.user.deleteUserSchedule),se=Object(u.c)({name:"user",initialState:{isLoading:!1,isLoaderShowing:!0,isUniverLoading:!1,isScheduleLoading:!1,error:null,user:null,userData:null},reducers:{setUserData:function(e,t){e.userData=t.payload},setIsLoaderShowing:function(e,t){e.isLoaderShowing=t.payload}},extraReducers:function(e){e.addCase(ee.pending,(function(e){e.isLoading=!0,e.error=null})).addCase(ee.rejected,(function(e,t){e.isLoading=!1,e.error={message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 :(",payload:t.meta.arg}})).addCase(ee.fulfilled,(function(e,t){e.isLoading=!1,e.error=null,e.user=t.payload})).addCase(te.pending,(function(e){e.isUniverLoading=!0,e.error=null})).addCase(te.rejected,(function(e,t){e.isUniverLoading=!1,e.error={message:"\u041f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 :(",payload:t.meta.arg}})).addCase(te.fulfilled,(function(e,t){e.isUniverLoading=!1,e.error=null,e.user=t.payload})).addCase(ne.pending,(function(e){e.isUniverLoading=!0,e.error=null})).addCase(ne.rejected,(function(e,t){e.isUniverLoading=!1,e.error={message:"\u041f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 :(",payload:t.meta.arg}})).addCase(ne.fulfilled,(function(e,t){e.isUniverLoading=!1,e.error=null,e.user=t.payload})).addCase(re.pending,(function(e){e.isScheduleLoading=!0,e.error=null})).addCase(re.rejected,(function(e,t){e.isScheduleLoading=!1,e.error={message:"\u041f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 :(",payload:t.meta.arg}})).addCase(re.fulfilled,(function(e,t){e.isScheduleLoading=!1,e.error=null,e.user=t.payload})).addCase(ce.pending,(function(e){e.isScheduleLoading=!0,e.error=null})).addCase(ce.rejected,(function(e,t){e.isScheduleLoading=!1,e.error={message:"\u041f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 :(",payload:t.meta.arg}})).addCase(ce.fulfilled,(function(e,t){e.isScheduleLoading=!1,e.error=null,e.user=t.payload}))}}),ie=se.actions,ae=ie.setUserData,oe=(ie.setIsLoaderShowing,se.reducer),ue=Object(d.b)({navigation:k,schedule:K,config:$,user:oe}),le=Object(u.a)({reducer:ue}),de=le,je=(n(108),n(28)),fe=n(32),he=n(3),be=n(128),pe=n(129),Oe=n(130),ge=n(131),xe=n(132),ve=n(133),ye=n(134),me=n(135),ke=n(136),we=n(137),Se=n(138),Ce=n(139),Le=n(140),De=n(127),Te=(n(120),n(1)),Ue=function(e){var t=e.current,n=e.lesson,r=e.onGoToSchedule,c=e.getStats;return Object(Te.jsxs)("div",{className:"lesson-row".concat(t?" lesson-row--current":""),children:[Object(Te.jsx)("div",{className:"lesson-row__time",children:n.time.map((function(e,t){return Object(Te.jsx)("div",{className:"lesson-row__time-item lesson-row__time-item--".concat(0===t?"start":"end"),children:e},e)}))}),Object(Te.jsxs)("div",{className:"lesson-row__body lesson-row__body--".concat(n.type),children:[n.typeTitle&&Object(Te.jsxs)("div",{className:"lesson-row__place",children:[Object(Te.jsx)("span",{className:"lesson-row__type-title--".concat(n.type),children:n.typeTitle}),n.place]}),Object(Te.jsxs)("div",{onClick:function(){return c&&c()},className:"lesson-row__subject",children:[n.subject," ",2!==n.group&&"(".concat(n.group+1,"\u0433\u0440.)")]}),Object(Te.jsx)("div",{className:"lesson-row__fromWhoms",children:n.fromWhoms.map((function(e){return Object(Te.jsx)("div",{className:"lesson-row__fromWhoms-item".concat(e.href?" link":""),onClick:function(){return e.href&&r(e.href)},children:e.title},e.href)}))})]}),Object(Te.jsx)("div",{className:"lesson-row__after"})]})},_e=function(e){var t=e.today,n=e.lessons,r=e.onGoToSchedule,c=e.onGetStats;return Object(Te.jsx)(he.g,{className:"schedule__body",children:0===n.length?Object(Te.jsx)(he.B,{className:"schedule__empty-placeholder",icon:Object(Te.jsx)(De.a,{style:{color:"teal"}}),children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442"}):n.map((function(e,n){var s=e.time.map((function(e){return e.split(":").map((function(e){return+e}))})),i=t&&function(e){var t=(new Date).getTime(),n=Object(V.a)(e,2),r=n[0],c=n[1],s=Object(V.a)(r,2),i=s[0],a=s[1];if((new Date).setHours(i,a)-6e5>t)return!1;var o=Object(V.a)(c,2),u=o[0],l=o[1];return!((new Date).setHours(u,l)<t)}(s);return Object(Te.jsx)(Ue,{lesson:e,onGoToSchedule:r,current:i,getStats:function(){return c&&c(e)}},n)}))})},He=function(e){var t=e.qoute,n=c.a.useState(!1),r=Object(V.a)(n,2),s=r[0],i=r[1];return Object(Te.jsx)(he.k,{children:Object(Te.jsxs)(he.g,{children:[Object(Te.jsx)(he.h,{onClick:function(){return i(!s)},description:"\u0426\u0438\u0442\u0430\u0442\u0430 \u0434\u043d\u044f",after:s?Object(Te.jsx)(pe.a,{}):Object(Te.jsx)(be.a,{}),children:t.author}),s&&Object(Te.jsx)(he.k,{style:{paddingTop:4},children:t.text})]})})},Ee=function(e){var t,n=e.id,r=Object(l.b)(),s=Object(l.c)((function(e){return e.user})),i=s.user,a=s.isLoading,u=s.error,d=Object(l.c)((function(e){return e.config})),j=d.currentUniver,b=d.currentWeek,g=d.currentDay,x=d.toEndDays,v=d.toEndPercent,m=d.isLoading,k=d.error,w=d.qoute,S=Object(he.L)(),C=function(){r(y(p))},L=function(){r(y(O))},D=function(e){r(E({univer:i.univer.code,tail:e})),r(y(h))},T=c.a.useState(!1),U=Object(V.a)(T,2),_=U[0],H=U[1],q=c.a.useState(!1),A=Object(V.a)(q,2),W=A[0],N=A[1],P=c.a.useState(!1),F=Object(V.a)(P,2),R=F[0],I=F[1],K=c.a.useState(!1),J=Object(V.a)(K,2),Q=J[0],Y=J[1];if(a||m)t=Object(Te.jsx)(he.H,{style:{paddingTop:"20vh"}});else if(u||k){var X=u&&u.message,Z=k&&k.message;t=Object(Te.jsxs)(he.B,{stretched:!0,action:Object(Te.jsx)(he.e,{onClick:function(){u&&i&&r(ee(i.id)),k&&r(z())},children:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c"}),children:[X,Object(Te.jsx)("br",{}),Z]})}else if(i){var $,te,ne;if(i.univer&&j&&($=Object(Te.jsxs)(Te.Fragment,{children:[w&&Object(Te.jsx)(He,{qoute:w}),Object(Te.jsx)(he.k,{style:{paddingTop:0},children:Object(Te.jsxs)(he.g,{children:[Object(Te.jsx)(he.h,{onClick:function(){Y(!Q)},after:Q?Object(Te.jsx)(pe.a,{}):Object(Te.jsx)(be.a,{}),children:"\u0414\u043e\u0441\u0442\u0443\u043f \u043a \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e"}),Q&&Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)(he.h,{before:Object(Te.jsx)(Oe.a,{style:{marginRight:8,padding:0},fill:"orange"}),description:"\u041c\u0438\u043d\u0438-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f > \u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",onClick:function(){o.a.send("VKWebAppAddToFavorites").then(console.log).catch(console.log)},children:"\u0412 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u043c"}),Object(Te.jsx)(he.h,{before:Object(Te.jsx)(ge.a,{style:{marginRight:8,padding:0},fill:"var(--accent)"}),description:"\u0428\u0430\u043f\u043a\u0430 \u0433\u0440\u0443\u043f\u043f\u044b",onClick:function(){o.a.send("VKWebAppJoinGroup",{group_id:f}).then(console.log).catch(console.log)},children:"\u0412\u0441\u0442\u0443\u043f\u0438\u0442\u0435 \u0432 \u0433\u0440\u0443\u043f\u043f\u0443"}),"ios"!==S&&Object(Te.jsx)(he.h,{before:Object(Te.jsx)(xe.a,{style:{marginRight:8,padding:0},fill:"tan"}),description:"\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u0441 \u0434\u043e\u043c. \u044d\u043a\u0440\u0430\u043d\u0430",onClick:function(){o.a.send("VKWebAppAddToHomeScreen").then(console.log).catch(console.log)},children:"\u041d\u0430 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u044d\u043a\u0440\u0430\u043d"}),Object(Te.jsx)(he.h,{before:Object(Te.jsx)(ve.a,{style:{marginRight:8},fill:"teal"}),description:"\u0414\u043e\u0441\u0442\u0443\u043f \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435",onClick:function(){o.a.send("VKWebAppShare",{link:"https://vk.com/app7908078"}).then(console.log).catch(console.log)},children:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u0434\u0440\u0443\u0437\u044c\u044f\u043c"})]})]})}),Object(Te.jsx)(he.F,{}),Object(Te.jsx)(he.k,{children:Object(Te.jsxs)(he.g,{children:[Object(Te.jsx)(he.q,{subtitle:"\u0414\u043e \u043a\u043e\u043d\u0446\u0430 \u0441\u0435\u043c\u0435\u0441\u0442\u0440\u0430 ".concat(x," \u0434\u043d. (").concat(new Date(j.endDate).toLocaleDateString(),")"),children:b?"\u0427\u0438\u0441\u043b\u0438\u0442\u0435\u043b\u044c(\u0447\u0435\u0442\u043d\u0430\u044f)":"\u0417\u043d\u0430\u043c\u0435\u043d\u0430\u0442\u0435\u043b\u044c(\u043d\u0435\u0447\u0435\u0442\u043d\u0430\u044f)"}),Object(Te.jsx)(he.C,{style:{margin:"0px 12px",background:"gray"},value:v}),Object(Te.jsx)("br",{}),Object(Te.jsx)(he.F,{}),Object(Te.jsx)(he.h,{after:Object(Te.jsx)(ye.a,{}),onClick:C,children:"\u0418\u0441\u043a\u0430\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})]})})]})),i.univer||($=Object(Te.jsx)(he.B,{stretched:!0,icon:Object(Te.jsx)(me.a,{width:64,height:64}),action:Object(Te.jsx)(he.e,{onClick:L,children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"}),children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435\u043c"})),i.schedule){var re=G(i.schedule.lessons,g,b),se="".concat(["\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430"][g],", ").concat((new Date).toLocaleDateString());te=Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)(he.k,{style:{paddingTop:0},children:Object(Te.jsxs)(he.g,{children:[Object(Te.jsx)(he.h,{disabled:!0,after:Object(Te.jsx)(he.r,{children:Object(Te.jsx)(ke.a,{fill:"tomato",onClick:function(){r(ce(i.id))}})}),children:i.schedule.title}),Object(Te.jsx)(he.F,{}),Object(Te.jsx)(he.q,{subtitle:se,children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f"}),Object(Te.jsx)("div",{style:{padding:"0px 8px"},children:Object(Te.jsx)(_e,{today:!0,lessons:re,onGoToSchedule:D})}),Object(Te.jsx)("br",{}),Object(Te.jsx)(he.F,{}),Object(Te.jsx)(he.i,{onClick:function(){return D(i.schedule.href)},children:"\u041f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})]})}),Object(Te.jsx)(he.k,{style:{paddingTop:0},children:Object(Te.jsxs)(he.g,{children:[Object(Te.jsx)(he.h,{onClick:function(){H(!_)},after:_?Object(Te.jsx)(pe.a,{}):Object(Te.jsx)(be.a,{}),children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438/\u0413\u0440\u0443\u043f\u043f\u044b"}),_&&M(i.schedule.lessons).map((function(e){return Object(Te.jsx)(he.i,{onClick:function(){return D(e.href)},children:e.title},e.href)}))]})})]})}i.univer&&!i.schedule&&(te=Object(Te.jsx)(he.k,{style:{paddingTop:0},children:Object(Te.jsx)(he.g,{children:Object(Te.jsx)(he.h,{after:Object(Te.jsx)(we.a,{fill:"orange"}),onClick:C,children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"})})})),j&&(ne=Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)(he.F,{}),Object(Te.jsx)(he.k,{children:Object(Te.jsxs)(he.g,{children:[Object(Te.jsx)(he.h,{onClick:function(){N(!W)},after:W?Object(Te.jsx)(pe.a,{}):Object(Te.jsx)(be.a,{}),children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0435 \u043d\u0435\u0434\u0435\u043b\u0438"}),W&&Object(Te.jsx)(he.F,{}),W&&j.weeks.map((function(e,t){var n,r=new Date(e.range[0]).toLocaleDateString()+" - "+new Date(e.range[1]).toLocaleDateString(),c=(n=e.range[1],(new Date).getTime()>n);return Object(Te.jsx)(he.h,{disabled:!0,description:r,after:0===e.weekType?Object(Te.jsx)(Se.a,{fill:B(e)?"tomato":"teal"}):Object(Te.jsx)(Ce.a,{fill:B(e)?"tomato":"violet"}),children:Object(Te.jsx)("span",{style:{textDecoration:c?"line-through":"none",opacity:c?.5:1,color:B(e)?"tomato":""},children:0===e.weekType?"\u0427\u0438\u0441\u043b\u0438\u0442\u0435\u043b\u044c(\u0447\u0435\u0442\u043d\u0430\u044f)":"\u0417\u043d\u0430\u043c\u0435\u043d\u0430\u0442\u0435\u043b\u044c(\u043d\u0435\u0447\u0435\u0442\u043d\u0430\u044f)"})},t)}))]})}),Object(Te.jsx)(he.k,{style:{paddingTop:0},children:Object(Te.jsxs)(he.g,{children:[Object(Te.jsx)(he.h,{onClick:function(){I(!R)},after:R?Object(Te.jsx)(pe.a,{}):Object(Te.jsx)(be.a,{}),children:"\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u043d\u044f\u0442\u0438\u0439"}),R&&Object(Te.jsx)(he.F,{}),R&&j.timeLessons.map((function(e,t){return Object(Te.jsx)(he.h,{disabled:!0,description:"".concat(t+1," \u043f\u0430\u0440\u0430"),children:e},t)}))]})})]})),t=Object(Te.jsxs)(Te.Fragment,{children:[$,te,ne]})}return Object(Te.jsxs)(he.y,{id:n,children:[Object(Te.jsx)(he.z,{separator:!1,left:!(a||m)&&(null===i||void 0===i?void 0:i.univer)&&Object(Te.jsx)(Le.a,{onClick:L})}),t]})},qe=n(141),Ae=n(142),We=n(143),Ne=n(144),Pe=n(145),Fe=(n(122),[{id:0,title:"\u041f\u041d"},{id:1,title:"\u0412\u0422"},{id:2,title:"\u0421\u0420"},{id:3,title:"\u0427\u0422"},{id:4,title:"\u041f\u0422"},{id:5,title:"\u0421\u0411"}]),Re=[{id:0,title:"\u0427\u0438\u0441\u043b\u0438\u0442\u0435\u043b\u044c \u2227"},{id:1,title:"\u0417\u043d\u0430\u043c\u0435\u043d\u0430\u0442\u0435\u043b\u044c \u2228"}],Ie=function(e){var t,n,r,s=e.id,i=e.setPopout,a=Object(l.b)(),o=Object(l.c)((function(e){return e.schedule})),u=o.isLoading,d=o.error,j=o.schedule,f=o.scheduleHistoryHrefs,h=Object(l.c)((function(e){return e.user})).user,O=Object(l.c)((function(e){return e.config})),g=O.currentUniver,x=O.currentDay,v=O.currentWeek,k=Object(l.c)((function(e){return e.navigation})).prevActivePanel,w=c.a.useState(x),S=Object(V.a)(w,2),C=S[0],L=S[1],D=c.a.useState(v),T=Object(V.a)(D,2),U=T[0],_=T[1],H=c.a.useState(!1),q=Object(V.a)(H,2),A=q[0],W=q[1],K=function(){W(!A)},B=function(){a(y(b)),a(P()),a(I("")),a(F())},J=function(){W(!1),a(re({id:h.id,scheduleId:j.href}))},z=function(){W(!1),a(ce(h.id))},Q=function(e){a(E({univer:h.univer.code,tail:e})),W(!1)},Y=c.a.useRef(null);if(u)t=Object(Te.jsx)(he.H,{});else if(d)t=Object(Te.jsx)(he.B,{stretched:!0,action:Object(Te.jsx)(he.e,{onClick:function(){a(E(d.payload))},children:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c"}),children:d.message});else if(j){var X=A?(n=j.lessons,r=h.schedule.lessons,n.filter((function(e){return!r.find((function(t){return function(e,t){var n=e.day===t.day,r=e.lesson===t.lesson,c=e.week===t.week||2===e.week||2===t.week,s=e.group===t.group||2===e.group||2===t.group;return n&&r&&c&&s}(e,t)}))}))):j.lessons;t=Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)("div",{className:"schedule__card",ref:Y,children:Object(Te.jsx)(he.o,{style:{height:"100%"},slideIndex:C,onChange:function(e){return L(e)},children:Fe.map((function(e,t){var n=G(X,t,U);return Object(Te.jsx)(_e,{today:C===x&&U===v,lessons:n,onGoToSchedule:Q,onGetStats:function(e){var t=function(e){var t=e.lesson,n=e.lessons,r=e.currentUniver,c=t.subject,s=(t.time,r.weeks),i=r.startDate,a={lec:{pass:0,total:0},pr:{pass:0,total:0},lab:{pass:0,total:0}},o=n.filter((function(e){return e.subject===c})),u=o.filter((function(e){return 0===e.week})),l=o.filter((function(e){return 1===e.week})),d=o.filter((function(e){return 2===e.week})),j=s.filter((function(e){return 0===e.weekType})).length,f=s.filter((function(e){return 1===e.weekType})).length;a.lec.total=j*u.filter((function(e){return 0===e.type})).length+f*l.filter((function(e){return 0===e.type})).length+(j+f)*d.filter((function(e){return 0===e.type})).length,a.pr.total=j*u.filter((function(e){return 1===e.type})).length+f*l.filter((function(e){return 1===e.type})).length+(j+f)*d.filter((function(e){return 1===e.type})).length,a.lab.total=j*u.filter((function(e){return 2===e.type})).length+f*l.filter((function(e){return 2===e.type})).length+(j+f)*d.filter((function(e){return 2===e.type})).length;var h=new Date,b=h.getTime(),p=new Date(i).getTime();if(b<p)return{fromWhoms:M(o),stats:{lec:{pass:0,total:a.lec.total},pr:{pass:0,total:a.pr.total},lab:{pass:0,total:a.lab.total}}};var O=s.findIndex((function(e){var t=Object(V.a)(e.range,2),n=t[0],r=t[1];return n<=b&&b<=r})),g=s.slice(0,O),x=g.filter((function(e){return 0===e.weekType})).length,v=g.filter((function(e){return 1===e.weekType})).length;a.lec.pass=x*u.filter((function(e){return 0===e.type})).length+v*l.filter((function(e){return 0===e.type})).length+(x+v)*d.filter((function(e){return 0===e.type})).length,a.pr.pass=x*u.filter((function(e){return 1===e.type})).length+v*l.filter((function(e){return 1===e.type})).length+(x+v)*d.filter((function(e){return 1===e.type})).length,a.lab.pass=x*u.filter((function(e){return 2===e.type})).length+v*l.filter((function(e){return 2===e.type})).length+(x+v)*d.filter((function(e){return 2===e.type})).length;var y=s[O];if(y){var m=h.getDay(),k=0===m?6:m-1,w=h.getTime();o.filter((function(e){if(e.week!==y.weekType&&2!==e.week)return!1;if(e.day<k)return!0;if(e.day===k){var t=Object(V.a)(e.time,2),n=t[0],r=t[1],c=n.split(":").map((function(e){return+e})),s=Object(V.a)(c,2),i=s[0],a=s[1],o=new Date(w).setHours(i,a),u=r.split(":").map((function(e){return+e})),l=Object(V.a)(u,2),d=l[0],j=l[1],f=new Date(w).setHours(d,j);if(w>o&&w>f)return!0}return!1})).forEach((function(e){var t=["lec","pr","lab"][e.type];a[t].pass++}))}var S=M(o);return{stats:a,fromWhoms:S}}({lesson:e,lessons:j.lessons,currentUniver:g}),n=t.stats,r=t.fromWhoms;a(R({title:e.subject,stats:n,fromWhoms:r})),a(m("stats"))}},t)}))})}),Object(Te.jsxs)(he.g,{style:{marginTop:8},children:[Object(Te.jsx)(he.I,{children:Re.map((function(e){return Object(Te.jsx)(he.J,{selected:e.id===U,onClick:function(){return _(e.id)},style:{color:v===e.id?"tomato":""},children:e.title},e.id)}))}),Object(Te.jsx)(he.I,{children:Fe.map((function(e){return Object(Te.jsx)(he.J,{selected:e.id===C,onClick:function(){return L(e.id)},style:{color:x===e.id?"tomato":""},children:e.title},e.id)}))}),Object(Te.jsxs)(he.G,{disabled:!0,before:Object(Te.jsx)(he.r,{children:Object(Te.jsx)(We.a,{onClick:function(){1===f.length?k===p?(a(y(p)),a(P())):B():(a(N()),W(!1))},width:20,style:{marginRight:12,color:"teal"}})}),after:Object(Te.jsx)(he.r,{children:Object(Te.jsx)(Ne.a,{onClick:function(){var e=h.schedule&&h.schedule.href===j.href?Object(Te.jsx)(he.b,{autoclose:!0,style:{color:"tomato"},onClick:z,before:Object(Te.jsx)(ke.a,{fill:"tomato"}),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}):Object(Te.jsx)(he.b,{autoclose:!0,onClick:J,before:Object(Te.jsx)(qe.a,{}),subtitle:h.schedule?"\u0432\u043c\u0435\u0441\u0442\u043e \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e":"",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),t=Object(Te.jsxs)(he.a,{onClose:function(){return i(null)},iosCloseItem:Object(Te.jsx)(he.b,{autoclose:!0,mode:"cancel",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),children:[!1,h.schedule&&!(h.schedule.href===j.href)&&Object(Te.jsx)(he.b,{autoclose:!0,style:{color:"teal"},before:Object(Te.jsx)(Ae.a,{fill:A?"tomato":"orange",style:{transform:"rotateY(".concat(A?0:180,"deg)")}}),subtitle:A?"\u0412\u0441\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u044f \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f":"\u0417\u0430\u043d\u044f\u0442\u0438\u044f \u0432\u043d\u0435 \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f",onClick:K,children:A?"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0431\u0435\u0437 \u0440\u0430\u0437\u043d\u0438\u0446\u044b":"\u0420\u0430\u0437\u043d\u0438\u0446\u0430 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0439"}),e]});i(t)},width:20,style:{color:"violet"}})}),children:[Object(Te.jsx)(he.s,{href:"".concat(h.univer.baseUrl).concat(j.href),children:j.title}),A&&Object(Te.jsx)(Ae.a,{className:"schedule__icon--diff"}),(null===h||void 0===h?void 0:h.schedule)&&h.schedule.href===j.href&&Object(Te.jsx)(qe.a,{className:"schedule__icon--fav"})]})]})]})}return Object(Te.jsxs)(he.y,{id:s,children:[Object(Te.jsx)(he.z,{separator:!1,left:Object(Te.jsx)(Pe.a,{onClick:B})}),Object(Te.jsx)(he.k,{className:"schedule__wrapper",children:t})]})},Ke=function(e){var t=e.id,n=Object(l.b)(),r=Object(l.c)((function(e){return e.schedule})),s=r.isSearchLoading,i=r.searchedSchedules,a=r.q,o=Object(l.c)((function(e){return e.user})).user,u=c.a.useRef(null);c.a.useEffect((function(){window.setTimeout((function(){u.current&&u.current.focus()}),100)}),[]);var d=c.a.useState(a),j=Object(V.a)(d,2),f=j[0],p=j[1];c.a.useEffect((function(){var e=window.setTimeout((function(){p(a)}),500);return function(){window.clearTimeout(e)}}),[a]),c.a.useEffect((function(){f&&n(q({univer:o.univer.code,q:f}))}),[f]);var O;return O=s?Object(Te.jsx)(he.H,{}):0===i.length?Object(Te.jsx)(he.B,{icon:Object(Te.jsx)(De.a,{style:{color:"teal"}}),children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):Object(Te.jsxs)(Te.Fragment,{children:[i.map((function(e,t){return Object(Te.jsx)(he.i,{onClick:function(){return function(e){n(E({univer:o.univer.code,tail:e.href})),n(y(h))}(e)},children:e.title},t)})),Object(Te.jsxs)(he.m,{children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e ",i.length," \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0439 ",Object(Te.jsx)("br",{}),"\u0423\u0442\u043e\u0447\u043d\u0438\u0442\u0435 \u0438\u043b\u0438 \u0438\u0441\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441, ",Object(Te.jsx)("br",{})," \u0435\u0441\u043b\u0438 \u043d\u0435 \u043d\u0430\u0448\u043b\u0438 \u043d\u0443\u0436\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"]})]}),Object(Te.jsxs)(he.y,{id:t,children:[Object(Te.jsx)(he.z,{separator:!1,left:Object(Te.jsx)(he.A,{onClick:function(){n(y(b)),n(I("")),n(F())}}),children:"\u041f\u043e\u0438\u0441\u043a"}),Object(Te.jsx)(he.l,{style:{paddingTop:24},vertical:"top",filled:!0,children:Object(Te.jsx)(he.E,{getRef:u,placeholder:"\u041f\u043e\u0438\u0441\u043a \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f",after:null,value:a,onChange:function(e){var t=e.target.value;n(I(t)),t||n(F())}})}),Object(Te.jsx)(he.k,{style:{marginTop:70},children:O})]})},Ve=function(e){var t,n,r=e.id,s=Object(l.b)(),i=Object(l.c)((function(e){return e.config})).univerList,a=Object(l.c)((function(e){return e.user})).user,o=null!==(t=null===a||void 0===a||null===(n=a.univer)||void 0===n?void 0:n.id)&&void 0!==t?t:"",u=c.a.useState(""+o),d=Object(V.a)(u,2),j=d[0],f=d[1];return Object(Te.jsxs)(he.y,{id:r,children:[Object(Te.jsx)(he.z,{separator:!1,left:Object(Te.jsx)(he.A,{onClick:function(){s(y(b))}}),children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(Te.jsxs)(he.p,{header:Object(Te.jsx)(he.q,{mode:"secondary",children:"\u0413\u043b\u0430\u0432\u043d\u043e\u0435"}),children:[Object(Te.jsx)(he.n,{top:"\u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442",bottom:"\u041f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0430, \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430 \u0443\u0434\u0430\u043b\u0438\u0442\u0441\u044f!",children:Object(Te.jsx)(he.x,{placeholder:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d",value:j,onChange:function(e){f(e.target.value)},children:i.map((function(e){return Object(Te.jsx)("option",{value:e.id,children:e.subtitle},e.code)}))})}),Object(Te.jsx)(he.k,{style:{paddingTop:0},children:Object(Te.jsx)(he.e,{disabled:""+o===j,style:{width:"100%"},size:"l",onClick:function(){""+o!==j&&s(""===j?ne(a.id):te({id:a.id,univerId:+j}))},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})]})},Ge=(n(123),function(e){var t=e.closeModal,n=Object(he.L)();return Object(Te.jsxs)("div",{children:[Object(Te.jsx)(he.h,{before:Object(Te.jsx)(he.r,{children:Object(Te.jsx)(Oe.a,{style:{marginRight:8,padding:0},fill:"orange"})}),description:"\u041c\u0438\u043d\u0438-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f > \u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",onClick:function(){t(),o.a.send("VKWebAppAddToFavorites").then(console.log).catch(console.log)},children:"\u0412 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u043c"}),Object(Te.jsx)(he.h,{before:Object(Te.jsx)(he.r,{children:Object(Te.jsx)(ge.a,{style:{marginRight:8,padding:0},fill:"var(--accent)"})}),description:"\u0428\u0430\u043f\u043a\u0430 \u0433\u0440\u0443\u043f\u043f\u044b",onClick:function(){t(),o.a.send("VKWebAppJoinGroup",{group_id:f}).then(console.log).catch(console.log)},children:"\u0412\u0441\u0442\u0443\u043f\u0438\u0442\u0435 \u0432 \u0433\u0440\u0443\u043f\u043f\u0443"}),"android"===n&&Object(Te.jsx)(he.h,{before:Object(Te.jsx)(he.r,{children:Object(Te.jsx)(xe.a,{style:{marginRight:8,padding:0},fill:"tan"})}),description:"\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u0441 \u0434\u043e\u043c. \u044d\u043a\u0440\u0430\u043d\u0430",onClick:function(){t(),o.a.send("VKWebAppAddToHomeScreen").then(console.log).catch(console.log)},children:"\u041d\u0430 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u044d\u043a\u0440\u0430\u043d"}),Object(Te.jsx)(he.h,{before:Object(Te.jsx)(he.r,{children:Object(Te.jsx)(ve.a,{style:{marginRight:8},fill:"teal"})}),description:"\u0414\u043e\u0441\u0442\u0443\u043f \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435",onClick:function(){t(),o.a.send("VKWebAppShare",{link:"https://vk.com/app7908078"}).then(console.log).catch(console.log)},children:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u0434\u0440\u0443\u0437\u044c\u044f\u043c"})]})}),Me=n(126),Be=(n(124),function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.navigation})).activeModal,n=Object(l.c)((function(e){return e.schedule})).lessonStats,r=Object(l.c)((function(e){return e.user})).user,c=Object(l.c)((function(e){return e.config})).currentUniver,s=function(){e(m(null))};return Object(Te.jsxs)(he.w,{activeModal:t,onClose:s,children:[Object(Te.jsx)(he.t,{id:"actions",header:"\u041d\u0435 \u0442\u0435\u0440\u044f\u0439\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435",subheader:"\u0422.\u043a. \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435, \u043d\u0430\u0439\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 \u043f\u043e\u0438\u0441\u043a \u0435\u0433\u043e \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f. \u041f\u043e\u044d\u0442\u043e\u043c\u0443, \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u043f\u043e\u0442\u0435\u0440\u044f\u0442\u044c \u0435\u0433\u043e, \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435 \u043b\u044e\u0431\u044b\u043c \u0443\u0434\u043e\u043c\u043d\u044b\u043c \u0441\u043f\u043e\u0441\u043e\u0431\u043e\u043c:",icon:Object(Te.jsx)(he.d,{size:72}),children:Object(Te.jsx)(Ge,{closeModal:s})}),Object(Te.jsxs)(he.u,{id:"stats",children:[Object(Te.jsx)(he.v,{right:Object(Te.jsx)(Me.a,{onClick:s,style:{marginRight:8}}),children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"}),n&&Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)(he.k,{children:Object(Te.jsx)(he.g,{children:Object(Te.jsx)(he.k,{children:n.title})})}),Object(Te.jsx)(he.k,{style:{paddingTop:"0px 12px"},children:c&&Object(Te.jsxs)(he.f,{level:"2",weight:"regular",style:{opacity:.5},children:["\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043d\u0435 \u0432\u043e\u0441\u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0439\u0442\u0435 \u0434\u0430\u043d\u043d\u0443\u044e \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443 \u0431\u0443\u043a\u0432\u0430\u043b\u044c\u043d\u043e! \u0422.\u043a. \u0434\u043b\u044f \u0440\u0430\u0441\u0447\u0435\u0442\u0430, \u043f\u0435\u0440\u0432\u044b\u043c \u0434\u043d\u0435\u043c \u043f\u0440\u0438\u043d\u044f\u0442 ",new Date(c.startDateStartOfWeek).toLocaleDateString(),", \u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u043c ",new Date(c.endDate).toLocaleDateString(),"."]})}),Object(Te.jsx)(he.k,{style:{padding:"0px 12px"},children:Object.entries(n.stats).map((function(e){var t=Object(V.a)(e,2),n=t[0],r=t[1],c=r.pass,s=r.total;if(0===s)return null;var i={lec:"\u041b\u0435\u043a\u0446\u0438\u044f",pr:"\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0430",lab:"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f"}[n];return Object(Te.jsxs)("div",{className:"stats__item",children:[Object(Te.jsxs)(he.q,{children:[i,Object(Te.jsxs)("span",{className:"stats__secondary",children:[c,"/",s]})]}),Object(Te.jsx)(he.C,{className:"stats__progress--".concat(n),style:{margin:"0px 12px 8px 12px"},value:c/s*100})]},n)}))}),Object(Te.jsxs)(he.k,{children:[Object(Te.jsx)(he.q,{children:"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438 / \u0433\u0440\u0443\u043f\u043f\u044b"}),n.fromWhoms.map((function(t){return Object(Te.jsx)(he.i,{onClick:function(){return n=t.href,e(E({univer:r.univer.code,tail:n})),void s();var n},children:t.title},t.href)}))]})]})]})]})}),Je=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.navigation})),n=t.activePanel,r=t.history,s=Object(l.c)((function(e){return e.user})),i=s.user,a=s.isUniverLoading,u=s.isScheduleLoading;c.a.useEffect((function(){document.body.setAttribute("scheme","space_gray");var t=window.location.search.slice(1).split("&").reduce((function(e,t){var n=t.split("="),r=Object(V.a)(n,2),c=r[0],s=r[1];return Object(fe.a)(Object(fe.a)({},e),{},Object(je.a)({},c.slice(3),"1"===s))}),{});e(Z(t))}),[]);var d=c.a.useState(null),j=Object(V.a)(d,2),f=j[0],g=j[1],x=function(e){g(e)};return c.a.useEffect((function(){i||function(){var t=Object(C.a)(S.a.mark((function t(){var n,r,c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.location.origin.includes("vk.com"),r=n?o.a.send("VKWebAppGetUserInfo"):new Promise((function(e){return e({id:0})})),t.next=4,r;case 4:c=t.sent,e(ae(c)),e(z()),e(ee(c.id)),e(J());case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[]),c.a.useEffect((function(){i&&(i.univer?e(X(i.univer)):e(X(null)))}),[i]),c.a.useEffect((function(){g(a||u?Object(Te.jsx)(he.D,{}):null)}),[a,u]),Object(Te.jsx)(he.j,{isWebView:!0,children:Object(Te.jsx)(he.c,{children:Object(Te.jsxs)(he.K,{popout:f,modal:Object(Te.jsx)(Be,{}),activePanel:n,history:r,children:[Object(Te.jsx)(Ee,{id:b}),Object(Te.jsx)(Ve,{id:O,setPopout:x}),Object(Te.jsx)(Ke,{id:p}),Object(Te.jsx)(Ie,{id:h,setPopout:x})]})})})};o.a.send("VKWebAppInit"),o.a.subscribe((function(e){"VKWebAppUpdateConfig"===e.detail.type&&document.body.setAttribute("scheme","space_gray")})),i.a.render(Object(Te.jsx)(l.a,{store:de,children:Object(Te.jsx)(Je,{})}),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.dd5ddcdb.chunk.js.map