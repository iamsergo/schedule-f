{"version":3,"sources":["constants.ts","store/slices/navigation.ts","api/schedule.ts","api/config.ts","api/user.ts","api/index.ts","api/qoute.ts","store/slices/schedule.ts","utils/index.ts","store/slices/config.ts","store/slices/user.ts","store/rootReducer.ts","store/index.ts","components/LessonRow/index.tsx","components/ScheduleBody/index.tsx","components/Qoute/index.tsx","panels/main/index.tsx","panels/schedule/index.tsx","panels/search/index.tsx","panels/settings/index.tsx","components/AppActions/index.tsx","components/ActionsModal/index.tsx","App.tsx","index.tsx"],"names":["BASE_URL","process","GROUP_ID","SCHEDULE_PANEL","MAIN_PANEL","SEARCH_PANEL","SETTINGS_PANEL","initialState","activePanel","history","activeModal","prevActivePanel","navigationSlice","createSlice","name","reducers","setActivePanel","state","action","payload","setActiveModal","actions","schedule","getSchedule","a","univer","tail","queryTail","URLSearchParams","toString","url","join","fetch","res","json","searchSchedule","q","config","getUniverList","getUser","id","user","updateUserUniver","univerId","options","method","headers","body","JSON","stringify","deleteUserUniver","api","updateUserSchedule","scheduleId","deleteUserSchedule","qoute","getQoute","Date","getTime","requestSchedule","createAsyncThunk","thunkAPI","href","getState","scheduleHistory","userSchedule","find","record","isUniq","data","requestSearchSchedule","scheduleSlice","isLoading","error","lessonStats","scheduleHistoryHrefs","isSearchLoading","searchError","searchedSchedules","scheduleHistoryBack","pop","currentScheduleHref","length","currentSchedule","clearScheduleHistory","clearSearchedSchedules","setLessonStats","setQ","extraReducers","builder","addCase","pending","rejected","message","meta","arg","fulfilled","push","getLessonsInDay","lessons","day","week","filter","lesson","inDay","inWeek","getFromWhomsList","lessonsMap","forEach","fromWhoms","fromWhom","Object","values","isCurrentWeek","now","range","start","end","requestQoute","requestConfigUnivers","configSlice","univerList","currentUniver","passDays","countDays","toEndDays","toEndPercent","currentDay","currentWeek","setCurrentUniver","dayId","getDay","getCurrentDay","weeks","weekType","getCurrentWeek","startDate","endDate","DAYS","Math","ceil","getDaysStats","setConfig","requestGetUser","requestUpdateUserUniver","requestDeleteUserUniver","requestUpdateUserSchedule","requestDeleteUserSchedule","userSlice","isLoaderShowing","isUniverLoading","isScheduleLoading","userData","setUserData","setIsLoaderShowing","rootReducer","combineReducers","navigation","store","configureStore","reducer","LessonRow","current","onGoToSchedule","getStats","className","time","map","i","type","typeTitle","place","onClick","subject","group","title","ScheduleBody","today","onGetStats","icon","style","color","j","lessonTime","timeString","split","s","startHours","startMinutes","setHours","endHours","endMinutes","isCurrentLesson","Qoute","React","useState","isOpen","setIsOpen","description","after","author","paddingTop","text","MainPanel","content","dispatch","useDispatch","useSelector","isUserLoading","userError","isConfigLoading","configError","goToSearchSchedule","goToSettings","goToSchedule","code","fromWhomsIsOpen","setFromWhomsIsOpen","weeksIsOpen","setWeeksIsOpen","timeLessonsIsOpen","setTimeLessonsIsOpen","userMessage","configMessage","stretched","univerContent","scheduleContent","univerInfoContent","subtitle","toLocaleDateString","margin","background","value","width","height","lessonsToday","todayString","disabled","fill","padding","weekEnd","rangeString","weekPassed","textDecoration","opacity","timeLessons","separator","left","WEEKS","SchedulePanel","their","my","setPopout","activeDay","setActiveDay","activeWeek","setActiveWeek","isDiffShowing","setIsDiffShowing","toggleDiffShowing","goToMain","saveSchedule","deleteSchedule","cardRef","useRef","ls","theirLesson","myLesson","b","dayEqual","lessonNumEqual","weekEqual","groupEqual","isIntersection","ref","slideIndex","onChange","d","_","stats","lec","pass","total","pr","lab","thisLessons","thisLessons0","l","thisLessons1","thisLessons2","weeks0Count","w","weeks1Count","nowMs","startMs","currentWeekIdx","findIndex","passedWeeks","slice","weeksPassed0Count","weeksPassed1Count","n","typeLesson","getStatsForLesson","marginTop","selected","before","marginRight","toggleScheduleItem","autoclose","popout","onClose","iosCloseItem","mode","transform","baseUrl","SearchPanel","searchRef","useEffect","window","setTimeout","focus","debQ","setDebQ","timeout","clearTimeout","textAlign","vertical","filled","getRef","placeholder","e","target","SettingsPanel","userUniverId","setUniver","header","top","bottom","size","AppActions","closeModal","platform","usePlatform","bridge","send","then","console","log","catch","group_id","link","ActionsModal","subheader","right","level","weight","startDateStartOfWeek","entries","isFirstLoading","App","document","setAttribute","location","search","reduce","queryParam","key","handleSetPopout","initApp","addToHomeScreenInfo","is_feature_supported","is_added_to_home_screen","is_favorite","is_member","openModal","isWebView","modal","subscribe","detail","scheme","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.00a8585d.chunk.js","sourcesContent":["export const BASE_URL = process.env.REACT_APP_BASE_URL\n\nexport const GROUP_ID = 198278031\n\nexport const SCHEDULE_PANEL = 'schedule'\nexport const MAIN_PANEL = 'main'\nexport const SEARCH_PANEL = 'search'\nexport const SETTINGS_PANEL = 'settings'","import { createSlice } from \"@reduxjs/toolkit\";\nimport { MAIN_PANEL } from \"../../constants\";\nimport { PanelType } from \"../../types\";\n\ntype NavigationState = {\n  activePanel: PanelType\n  prevActivePanel: PanelType\n  history: PanelType[]\n  activeModal: string | null\n}\n\nconst initialState: NavigationState = {\n  activePanel: MAIN_PANEL,\n  history: [MAIN_PANEL],\n  activeModal: null,\n  prevActivePanel: MAIN_PANEL,\n}\n\nconst navigationSlice = createSlice({\n  name: 'navigation',\n  initialState,\n  reducers: {\n    setActivePanel(state, action)\n    {\n      state.prevActivePanel = state.activePanel\n      state.activePanel = action.payload\n    },\n    setActiveModal(state, action)\n    {\n      state.activeModal = action.payload\n    }\n  },\n})\n\nexport const { setActivePanel, setActiveModal } = navigationSlice.actions\nexport default navigationSlice.reducer","import { BASE_URL } from \"../constants\"\nimport { HrefTitle, Schedule } from \"../types\"\n\nconst getSchedule = async ({\n  univer,\n  tail,\n} : {\n  univer: string,\n  tail: string,\n}): Promise<Schedule> => {\n  const queryTail = new URLSearchParams(`tail=${tail}`).toString()\n  const url = [BASE_URL, \"schedule\", univer].join(\"/\") + '?' + queryTail\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst searchSchedule = async ({\n  univer,\n  q,\n} : {\n  univer: string,\n  q: string,\n}) : Promise<HrefTitle[]> => {\n  const url = [ BASE_URL, 'schedule/search', univer, q, ].join('/')\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst schedule = {\n  getSchedule,\n  searchSchedule,\n}\n\nexport default schedule","import { BASE_URL } from \"../constants\"\nimport { Univer } from \"../types\"\n\nconst getUniverList = async (): Promise<Univer[]> => {\n  const url = [ BASE_URL, 'univers'].join('/')\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst config = {\n  getUniverList,\n}\n\nexport default config","import { BASE_URL } from \"../constants\"\nimport { User } from \"../types\"\n\nconst getUser = async (id: number): Promise<User> => {\n  const url = [ BASE_URL, 'users', id].join('/')\n  const res = await fetch(url)\n  const user = await res.json()\n\n  return user  \n}\n\nconst updateUserUniver = async ({\n  id, univerId,\n}: { id: number, univerId: number }): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'univer'].join('/')\n  const options = {\n    method: 'PUT',\n    headers: { 'Content-Type': 'application/json;charset=utf-8' },\n    body: JSON.stringify({univerId}),\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst deleteUserUniver = async (id: number): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'univer'].join('/')\n  const options = {\n    method: 'DELETE',\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst updateUserSchedule = async ({\n  id, scheduleId,\n}: { id: number, scheduleId: string }): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'schedule'].join('/')\n  const options = {\n    method: 'PUT',\n    headers: { 'Content-Type': 'application/json;charset=utf-8' },\n    body: JSON.stringify({scheduleId}),\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst deleteUserSchedule = async (id: number): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'schedule'].join('/')\n  const options = {\n    method: 'DELETE',\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst user = {\n  getUser,\n  updateUserSchedule,\n  deleteUserSchedule,\n  updateUserUniver,\n  deleteUserUniver,\n}\n\nexport default user","import schedule from './schedule'\nimport config from './config'\nimport user from './user'\nimport qoute from './qoute'\n\nconst api = {\n  schedule,\n  config,\n  user,\n  qoute,\n}\n\nexport default api","import { BASE_URL } from \"../constants\"\nimport { Qoute } from \"../types\"\n\nconst getQoute = async (): Promise<Qoute | null> => {\n  const url = [ BASE_URL, 'qoute', new Date().getTime()].join('/')\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst config = {\n  getQoute,\n}\n\nexport default config","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\"\nimport { HrefTitle, Schedule, Stats } from \"../../types\"\nimport api from \"../../api\"\nimport { RootState } from \"../rootReducer\"\n\ntype ScheduleHistoryRecord = {\n    id: string,\n    data: Schedule\n  }\n\ntype ScheduleState = {\n  isLoading: boolean\n  error: {\n    message: string,\n    payload: any,\n  } | null\n  schedule: Schedule | null\n  lessonStats: {\n    title: string\n    stats: Stats\n    fromWhoms: HrefTitle[]\n  } | null\n  scheduleHistory: ScheduleHistoryRecord[]\n  scheduleHistoryHrefs: string[]\n\n  q: string\n  isSearchLoading: boolean\n  searchError: {\n    message: string,\n    payload: any,\n  } | null\n  searchedSchedules: HrefTitle[]\n}\n\nexport const requestSchedule = createAsyncThunk(\n  'schedule/request',\n  async ({ univer, tail: href }: {\n    univer: string,\n    tail: string,\n  }, thunkAPI): Promise<{record: ScheduleHistoryRecord, isUniq: boolean }> => {\n    const state = (thunkAPI.getState() as RootState)\n    const scheduleHistory = state.schedule.scheduleHistory\n    const userSchedule = state.user.user?.schedule\n    \n    const schedule = scheduleHistory.find(schedule => schedule.id === href)\n    if(schedule)\n    {\n      return { record: schedule, isUniq: false}\n    }\n    else if(userSchedule && userSchedule.href === href)\n    {\n      return {\n        record: { id: href, data: userSchedule },\n        isUniq: true,\n      }\n    }\n    else\n    {\n      const schedule = await api.schedule.getSchedule({ univer, tail: href })\n      return {\n        record: { id: href, data: schedule },\n        isUniq: true,\n      }\n    }\n  }\n)\n\nexport const requestSearchSchedule = createAsyncThunk(\n  'schedule/search/request',\n  api.schedule.searchSchedule\n)\n\nconst initialState: ScheduleState = {\n  isLoading: false,\n  error: null,\n  schedule: null,\n  lessonStats: null,\n  scheduleHistory: [],\n  scheduleHistoryHrefs: [],\n\n  q: '',\n  isSearchLoading: false,\n  searchError: null,\n  searchedSchedules: [],\n}\n\nconst scheduleSlice = createSlice({\n  name: 'schedule',\n  initialState,\n  reducers: {\n    scheduleHistoryBack(state)\n    {\n      state.scheduleHistoryHrefs.pop()\n      const currentScheduleHref = state.scheduleHistoryHrefs[state.scheduleHistoryHrefs.length - 1]\n      if(currentScheduleHref)\n      {\n        const currentSchedule = state.scheduleHistory.find(schedule => schedule.id === currentScheduleHref)!\n        state.schedule = currentSchedule.data\n      }\n      else\n      {\n        state.schedule = null\n      }\n    },\n    clearScheduleHistory(state)\n    {\n      state.scheduleHistoryHrefs = []\n      state.schedule = null\n    },\n    clearSearchedSchedules(state)\n    {\n      state.searchedSchedules = []\n    },\n    setLessonStats(state,action)\n    {\n      state.lessonStats = action.payload\n    },\n    setQ(state, action)\n    {\n      state.q = action.payload\n    },\n  },\n  extraReducers(builder)\n  {\n    builder\n      .addCase(requestSchedule.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(requestSchedule.rejected, (state,action) => {\n        state.isLoading = false\n        state.error = {\n          message: 'Ошибка при запросе расписания :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestSchedule.fulfilled, (state,action) => {\n        state.isLoading = false\n        state.error = null\n\n        const { isUniq, record } = action.payload\n\n        if(isUniq)\n        {\n          state.scheduleHistory.push(record)\n        }\n\n        state.scheduleHistoryHrefs.push(record.id)\n        state.schedule = record.data\n      })\n\n      .addCase(requestSearchSchedule.pending, (state) => {\n        state.isSearchLoading = true\n        state.searchError = null\n      })\n      .addCase(requestSearchSchedule.rejected, (state,action) => {\n        state.isSearchLoading = false\n        state.searchError = {\n          message: 'Ошибка при запросе расписания :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestSearchSchedule.fulfilled, (state,action) => {\n        state.isSearchLoading = false\n        state.searchError = null\n        state.searchedSchedules = action.payload\n      })\n  },\n})\n\nexport const {\n  scheduleHistoryBack,\n  clearScheduleHistory,\n  clearSearchedSchedules,\n  setLessonStats,\n  setQ,\n} = scheduleSlice.actions\nexport default scheduleSlice.reducer","import { DayRange, HrefTitle, Lesson, Stats, Univer, WeekRange, WeekTypeRange } from \"../types\";\n\nexport const getLessonsInDay = (\n  lessons: Lesson[],\n  day: DayRange,\n  week: WeekRange\n): Lesson[] => {\n  return lessons.filter(lesson => {\n    const inDay = lesson.day === day\n    const inWeek = lesson.week === week || lesson.week === 2\n\n    return inDay && inWeek\n  })\n}\n\nexport const getFromWhomsList = (lessons: Lesson[]): HrefTitle[] => {\n  const lessonsMap: {\n    [key: string]: HrefTitle\n  } = {}\n  lessons.forEach(lesson => {\n    lesson.fromWhoms.forEach(fromWhom => {\n      if(!lessonsMap[fromWhom.href])\n      {\n        lessonsMap[fromWhom.href] = fromWhom\n      }\n    })\n  })\n\n  return Object.values(lessonsMap)\n}\n\nexport const getCurrentDay = (): DayRange => {\n  const dayId = new Date().getDay()\n\n  return (dayId > 0 ? dayId - 1 : dayId) as DayRange\n}\n\nexport const getDaysStats = (\n  startDate: number,\n  endDate: number,\n): {\n  passDays: number,\n  countDays: number,\n  toEndDays: number,\n} => {\n  const DAYS = 1000 * 60 * 60 * 24\n  const now = new Date().getTime()\n  const start = new Date(startDate).getTime()\n  const end = new Date(endDate).getTime()\n\n  const countDays = Math.ceil((end - start) / DAYS)\n  const passDays = Math.ceil((now - start) / DAYS)\n  const toEndDays = Math.ceil((end - now) / DAYS)\n\n  return { passDays: passDays < 0 ? 0 : passDays, countDays, toEndDays }\n}\n\nexport const isPassWeek = (weekEnd: number): boolean => {\n  const now = new Date().getTime()\n  return now > weekEnd\n}\n\nexport const isCurrentWeek = (week: WeekTypeRange): boolean => {\n  const now = new Date().getTime()\n  const [start,end] = week.range\n  return start <= now && now <= end\n}\n\nexport const getCurrentWeek = (weeks: WeekTypeRange[]): WeekRange => {\n  const currentWeek = weeks.find(week => isCurrentWeek(week))\n\n  if(!currentWeek) return 0\n\n  return currentWeek.weekType\n}\n\nexport const getDiff = (their: Lesson[], my: Lesson[]): Lesson[] => {\n  const isIntersection = (a: Lesson, b: Lesson) => {\n    const dayEqual = a.day === b.day\n    const lessonNumEqual = a.lesson === b.lesson\n    const weekEqual = a.week === b.week || a.week === 2 || b.week === 2\n    const groupEqual = a.group === b.group || a.group === 2 || b.group === 2\n\n    return dayEqual && lessonNumEqual && weekEqual && groupEqual\n  }\n\n  return their.filter(theirLesson => !my.find(myLesson => isIntersection(theirLesson, myLesson)))\n}\n\nexport const getStatsForLesson = ({\n  lesson,\n  lessons,\n  currentUniver,\n}: {\n  lesson: Lesson,\n  lessons: Lesson[],\n  currentUniver: Univer\n}): { stats: Stats, fromWhoms: HrefTitle[] } => {\n  const { subject, time } = lesson\n  const { weeks, startDate } = currentUniver\n\n  const stats: Stats = {\n    lec: {pass:0,total:0},\n    pr: {pass:0,total:0},\n    lab: {pass:0,total:0},\n  }\n\n  const thisLessons = lessons.filter(lesson => lesson.subject === subject)\n  const thisLessons0 = thisLessons.filter(l => l.week === 0)\n  const thisLessons1 = thisLessons.filter(l => l.week === 1)\n  const thisLessons2 = thisLessons.filter(l => l.week === 2)\n\n  const weeks0Count = weeks.filter(w => w.weekType === 0).length\n  const weeks1Count = weeks.filter(w => w.weekType === 1).length\n\n  stats.lec.total =\n    weeks0Count * thisLessons0.filter(l => l.type === 0).length +\n    weeks1Count * thisLessons1.filter(l => l.type === 0).length +\n    (weeks0Count + weeks1Count) * thisLessons2.filter(l => l.type === 0).length\n\n  stats.pr.total =\n    weeks0Count * thisLessons0.filter(l => l.type === 1).length +\n    weeks1Count * thisLessons1.filter(l => l.type === 1).length +\n    (weeks0Count + weeks1Count) * thisLessons2.filter(l => l.type === 1).length\n\n  stats.lab.total =\n    weeks0Count * thisLessons0.filter(l => l.type === 2).length +\n    weeks1Count * thisLessons1.filter(l => l.type === 2).length +\n    (weeks0Count + weeks1Count) * thisLessons2.filter(l => l.type === 2).length\n\n\n  const now = new Date()\n  const nowMs = now.getTime()\n  const startMs = new Date(startDate).getTime()\n\n  if(nowMs - startMs < 0)\n  {\n    return {\n      fromWhoms: getFromWhomsList(thisLessons),\n      stats: {\n        lec: {pass:0,total:stats.lec.total},\n        pr: {pass:0,total:stats.pr.total},\n        lab: {pass:0,total:stats.lab.total},\n      }\n    }\n  }\n\n  const currentWeekIdx = weeks.findIndex(w => {\n    const [start, end] = w.range\n    return start <= nowMs && nowMs <= end\n  })\n  const passedWeeks = weeks.slice(0, currentWeekIdx)\n\n  const weeksPassed0Count = passedWeeks.filter(w => w.weekType === 0).length\n  const weeksPassed1Count = passedWeeks.filter(w => w.weekType === 1).length\n\n  stats.lec.pass =\n    weeksPassed0Count * thisLessons0.filter(l => l.type === 0).length +\n    weeksPassed1Count * thisLessons1.filter(l => l.type === 0).length +\n    (weeks0Count + weeksPassed1Count) * thisLessons2.filter(l => l.type === 0).length\n\n  stats.pr.pass =\n    weeksPassed0Count * thisLessons0.filter(l => l.type === 1).length +\n    weeksPassed1Count * thisLessons1.filter(l => l.type === 1).length +\n    (weeksPassed0Count + weeksPassed1Count) * thisLessons2.filter(l => l.type === 1).length\n\n  stats.lab.pass =\n    weeksPassed0Count * thisLessons0.filter(l => l.type === 2).length +\n    weeksPassed1Count * thisLessons1.filter(l => l.type === 2).length +\n    (weeksPassed0Count + weeksPassed1Count) * thisLessons2.filter(l => l.type === 2).length\n\n\n  const currentWeek = weeks[currentWeekIdx]\n  if(currentWeek)\n  {\n    const d = now.getDay()\n    const currentDay = d === 0 ? 6 : d - 1\n    \n    const thisLessonsEarlier = thisLessons\n      .filter(lesson => {\n        if(lesson.week !== currentWeek.weekType && lesson.week !== 2) return false\n        if(lesson.day < currentDay) return true\n        if(lesson.day === currentDay)\n        {\n          const n = now.getTime()\n          const [start, end] = time\n  \n          const [startHours, startMinutes] = start.split(':').map(s=>+s)\n          const s = new Date(n).setHours(startHours, startMinutes)\n          if(s > n) return false\n  \n          const [endHours, endMinutes] = end.split(':').map(s=>+s)\n          const e = new Date(n).setHours(endHours, endMinutes)\n          if(n > e) return false\n  \n          return true\n        }\n        return false\n      })\n  \n    thisLessonsEarlier.forEach(lesson => {\n      const typeLesson = (['lec','pr','lab'][lesson.type]) as keyof Stats\n      stats[typeLesson].pass++\n    })\n  }\n\n  const fromWhoms = getFromWhomsList(thisLessons)\n\n  return { stats, fromWhoms }\n}\n\nexport const isCurrentLesson = (lessonTime: number[][]): boolean => {\n  const TEN_MINUTES = 10 * 60 * 1000\n  const now = new Date().getTime()\n\n  const [start, end] = lessonTime\n  \n  const [startHours, startMinutes] = start\n  const lessonStart = new Date().setHours(startHours, startMinutes) - TEN_MINUTES\n  if(lessonStart > now) return false\n\n  const [endHours, endMinutes] = end\n  const lessonEnd = new Date().setHours(endHours, endMinutes)\n  if(lessonEnd < now) return false\n\n  return true\n}","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport api from \"../../api\";\nimport { DayRange, Qoute, Univer, WeekRange } from \"../../types\";\nimport { getCurrentDay, getCurrentWeek, getDaysStats } from \"../../utils\";\n\ntype ConfigState = {\n  isLoading: boolean\n  error: {\n    message: string\n    payload: any\n  } | null\n  univerList: Univer[]\n  currentUniver: Univer | null\n  \n  passDays: number\n  countDays: number\n  toEndDays: number\n  toEndPercent: number\n  currentDay: DayRange\n  currentWeek: WeekRange\n  config: { [key:string]: boolean }\n\n  qoute: Qoute | null\n}\n\nconst initialState: ConfigState = {\n  isLoading: false,\n  error: null,\n  univerList: [],\n  currentUniver: null,\n\n  passDays: 0,\n  countDays: 0,\n  toEndDays: 0,\n  toEndPercent: 0,\n  currentDay: 0,\n  currentWeek: 0,\n  config: {},\n\n  qoute: null,\n}\n\nexport const requestQoute = createAsyncThunk(\n  'qoute/request',\n  api.qoute.getQoute,\n)\n\nexport const requestConfigUnivers = createAsyncThunk(\n  'config/univers',\n  api.config.getUniverList\n)\n\nconst configSlice = createSlice({\n  name: 'config',\n  initialState,\n  reducers: {\n    setCurrentUniver(state, action)\n    {\n      let currentUniver = action.payload\n      if(!currentUniver)\n      {\n        state.currentUniver = null\n        return\n      }\n      \n      currentUniver = state.univerList.find(univer => univer.id === currentUniver.id)\n      state.currentUniver = currentUniver\n      state.currentDay = getCurrentDay()\n      state.currentWeek = getCurrentWeek(currentUniver.weeks)\n\n      const { passDays, countDays, toEndDays } = getDaysStats(\n        currentUniver.startDate,\n        currentUniver.endDate,\n      )\n      state.countDays = countDays\n      state.passDays = passDays\n      state.toEndDays = toEndDays\n      state.toEndPercent = passDays / countDays * 100\n    },\n    setConfig(state,action)\n    {\n      state.config = action.payload\n    },\n  },\n  extraReducers(builder)\n  {\n    builder\n      .addCase(requestConfigUnivers.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(requestConfigUnivers.rejected, (state,action) => {\n        state.isLoading = false\n        state.error = {\n          message: 'Ошибка при запросе университетов :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestConfigUnivers.fulfilled, (state,action) => {\n        state.isLoading = false\n        state.error = null\n        state.univerList = action.payload\n      })\n\n      .addCase(requestQoute.pending, state => {\n        state.isLoading = true\n      })\n      .addCase(requestQoute.fulfilled, (state, action) => {\n        state.isLoading = false\n        state.qoute = action.payload as Qoute | null\n      })\n  },\n})\n\nexport const { setCurrentUniver, setConfig } = configSlice.actions\nexport default configSlice.reducer","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport api from \"../../api\";\nimport { User, UserData } from \"../../types\";\n\ntype ConfigState = {\n  isLoading: boolean\n  isUniverLoading: boolean\n  isScheduleLoading: boolean\n  error: {\n    message: string\n    payload: any\n  } | null\n  user: User | null\n  userData: UserData | null\n  isLoaderShowing: boolean\n}\n\nconst initialState: ConfigState = {\n  isLoading: false,\n  isLoaderShowing: true,\n  isUniverLoading: false,\n  isScheduleLoading: false,\n  error: null,\n  user: null,\n  userData: null,\n}\n\nexport const requestGetUser = createAsyncThunk(\n  'user/request',\n  api.user.getUser\n)\n\nexport const requestUpdateUserUniver = createAsyncThunk(\n  'user/update/univer',\n  api.user.updateUserUniver\n)\n\nexport const requestDeleteUserUniver = createAsyncThunk(\n  'user/delete/univer',\n  api.user.deleteUserUniver\n)\n\nexport const requestUpdateUserSchedule = createAsyncThunk(\n  'user/update/schedule',\n  api.user.updateUserSchedule\n)\n\nexport const requestDeleteUserSchedule = createAsyncThunk(\n  'user/delete/schedule',\n  api.user.deleteUserSchedule\n)\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setUserData(state, action)\n    {\n      state.userData = action.payload\n    },\n    setIsLoaderShowing(state, action)\n    {\n      state.isLoaderShowing = action.payload\n    },\n  },\n  extraReducers(builder)\n  {\n    builder\n      .addCase(requestGetUser.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(requestGetUser.rejected, (state,action) => {\n        state.isLoading = false\n        state.error = {\n          message: 'Произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestGetUser.fulfilled, (state,action) => {\n        state.isLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestUpdateUserUniver.pending, (state) => {\n        state.isUniverLoading = true\n        state.error = null\n      })\n      .addCase(requestUpdateUserUniver.rejected, (state,action) => {\n        state.isUniverLoading = false\n        state.error = {\n          message: 'При обновлении университета произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestUpdateUserUniver.fulfilled, (state,action) => {\n        state.isUniverLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestDeleteUserUniver.pending, (state) => {\n        state.isUniverLoading = true\n        state.error = null\n      })\n      .addCase(requestDeleteUserUniver.rejected, (state,action) => {\n        state.isUniverLoading = false\n        state.error = {\n          message: 'При обновлении университета произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestDeleteUserUniver.fulfilled, (state,action) => {\n        state.isUniverLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestUpdateUserSchedule.pending, (state) => {\n        state.isScheduleLoading = true\n        state.error = null\n      })\n      .addCase(requestUpdateUserSchedule.rejected, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = {\n          message: 'При обновлении расписания произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestUpdateUserSchedule.fulfilled, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestDeleteUserSchedule.pending, (state) => {\n        state.isScheduleLoading = true\n        state.error = null\n      })\n      .addCase(requestDeleteUserSchedule.rejected, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = {\n          message: 'При обновлении расписания произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestDeleteUserSchedule.fulfilled, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n  },\n})\n\nexport const { setUserData, setIsLoaderShowing } = userSlice.actions\nexport default userSlice.reducer","import { combineReducers } from \"@reduxjs/toolkit\"\n\nimport navigation from './slices/navigation'\nimport schedule from './slices/schedule'\nimport config from './slices/config'\nimport user from './slices/user'\n\nconst rootReducer = combineReducers({\n  navigation,\n  schedule,\n  config,\n  user,\n})\n\nexport type RootState = ReturnType<typeof rootReducer>\nexport default rootReducer","import { configureStore } from \"@reduxjs/toolkit\"\nimport { useDispatch } from \"react-redux\"\n\nimport rootReducer from './rootReducer'\n\nconst store = configureStore({ reducer : rootReducer })\n\nexport const useAppDispatch = () => useDispatch<typeof store.dispatch>()\nexport default store","import React from 'react'\nimport { Lesson } from '../../types'\nimport './LessonRow.sass'\n\ntype LessonRowProps = {\n  current: boolean\n  lesson: Lesson\n  onGoToSchedule: (href: string) => void\n  getStats?: () => void\n}\n\nconst LessonRow: React.FC<LessonRowProps> = ({\n  current,\n  lesson,\n  onGoToSchedule,\n  getStats,\n}) => {\n  return (\n    <div className={`lesson-row${current ? ' lesson-row--current' : ''}`}>\n      <div className=\"lesson-row__time\">\n        {lesson.time.map((time, i) => {\n          return <div\n            key={time}\n            className={`lesson-row__time-item lesson-row__time-item--${i === 0 ? 'start' : 'end'}`}\n          >{time}</div>\n        })}\n      </div>\n      <div className={`lesson-row__body lesson-row__body--${lesson.type}`}>\n        {lesson.typeTitle &&\n          <div className=\"lesson-row__place\">\n            <span className={`lesson-row__type-title--${lesson.type}`}>\n              {lesson.typeTitle}\n            </span>\n            {lesson.place}\n          </div>\n        }\n        <div onClick={() => getStats && getStats()} className=\"lesson-row__subject\">\n          {lesson.subject} {lesson.group !== 2 && `(${lesson.group+1}гр.)`}\n        </div>\n        <div className=\"lesson-row__fromWhoms\">\n          {lesson.fromWhoms.map(fromWhom => {\n            return <div\n              key={fromWhom.href}\n              className={`lesson-row__fromWhoms-item${!fromWhom.href ? '' : ' link'}`}\n              onClick={() => fromWhom.href && onGoToSchedule(fromWhom.href)}\n            >{fromWhom.title}</div>\n          })}\n        </div>\n      </div>\n      <div className=\"lesson-row__after\"></div>\n    </div>\n  )\n}\n\nexport default LessonRow","import React from 'react'\nimport { Icon56GhostOutline } from '@vkontakte/icons'\nimport { Card, Placeholder } from '@vkontakte/vkui'\nimport { Lesson } from '../../types'\nimport LessonRow from '../LessonRow'\nimport { isCurrentLesson } from '../../utils'\n\ntype ScheduleBodyProps = {\n  today: boolean\n  lessons: Lesson[]\n  onGoToSchedule: (href: string) => void\n  onGetStats?: (lesson: Lesson) => void\n}\n\nconst ScheduleBody: React.FC<ScheduleBodyProps> = ({\n  today,\n  lessons,\n  onGoToSchedule,\n  onGetStats,\n}) => {\n  return (\n    <Card className=\"schedule__body\">\n      {lessons.length === 0\n        ? <Placeholder\n            className=\"schedule__empty-placeholder\"\n            icon={<Icon56GhostOutline style={{color:\"teal\"}}/>}\n          >Ничего нет</Placeholder>\n        : lessons.map((lesson, j) => {\n            const lessonTime = lesson.time.map(timeString => timeString.split(':').map(s=>+s))\n            const current = today && isCurrentLesson(lessonTime)\n\n            return <LessonRow\n              key={j}\n              lesson={lesson}\n              onGoToSchedule={onGoToSchedule}\n              current={current}\n              getStats={() => onGetStats && onGetStats(lesson)}\n            />\n          })}\n    </Card>\n  )\n}\n\nexport default ScheduleBody","import React from 'react'\nimport { Icon28ChevronDownOutline, Icon28ChevronUpOutline, Icon28Like, Icon28LikeOutline } from '@vkontakte/icons'\nimport { Avatar, Card, Cell, Div, IconButton } from '@vkontakte/vkui'\nimport { Qoute as QouteType } from '../../types'\n\ntype QouteProps = {\n  qoute: QouteType\n}\n\nconst Qoute: React.FC<QouteProps> = ({\n  qoute,\n}) => {\n  const [isOpen, setIsOpen] = React.useState(false)\n\n  return (\n    <Div>\n      <Card>\n        <Cell\n          onClick={()=>setIsOpen(!isOpen)}\n          description=\"Цитата дня\"\n          after={!isOpen ? <Icon28ChevronDownOutline/> : <Icon28ChevronUpOutline/>}\n        >{qoute.author}</Cell>\n        {isOpen && <Div style={{paddingTop:4}}>{qoute.text}</Div>}\n      </Card>\n    </Div>\n  )\n}\n\nexport default Qoute","import React from 'react'\nimport {\n  Button,\n  Card,\n  Cell,\n  CellButton,\n  Div,\n  Header,\n  IconButton,\n  Panel,\n  PanelHeader,\n  Placeholder,\n  Progress,\n  Separator,\n  Spinner,\n} from '@vkontakte/vkui'\nimport {\n  Icon28Search,\n  Icon28SettingsOutline,\n  Icon28ChevronDownOutline,\n  Icon28ChevronUpOutline,\n  Icon28DeleteOutline,\n  Icon28AddOutline,\n  Icon28EducationOutline,\n  Icon28ArrowUpOutline,\n  Icon28ArrowDownOutline,\n  \n} from '@vkontakte/icons';\nimport { PanelProps } from '../../types'\nimport { useSelector } from 'react-redux';\nimport { setActivePanel } from '../../store/slices/navigation';\nimport { SCHEDULE_PANEL, SEARCH_PANEL, SETTINGS_PANEL } from '../../constants';\nimport { requestDeleteUserSchedule, requestGetUser, setIsLoaderShowing } from '../../store/slices/user';\nimport { requestConfigUnivers } from '../../store/slices/config';\nimport { RootState } from '../../store/rootReducer';\nimport { getFromWhomsList, getLessonsInDay, isCurrentWeek, isPassWeek } from '../../utils';\nimport { requestSchedule } from '../../store/slices/schedule';\nimport ScheduleBody from '../../components/ScheduleBody';\nimport { useAppDispatch } from '../../store';\nimport Qoute from '../../components/Qoute';\n\nconst MainPanel: React.FC<PanelProps> = ({\n  id,\n}) => {\n  const dispatch = useAppDispatch()\n  const {\n    user,\n    isLoading: isUserLoading,\n    error: userError,\n  } = useSelector((s: RootState) => s.user)\n  const {\n    currentUniver,\n    currentWeek,\n    currentDay,\n    toEndDays,\n    toEndPercent,\n    isLoading: isConfigLoading,\n    error: configError,\n    qoute,\n  } = useSelector((s: RootState) => s.config)\n\n  const goToSearchSchedule = () => {\n    dispatch(setActivePanel(SEARCH_PANEL))\n  }\n\n  const goToSettings = () => {\n    dispatch(setActivePanel(SETTINGS_PANEL))\n  }\n\n  const goToSchedule = (tail: string) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail,\n    }))\n    dispatch(setActivePanel(SCHEDULE_PANEL))\n  }\n\n  const deleteSchedule = () => {\n    dispatch(requestDeleteUserSchedule(user!.id))\n  }\n\n  const tryAgain = () => {\n    if(userError && user)\n    {\n      dispatch(requestGetUser(user.id))\n    }\n    if(configError)\n    {\n      dispatch(requestConfigUnivers())\n    }\n  }\n\n  const [fromWhomsIsOpen, setFromWhomsIsOpen] = React.useState(false)\n  const toggleFromWhoms = () => {\n    setFromWhomsIsOpen(!fromWhomsIsOpen)\n  }\n\n  const [weeksIsOpen, setWeeksIsOpen] = React.useState(false)\n  const toggleWeeks = () => {\n    setWeeksIsOpen(!weeksIsOpen)\n  }\n\n  const [timeLessonsIsOpen, setTimeLessonsIsOpen] = React.useState(false)\n  const toggleTimeLessons = () => {\n    setTimeLessonsIsOpen(!timeLessonsIsOpen)\n  }\n\n  let content\n  if(isUserLoading || isConfigLoading)\n  {\n    content = <Spinner style={{paddingTop:'20vh'}} />\n  }\n  else if(userError || configError)\n  {\n    const userMessage = userError && userError.message\n    const configMessage = configError && configError.message\n\n    content = (\n      <Placeholder\n        stretched\n        action={\n          <Button onClick={tryAgain}>Повторить</Button>\n        }\n      >{userMessage}<br/>{configMessage}</Placeholder>\n    )\n  }\n  else if(user)\n  {\n    let univerContent\n    if(user.univer && currentUniver)\n    {\n      univerContent = (<>\n        {qoute && <>\n          <Qoute qoute={qoute} />\n          <Separator/>\n        </>}\n\n        <Div>\n          <Card>\n            <Header\n              subtitle={`До конца семестра ${toEndDays} дн. (${new Date(currentUniver.endDate).toLocaleDateString()})`}\n            >{currentWeek ? 'Числитель(четная)' : 'Знаменатель(нечетная)'}</Header>\n            <Progress\n              style={{margin: '0px 12px', background: 'gray'}}\n              value={toEndPercent}\n            />\n            <br />\n            <Separator />\n\n            <Cell\n              after={<Icon28Search/>}\n              onClick={goToSearchSchedule}\n            >Искать расписание</Cell>\n          </Card>\n        </Div>\n      </>)\n    }\n\n    if(!user.univer)\n    {\n      univerContent = (\n        <Placeholder\n          stretched\n          icon={<Icon28EducationOutline width={64} height={64}/>}\n          action={<Button onClick={goToSettings}>Выбрать</Button>}\n        >Выберите университет, чтобы пользоваться приложением</Placeholder>\n      )\n    }\n\n    let scheduleContent\n    if(user.schedule)\n    {\n      const lessonsToday = getLessonsInDay(user.schedule.lessons, currentDay, currentWeek)\n      const DAYS = ['Понедельник','Вторник','Среда','Четверг','Пятница','Суббота']\n      const todayString = `${DAYS[currentDay]}, ${new Date().toLocaleDateString()}`\n\n      scheduleContent = (<>\n        <Div style={{paddingTop:0}}>\n          <Card>\n            <Cell\n              disabled\n              after={\n                <IconButton>\n                  <Icon28DeleteOutline fill=\"tomato\" onClick={deleteSchedule}/>\n                </IconButton>\n              }\n            >{user.schedule.title}</Cell>\n            <Separator/>\n\n            <Header subtitle={todayString}>\n              Расписание на сегодня\n            </Header>\n            <div style={{padding:'0px 8px'}}>\n              <ScheduleBody today lessons={lessonsToday} onGoToSchedule={goToSchedule} />\n            </div>\n            <br/><Separator/>\n            \n            <CellButton\n              onClick={() => goToSchedule(user.schedule!.href)}\n            >Полное расписание</CellButton>\n          </Card>\n        </Div>\n        <Div style={{paddingTop:0}}>\n          <Card>\n            <Cell\n              onClick={toggleFromWhoms}\n              after={!fromWhomsIsOpen ? <Icon28ChevronDownOutline /> : <Icon28ChevronUpOutline/>}\n            >Преподаватели/Группы</Cell>\n            {fromWhomsIsOpen && getFromWhomsList(user.schedule.lessons).map(fromWhom => {\n              return <CellButton\n                key={fromWhom.href}\n                onClick={() => goToSchedule(fromWhom.href)}\n              >{fromWhom.title}</CellButton>\n            })}\n          </Card>\n        </Div>\n      </>)\n    }\n    \n    if(user.univer && !user.schedule)\n    {\n      scheduleContent = (\n        <Div style={{paddingTop:0}}>\n          <Card>\n            <Cell\n              after={<Icon28AddOutline fill=\"orange\"/>}\n              onClick={goToSearchSchedule}\n            >Расписание не выбрано</Cell>\n          </Card>\n        </Div>\n      )\n    }\n\n    let univerInfoContent\n    if(currentUniver)\n    {\n      univerInfoContent = (<>\n        <Separator/>\n        <Div>\n          <Card>\n            <Cell\n              onClick={toggleWeeks}\n              after={!weeksIsOpen ? <Icon28ChevronDownOutline /> : <Icon28ChevronUpOutline/>}\n            >Учебные недели</Cell>\n            {weeksIsOpen && <Separator/>}\n            {weeksIsOpen && currentUniver.weeks.map((week, i) => {\n              const startRangString = new Date(week.range[0]).toLocaleDateString()\n              const endRangeString = new Date(week.range[1]).toLocaleDateString()\n              const rangeString = startRangString + ' - ' + endRangeString\n              \n              const weekPassed = isPassWeek(week.range[1])\n\n              return <Cell\n                key={i}\n                disabled\n                description={rangeString}\n                after={\n                  week.weekType === 0\n                    ? <Icon28ArrowUpOutline fill={isCurrentWeek(week) ? 'tomato' : 'teal'}/>\n                    : <Icon28ArrowDownOutline fill={isCurrentWeek(week) ? 'tomato' : 'violet'}/>\n                }\n              >\n                <span style={{\n                  textDecoration: weekPassed ? 'line-through': 'none',\n                  opacity: weekPassed ? 0.5 : 1,\n                  color: isCurrentWeek(week) ? 'tomato' : '',\n                }}>\n                  {week.weekType === 0?'Числитель(четная)' : 'Знаменатель(нечетная)'}\n                </span>\n              </Cell>\n            })}\n          </Card>\n        </Div>\n        <Div style={{paddingTop:0}}>\n          <Card>\n            <Cell\n              onClick={toggleTimeLessons}\n              after={!timeLessonsIsOpen ? <Icon28ChevronDownOutline /> : <Icon28ChevronUpOutline/>}\n            >Время занятий</Cell>\n            {timeLessonsIsOpen && <Separator/>}\n            {timeLessonsIsOpen && currentUniver.timeLessons.map((time, i) => {\n              return <Cell\n                key={i}\n                disabled\n                description={`${i+1} пара`}\n              >{time}</Cell>\n            })}\n          </Card>\n        </Div>\n      </>)\n    }\n\n    content = (<>\n      {univerContent}\n      {scheduleContent}\n      {univerInfoContent}\n    </>)\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={!(isUserLoading || isConfigLoading) && user?.univer && <Icon28SettingsOutline onClick={goToSettings}/>}\n      />\n      {content}\n    </Panel>\n  )\n}\n\nexport default MainPanel","import React from 'react'\nimport {\n  ActionSheet,\n  ActionSheetItem,\n  Button,\n  Card,\n  Div,\n  Gallery,\n  IconButton,\n  Link,\n  Panel,\n  PanelHeader,\n  Placeholder,\n  SimpleCell,\n  Spinner,\n  Tabs,\n  TabsItem,\n} from '@vkontakte/vkui'\nimport {\n  Icon28ArrowUturnLeftOutline,\n  Icon28HomeOutline,\n  Icon28MoreVertical,\n  Icon28DeleteOutline,\n  Icon28SortHorizontalOutline,\n  Icon28Users3Outline,\n  Icon28FavoriteCircleFillYellow,\n} from '@vkontakte/icons';\nimport { useDispatch, useSelector } from 'react-redux'\nimport { RootState } from '../../store/rootReducer'\nimport { DayRange, Lesson, PanelProps, WeekRange } from '../../types'\nimport { getDiff, getLessonsInDay, getStatsForLesson } from '../../utils'\nimport { clearScheduleHistory, requestSchedule, scheduleHistoryBack, setLessonStats } from '../../store/slices/schedule';\nimport { setActiveModal, setActivePanel } from '../../store/slices/navigation';\nimport { MAIN_PANEL, SEARCH_PANEL } from '../../constants';\nimport { requestDeleteUserSchedule, requestUpdateUserSchedule } from '../../store/slices/user';\nimport ScheduleBody from '../../components/ScheduleBody';\nimport './Schedule.sass'\n\nconst DAYS = [\n  { id: 0, title: 'ПН' },\n  { id: 1, title: 'ВТ' },\n  { id: 2, title: 'СР' },\n  { id: 3, title: 'ЧТ' },\n  { id: 4, title: 'ПТ' },\n  { id: 5, title: 'СБ' },\n]\nconst WEEKS = [\n  { id: 0, title: 'Числитель ∧'},\n  { id: 1, title: 'Знаменатель ∨'},\n]\n\nconst SchedulePanel: React.FC<PanelProps> = ({\n  id,\n  setPopout,\n}) => {\n  const dispatch = useDispatch()\n  const { isLoading, error, schedule, scheduleHistoryHrefs, } = useSelector((s: RootState) => s.schedule)\n  const { user } = useSelector((s: RootState) => s.user)\n  const { currentUniver, currentDay, currentWeek } = useSelector((s: RootState) => s.config)\n  const { prevActivePanel } = useSelector((s: RootState) => s.navigation)\n\n  const [activeDay, setActiveDay] = React.useState<DayRange>(currentDay)\n  const [activeWeek, setActiveWeek] = React.useState<WeekRange>(currentWeek)\n\n  const [isDiffShowing, setIsDiffShowing] = React.useState(false)\n  const toggleDiffShowing = () => {\n    setIsDiffShowing(!isDiffShowing)\n  }\n\n  const goToMain = () => {\n    dispatch(setActivePanel(MAIN_PANEL))\n    dispatch(clearScheduleHistory())\n  }\n\n  const goToSearch = () => {\n    dispatch(setActivePanel(SEARCH_PANEL))\n    dispatch(clearScheduleHistory())\n  }\n\n  const goBack = () => {\n    if(scheduleHistoryHrefs.length === 1)\n    {\n      if(prevActivePanel === SEARCH_PANEL) goToSearch()\n      else goToMain()\n    }\n    else\n    {\n      dispatch(scheduleHistoryBack())\n      setIsDiffShowing(false)\n    }\n  }\n\n  const saveSchedule = () => {\n    setIsDiffShowing(false)\n    dispatch(requestUpdateUserSchedule({\n      id: user!.id,\n      scheduleId: schedule!.href,\n    }))\n  }\n\n  const deleteSchedule = () => {\n    setIsDiffShowing(false)\n    dispatch(requestDeleteUserSchedule(user!.id))\n  }\n\n  const showActions = () => {\n    let toggleScheduleItem =\n      user!.schedule && user!.schedule.href === schedule!.href\n        ? <ActionSheetItem\n            autoclose\n            style={{color: 'tomato'}}\n            onClick={deleteSchedule}\n            before={<Icon28DeleteOutline fill=\"tomato\"/>}\n          >Удалить расписание</ActionSheetItem>\n        : <ActionSheetItem\n            autoclose\n            onClick={saveSchedule}\n            before={<Icon28FavoriteCircleFillYellow/>}\n            subtitle={user!.schedule?'вместо текущего':''}\n          >Сохранить расписание</ActionSheetItem>\n\n    const popout = (\n      <ActionSheet\n        onClose={() => setPopout!(null)}\n        iosCloseItem={\n          <ActionSheetItem autoclose mode=\"cancel\">\n            Отменить\n          </ActionSheetItem>\n        }\n      >\n        {false &&\n          <ActionSheetItem\n            autoclose\n            style={{color:'tan'}}\n            before={<Icon28Users3Outline fill=\"tan\"/>}\n            onClick={()=>{}}\n          >Экзамены</ActionSheetItem>\n        }\n        {user!.schedule && !(user!.schedule.href === schedule!.href) &&\n          <ActionSheetItem\n            autoclose\n            style={{color:'teal'}}\n            before={\n              <Icon28SortHorizontalOutline\n                fill={isDiffShowing?'tomato':'orange'}\n                style={{transform:`rotateY(${isDiffShowing?0:180}deg)`}}\n              />\n            }\n            subtitle={\n              isDiffShowing\n                ? 'Все занятия данного расписания'\n                : 'Занятия вне вашего расписания'\n              }\n            onClick={toggleDiffShowing}\n          >\n            {isDiffShowing ? 'Расписание без разницы' : 'Разница расписаний'}\n          </ActionSheetItem>\n        }\n        {toggleScheduleItem}\n      </ActionSheet>\n    )\n    setPopout!(popout)\n  }\n\n  const goToSchedule = (tail: string) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail,\n    }))\n    setIsDiffShowing(false)\n  }\n\n  const cardRef = React.useRef<HTMLDivElement>(null)\n\n  let content\n  if(isLoading)\n  {\n    content = <Spinner />\n  }\n  else if(error)\n  {\n    content = <Placeholder\n      stretched\n      action={\n        <Button onClick={() => {\n          dispatch(requestSchedule(error.payload))\n        }}>Повторить</Button>}\n    >{error.message}</Placeholder>\n  }\n  else if(schedule)\n  {\n    const ls = isDiffShowing ? getDiff(schedule.lessons, user!.schedule!.lessons) : schedule.lessons\n\n    content = ( <>      \n      <div className=\"schedule__card\" ref={cardRef}>\n        <Gallery\n          style={{height:'100%'}}\n          slideIndex={activeDay}\n          onChange={d => setActiveDay(d as DayRange)}\n        >\n          {DAYS.map((_,i) => {\n            const lessons = getLessonsInDay(ls, i as DayRange, activeWeek)\n\n            return <ScheduleBody\n              key={i}\n              today={activeDay === currentDay && activeWeek === currentWeek}\n              lessons={lessons}\n              onGoToSchedule={goToSchedule}\n              onGetStats={(lesson: Lesson) => {\n                const { stats, fromWhoms } = getStatsForLesson({\n                  lesson,\n                  lessons: schedule.lessons,\n                  currentUniver: currentUniver!,\n                })\n                dispatch(setLessonStats({\n                  title: lesson.subject,\n                  stats,\n                  fromWhoms,\n                }))\n                dispatch(setActiveModal('stats'))\n              }}\n            />\n          })}\n        </Gallery>\n      </div>\n\n      <Card style={{marginTop:8}}>\n        <Tabs>\n          {WEEKS.map(week => {\n            return <TabsItem\n              key={week.id}\n              selected={week.id === activeWeek}\n              onClick={() => setActiveWeek(week.id as WeekRange)}\n              style={{color: currentWeek === week.id ? 'tomato': ''}}\n            >{week.title}</TabsItem>\n          })}\n        </Tabs>\n        <Tabs>\n          {DAYS.map(day => {\n            return <TabsItem\n              key={day.id}\n              selected={day.id === activeDay}\n              onClick={() => setActiveDay(day.id as DayRange)}\n              style={{color: currentDay === day.id ? 'tomato': ''}}\n            >{day.title}</TabsItem>\n          })}\n        </Tabs>\n        <SimpleCell\n          disabled\n          before={\n            <IconButton>\n              <Icon28ArrowUturnLeftOutline onClick={goBack} width={20} style={{marginRight: 12, color:'teal'}}/>\n            </IconButton>\n          }\n          after={\n            <IconButton>\n              <Icon28MoreVertical onClick={showActions} width={20} style={{color:'violet'}}/>\n            </IconButton>\n          }\n        >\n          <Link href={`${user!.univer!.baseUrl}${schedule.href}`}>\n            {schedule.title}\n          </Link>\n          {isDiffShowing &&\n            <Icon28SortHorizontalOutline className=\"schedule__icon--diff\"/>\n          }\n          {user?.schedule && user.schedule.href === schedule.href &&\n            <Icon28FavoriteCircleFillYellow className=\"schedule__icon--fav\"/>\n          }\n        </SimpleCell>\n      </Card>\n    </>)\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={\n          <Icon28HomeOutline onClick={goToMain} />\n        }\n      />\n      <Div className=\"schedule__wrapper\">\n        {content}\n      </Div>\n    </Panel>\n  )\n}\n\nexport default SchedulePanel","import React, { ChangeEvent } from 'react'\nimport {\n  CellButton,\n  Div,\n  FixedLayout,\n  Panel,\n  PanelHeader,\n  PanelHeaderBack,\n  Placeholder,\n  Search,\n  Spinner,\n} from '@vkontakte/vkui'\nimport { Icon56GhostOutline } from '@vkontakte/icons'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { MAIN_PANEL, SCHEDULE_PANEL } from '../../constants'\nimport { RootState } from '../../store/rootReducer'\nimport { setActivePanel } from '../../store/slices/navigation'\nimport { clearSearchedSchedules, requestSchedule, requestSearchSchedule, setQ } from '../../store/slices/schedule'\nimport { HrefTitle, PanelProps } from '../../types'\n\nconst SearchPanel: React.FC<PanelProps> = ({\n  id,\n}) => {\n  const dispatch = useDispatch()\n  const { isSearchLoading, searchedSchedules, q } = useSelector((s: RootState) => s.schedule)\n  const { user } = useSelector((s: RootState) => s.user)\n\n  const handleQChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const q = e.target.value\n\n    dispatch(setQ(q))\n    if(!q)\n    {\n      dispatch(clearSearchedSchedules())\n    }\n  }\n\n  const searchRef = React.useRef<HTMLInputElement>(null)\n  React.useEffect(() => {\n    window.setTimeout(() => {\n      searchRef.current && searchRef.current.focus()\n    },100)\n  },[])\n\n  const [debQ, setDebQ] = React.useState(q)\n  React.useEffect(() => {\n    const timeout = window.setTimeout(() => {\n      setDebQ(q)\n    }, 500)\n\n    return () => {\n      window.clearTimeout(timeout)\n    }\n  }, [q])\n\n  React.useEffect(() => {\n    if(debQ && searchedSchedules.length === 0)\n    {\n      dispatch(requestSearchSchedule({\n        univer: user!.univer!.code,\n        q: debQ,\n      }))\n    }\n  }, [debQ])\n\n  const goToMainPanel = () => {\n    dispatch(setActivePanel(MAIN_PANEL))\n  }\n\n  const goToSchedule = (schedule: HrefTitle) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail: schedule.href,\n    }))\n    dispatch(setActivePanel(SCHEDULE_PANEL))\n  }\n\n  let content\n\n  if(isSearchLoading)\n  {\n    content = <Spinner />\n  }\n  else if(searchedSchedules.length === 0)\n  {\n    content = <Placeholder\n      icon={<Icon56GhostOutline style={{color:\"teal\"}} />}\n    >Ничего не найдено</Placeholder>\n  }\n  else\n  {\n    content = (<>\n      {searchedSchedules.map((schedule, i) => {\n        return <CellButton\n          key={i}\n          onClick={() => goToSchedule(schedule)}\n        >{schedule.title}</CellButton>\n      })}\n      <div style={{textAlign:'center'}}>\n        Уточните или исправьте запрос, если не нашли нужное расписание\n      </div>\n    </>)\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={\n          <PanelHeaderBack onClick={goToMainPanel} />\n        }\n      >Поиск</PanelHeader>\n\n      <FixedLayout style={{paddingTop:24}} vertical=\"top\" filled>\n        <Search\n          getRef={searchRef}\n          placeholder=\"Поиск расписания\"\n          after={null}\n          value={q}\n          onChange={handleQChange}\n        />\n      </FixedLayout>\n\n      <Div style={{marginTop:70}}>{content}</Div>\n    </Panel>\n  )\n}\n\nexport default SearchPanel","import React, { ChangeEvent } from 'react'\nimport {\n  Button,\n  Div,\n  FormItem,\n  Group,\n  Header,\n  NativeSelect,\n  Panel,\n  PanelHeader,\n  PanelHeaderBack,\n} from '@vkontakte/vkui'\nimport { PanelProps } from '../../types'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { setActivePanel } from '../../store/slices/navigation'\nimport { MAIN_PANEL } from '../../constants'\nimport { RootState } from '../../store/rootReducer'\nimport { requestDeleteUserUniver, requestUpdateUserUniver } from '../../store/slices/user'\n\nconst SettingsPanel: React.FC<PanelProps> = ({\n  id,\n}) => {\n  const dispatch = useDispatch()\n  const { univerList } = useSelector((s: RootState) => s.config)\n  const { user } = useSelector((s: RootState) => s.user)\n\n  const goToMain = () => {\n    dispatch(setActivePanel(MAIN_PANEL))\n  }\n\n  const userUniverId = user?.univer?.id ?? ''\n  const [univer, setUniver] = React.useState(''+userUniverId)\n  const handleChangeUniver = (e: ChangeEvent<HTMLSelectElement>) => {\n    setUniver(e.target.value)\n  }\n\n  const changeUniver = () => {\n    if((''+userUniverId) !== univer)\n    {\n      if(univer === '')\n      {\n        dispatch(requestDeleteUserUniver(user!.id))\n      }\n      else\n      {\n        dispatch(requestUpdateUserUniver({\n          id: user!.id,\n          univerId: +univer,\n        }))\n      }\n    }\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={<PanelHeaderBack onClick={goToMain} />}\n      >Настройки</PanelHeader>\n\n      <Group header={<Header mode=\"secondary\">Главное</Header>}>      \n        <FormItem\n          top=\"Университет\"\n          bottom=\"При изменении университета, выбранная группа удалится!\"\n          >\n          <NativeSelect\n            placeholder=\"Не выбран\"\n            value={univer}\n            onChange={handleChangeUniver}\n            >\n            {univerList.map(univer => {\n              return <option\n              key={univer.code}\n              value={univer.id}\n              >{univer.subtitle}</option>\n            })}\n          </NativeSelect>\n        </FormItem>\n        <Div style={{paddingTop:0}}>\n          <Button\n            disabled={(''+userUniverId) === univer}\n            style={{width:'100%'}}\n            size=\"l\"\n            onClick={changeUniver}\n            >Сохранить</Button>\n        </Div>\n      </Group>\n    </Panel>\n  )\n}\n\nexport default SettingsPanel","import React from \"react\"\nimport {\n  Cell,\n  IconButton,\n  usePlatform,\n} from \"@vkontakte/vkui\"\nimport {\n  Icon28FavoriteOutline,\n  Icon28ShareOutline,\n  Icon28SmartphoneOutline,\n  Icon28UsersOutline,\n} from \"@vkontakte/icons\"\nimport bridge from '@vkontakte/vk-bridge'\nimport './AppActions.sass'\nimport { GROUP_ID } from \"../../constants\"\n\ntype AppActionsProps = {\n  closeModal: () => void\n}\n\nconst AppActions: React.FC<AppActionsProps> = ({\n  closeModal,\n}) => {\n  const platform = usePlatform()\n\n  const addToFavorite = () => {\n    closeModal()\n    bridge.send('VKWebAppAddToFavorites')\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  const joinToGroup = () => {\n    closeModal()\n    bridge.send('VKWebAppJoinGroup', { group_id: GROUP_ID })\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  const addToHomeScreen = () => {\n    closeModal()\n    bridge.send('VKWebAppAddToHomeScreen')\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  const share = () => {\n    closeModal()\n    bridge.send('VKWebAppShare', {link: 'https://vk.com/app7908078'})\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  return (\n    <div>\n      {/* <Header>Не теряйте приложение</Header>\n      <Div className=\"actions-wrapper\" style={{paddingTop:0}}>\n        {true &&\n          <div className=\"actions__item\">\n            <IconButton>\n              <Icon28FavoriteOutline fill=\"orange\"/>\n            </IconButton>\n            Добавить в избранное\n          </div>\n        }\n        {true &&\n          <div className=\"actions__item\">\n            <IconButton>\n              <Icon28UsersOutline fill=\"var(--accent)\"/>\n            </IconButton>\n            Вступить в сообщество\n          </div>\n        }\n        {true &&\n          <div className=\"actions__item\">\n            <IconButton>\n              <Icon28ShareOutline fill=\"teal\"/>\n            </IconButton>\n            Поделиться приложением\n          </div>\n        }\n        {true &&\n          <div className=\"actions__item\">\n            <IconButton>\n              <Icon28SmartphoneOutline fill=\"tan\"/>\n            </IconButton>\n            На домашний экран\n          </div>\n        }\n      </Div> */}\n      {true &&\n        <Cell\n          before={\n            <IconButton>\n              <Icon28FavoriteOutline style={{marginRight:8,padding:0}} fill=\"orange\"/>\n            </IconButton>\n          }\n          description=\"Мини-приложения > Избранное\"\n          onClick={addToFavorite}\n        >В избранном</Cell>\n      }\n      {true &&\n        <Cell\n          before={\n            <IconButton>\n              <Icon28UsersOutline style={{marginRight:8,padding:0}} fill=\"var(--accent)\"/>\n            </IconButton>\n          }\n          description=\"Шапка группы\"\n          onClick={joinToGroup}\n        >Вступите в группу</Cell>\n      }\n      {platform === 'android' &&\n        <Cell\n          before={\n            <IconButton>\n                <Icon28SmartphoneOutline style={{marginRight:8,padding:0}} fill=\"tan\"/>\n              </IconButton>\n            }\n          description=\"Быстрый доступ с дом. экрана\"\n          onClick={addToHomeScreen}\n        >На домашний экран</Cell>\n      }\n      {true &&\n        <Cell\n          before={\n            <IconButton>\n              <Icon28ShareOutline style={{marginRight:8}} fill=\"teal\"/>\n            </IconButton>\n          }\n          description=\"Доступ по ссылке\"\n          onClick={share}\n        >Расскажите друзьям</Cell>\n      }\n    </div>\n  )\n}\n\nexport default AppActions","import React from \"react\"\nimport { Avatar, Caption, Card, CellButton, Div, Header, ModalCard, ModalPage, ModalPageHeader, ModalRoot, Progress } from \"@vkontakte/vkui\"\nimport AppActions from \"../AppActions\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { RootState } from \"../../store/rootReducer\"\nimport { setActiveModal } from \"../../store/slices/navigation\"\nimport { Icon24Dismiss } from \"@vkontakte/icons\"\nimport './ActionsModal.sass'\nimport { requestSchedule } from \"../../store/slices/schedule\"\n\n\nconst ActionsModal = () => {\n  const dispatch = useDispatch()\n  const { activeModal } = useSelector((s: RootState) => s.navigation)\n  const { lessonStats } = useSelector((s: RootState) => s.schedule)\n  const { user } = useSelector((s: RootState) => s.user)\n  const { currentUniver } = useSelector((s: RootState) => s.config)\n  \n  const closeModal = () => {\n    dispatch(setActiveModal(null))\n  }\n\n  const goToSchedule = (tail: string) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail,\n    }))\n    closeModal()\n  }\n\n  return (\n    <ModalRoot\n      activeModal={activeModal}\n      onClose={closeModal}\n    >\n      <ModalCard\n        id=\"actions\"\n        header=\"Не теряйте приложение\"\n        subheader=\"Т.к. приложение не находится в каталоге, найти через поиск его не получится. Поэтому, чтобы не потерять его, сохраните любым удомным способом:\"\n        icon={<Avatar size={72}/>}\n      >\n        <AppActions closeModal={closeModal}/>\n      </ModalCard>\n      <ModalPage id=\"stats\">\n        <ModalPageHeader\n          right={<Icon24Dismiss onClick={closeModal} style={{marginRight:8}}/>}\n        >Статистика</ModalPageHeader>\n        {lessonStats && <>\n          <Div>\n            <Card>\n              <Div>{lessonStats.title}</Div>\n            </Card>\n          </Div>\n          <Div style={{paddingTop:'0px 12px'}}>\n            {currentUniver &&\n              <Caption level=\"2\" weight=\"regular\" style={{opacity:0.5}}>\n                Пожалуйста, не воспринимайте данную статистику буквально!\n                Т.к. для расчета, первым днем принят {new Date(currentUniver.startDateStartOfWeek).toLocaleDateString()},\n                а последним {new Date(currentUniver.endDate).toLocaleDateString()}.\n              </Caption>\n            }\n          </Div>\n          <Div style={{padding:'0px 12px'}}>\n            {Object.entries(lessonStats.stats).map(([typeLesson, values]) => {\n              const { pass, total } = values\n              if(total === 0) return null\n              \n              const title = {\n                lec: 'Лекция',\n                pr: 'Практика',\n                lab: 'Лабораторная',\n              }[typeLesson]\n              \n              return (\n                <div className=\"stats__item\" key={typeLesson}>\n                  <Header>\n                    {title}\n                    <span className=\"stats__secondary\">{pass}/{total}</span>\n                  </Header>\n                  <Progress\n                    className={`stats__progress--${typeLesson}`}\n                    style={{margin: '0px 12px 8px 12px',}}\n                    value={pass / total * 100}\n                    />\n                </div>\n              )\n            })}\n          </Div>\n          <Div>\n            <Header>Преподаватели / группы</Header>\n            {lessonStats.fromWhoms.map(fromWhom => {\n              return <CellButton\n                key={fromWhom.href}\n                onClick={() => goToSchedule(fromWhom.href)}\n              >{fromWhom.title}</CellButton>\n            })}\n          </Div>\n        </>}\n      </ModalPage>\n    </ModalRoot>\n  )\n}\n\nexport default ActionsModal","import React from 'react';\nimport {\n  AppRoot,\n  ConfigProvider,\n  ScreenSpinner,\n  usePlatform,\n  View,\n} from '@vkontakte/vkui';\nimport bridge from '@vkontakte/vk-bridge'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { GROUP_ID, MAIN_PANEL, SCHEDULE_PANEL, SEARCH_PANEL, SETTINGS_PANEL } from './constants';\nimport MainPanel from './panels/main';\nimport SchedulePanel from './panels/schedule';\nimport SearchPanel from './panels/search';\nimport SettingsPanel from './panels/settings';\nimport { RootState } from './store/rootReducer';\nimport ActionsModal from './components/ActionsModal';\nimport { requestGetUser, setUserData } from './store/slices/user';\nimport { requestConfigUnivers, requestQoute, setConfig, setCurrentUniver } from './store/slices/config';\nimport { setActiveModal } from './store/slices/navigation';\n\nlet isFirstLoading = true\nconst App: React.FC = () => {\n  const dispatch = useDispatch()\n  const { activePanel, history } = useSelector((s: RootState) => s.navigation)\n  const {\n    isLoaderShowing,\n    user,\n    isLoading: isUserLoading,\n    error: userError,\n    isUniverLoading,\n    isScheduleLoading,\n  } = useSelector((s: RootState) => s.user)\n  const { config, isLoading: isConfigLoading, error: configError, } = useSelector((s: RootState) => s.config)\n\n  const platform = usePlatform()\n\n  React.useEffect(() => {\n    document.body.setAttribute('scheme', 'space_gray')\n\n    const config =\n      window.location.search.slice(1)\n        .split('&')\n        .reduce((config, queryParam) => {\n          const [key, value] = queryParam.split('=')\n          return { ...config, [key.slice(3)]: value === '1' }\n        },{})\n    dispatch(setConfig(config))\n  },[])\n\n  const [popout, setPopout] = React.useState<React.ReactNode>(null)\n  const handleSetPopout = (popout: React.ReactNode) => {\n    setPopout(popout)\n  }\n\n  React.useEffect(() => {\n    const initApp = async () => {\n      // const userData = await bridge.send('VKWebAppGetUserInfo')\n      const userData = { id: 0 }\n      dispatch(setUserData(userData))\n      dispatch(requestConfigUnivers())\n      dispatch(requestGetUser(userData.id))\n      dispatch(requestQoute())\n    }\n\n    if(!user) initApp()\n  },[])\n\n  React.useEffect(() => {\n    if(user)\n    {\n      if(user.univer)\n        dispatch(setCurrentUniver(user.univer))\n      else\n        dispatch(setCurrentUniver(null))\n    }\n  }, [user])\n\n  React.useEffect(() => {\n    if(isUniverLoading || isScheduleLoading)\n    {\n      setPopout(<ScreenSpinner/>)\n    }\n    else\n    {\n      setPopout(null)\n    }\n  }, [isUniverLoading, isScheduleLoading])\n\n  React.useEffect(() => {\n    const openModal = async () => {\n      if(platform === 'android')\n      {\n        const addToHomeScreenInfo = await bridge.send('VKWebAppAddToHomeScreenInfo')\n        if(\n          addToHomeScreenInfo.is_feature_supported &&\n          addToHomeScreenInfo.is_added_to_home_screen\n        ) return\n      }\n\n      if(config.is_favorite) return\n\n      const groupInfo = await bridge.send(\n        'VKWebAppGetGroupInfo',\n        {'group_id': GROUP_ID}\n      )\n      if(groupInfo.is_member) return\n\n      dispatch(setActiveModal('actions'))\n    }\n    \n    if(\n      !isConfigLoading && !isUserLoading && !isFirstLoading &&\n      !userError && !configError &&\n      !isLoaderShowing\n    )\n    {\n      openModal()      \n    }\n    isFirstLoading = false\n  }, [isConfigLoading, isUserLoading, isLoaderShowing])\n\n  return (\n    <ConfigProvider isWebView={true}>\n      <AppRoot>\n        <View\n          popout={popout}\n          modal={<ActionsModal/>}\n          activePanel={activePanel}\n          history={history}\n        >\n          <MainPanel id={MAIN_PANEL} />\n          <SettingsPanel id={SETTINGS_PANEL} setPopout={handleSetPopout}/>\n          <SearchPanel id={SEARCH_PANEL} />\n          <SchedulePanel id={SCHEDULE_PANEL} setPopout={handleSetPopout}/>\n        </View>\n      </AppRoot>\n    </ConfigProvider>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport bridge from '@vkontakte/vk-bridge'\nimport '@vkontakte/vkui/dist/vkui.css'\n\nimport store from './store'\nimport { Provider } from 'react-redux'\n\nimport './index.sass';\n\nimport App from './App';\n\nbridge.send('VKWebAppInit')\nbridge.subscribe(e => {\n  if(e.detail.type === 'VKWebAppUpdateConfig')\n    document.body.setAttribute('scheme', e.detail.data.scheme)\n})\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}