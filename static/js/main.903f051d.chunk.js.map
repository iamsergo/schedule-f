{"version":3,"sources":["constants.ts","store/slices/navigation.ts","api/schedule.ts","api/config.ts","api/user.ts","api/index.ts","api/qoute.ts","store/slices/schedule.ts","utils/index.ts","store/slices/config.ts","store/slices/user.ts","store/slices/qoute.ts","store/rootReducer.ts","store/index.ts","components/Qoute/index.tsx","components/AppActions/index.tsx","components/SemestrInfo/index.tsx","components/LessonRow/index.tsx","components/ScheduleBody/index.tsx","components/UserSchedule/index.tsx","components/UniverInfo/index.tsx","panels/main/index.tsx","panels/schedule/index.tsx","panels/search/index.tsx","panels/settings/index.tsx","components/ActionsModal/index.tsx","App.tsx","index.tsx"],"names":["BASE_URL","process","SCHEDULE_PANEL","MAIN_PANEL","SEARCH_PANEL","SETTINGS_PANEL","initialState","activePanel","history","activeModal","prevActivePanel","navigationSlice","createSlice","name","reducers","setActivePanel","state","action","payload","setActiveModal","actions","schedule","getSchedule","a","univer","tail","queryTail","URLSearchParams","toString","url","join","fetch","res","json","searchSchedule","q","config","getUniverList","getUser","id","user","updateUserUniver","univerId","options","method","headers","body","JSON","stringify","deleteUserUniver","api","updateUserSchedule","scheduleId","deleteUserSchedule","qoute","getQoute","Date","getTime","requestSchedule","createAsyncThunk","thunkAPI","href","getState","scheduleHistory","userSchedule","find","record","isUniq","data","requestSearchSchedule","scheduleSlice","isLoading","error","lessonStats","scheduleHistoryHrefs","isSearchLoading","searchError","searchedSchedules","scheduleHistoryBack","pop","currentScheduleHref","length","currentSchedule","clearScheduleHistory","clearSearchedSchedules","setLessonStats","setQ","extraReducers","builder","addCase","pending","rejected","message","meta","arg","fulfilled","push","getLessonsInDay","lessons","day","week","filter","lesson","inDay","inWeek","getFromWhomsList","lessonsMap","forEach","fromWhoms","fromWhom","Object","values","isCurrentWeek","now","range","start","end","requestConfigUnivers","configSlice","univerList","currentUniver","passDays","countDays","toEndDays","toEndPercent","currentDay","currentWeek","setCurrentUniver","dayId","getDay","getCurrentDay","weeks","weekType","getCurrentWeek","startDate","endDate","DAYS","Math","ceil","getDaysStats","setConfig","requestGetUser","requestUpdateUserUniver","requestDeleteUserUniver","requestUpdateUserSchedule","requestDeleteUserSchedule","userSlice","isLoaderShowing","isUniverLoading","isScheduleLoading","userData","setUserData","setIsLoaderShowing","requestQoute","qouteSlice","rootReducer","combineReducers","navigation","store","configureStore","reducer","Qoute","disabled","description","author","style","paddingTop","text","AppActions","platform","usePlatform","React","useState","appActionsIsOpen","setAppActionsIsOpen","onClick","after","before","marginRight","padding","fill","bridge","send","then","console","log","catch","group_id","link","SemestrInfo","dispatch","useDispatch","useSelector","s","subtitle","toLocaleDateString","margin","background","value","LessonRow","current","onGoToSchedule","getStats","className","time","map","i","type","typeTitle","place","subject","group","title","ScheduleBody","today","onGetStats","icon","color","j","lessonTime","timeString","split","startHours","startMinutes","setHours","endHours","endMinutes","isCurrentLesson","UserSchedule","goToSchedule","code","fromWhomsIsOpen","setFromWhomsIsOpen","lessonsToday","todayString","UniverInfo","weeksIsOpen","setWeeksIsOpen","timeLessonsIsOpen","setTimeLessonsIsOpen","weekEnd","rangeString","weekPassed","textDecoration","opacity","timeLessons","MainPanel","content","isUserLoading","userError","isConfigLoading","configError","goToSettings","userMessage","configMessage","stretched","width","height","separator","left","WEEKS","SchedulePanel","their","my","setPopout","activeDay","setActiveDay","activeWeek","setActiveWeek","isDiffShowing","setIsDiffShowing","toggleDiffShowing","goToMain","saveSchedule","deleteSchedule","cardRef","useRef","ls","theirLesson","myLesson","b","dayEqual","lessonNumEqual","weekEqual","groupEqual","isIntersection","ref","slideIndex","onChange","d","_","stats","lec","pass","total","pr","lab","thisLessons","thisLessons0","l","thisLessons1","thisLessons2","weeks0Count","w","weeks1Count","nowMs","startMs","currentWeekIdx","findIndex","passedWeeks","slice","weeksPassed0Count","weeksPassed1Count","n","e","typeLesson","getStatsForLesson","marginTop","selected","toggleScheduleItem","autoclose","popout","onClose","iosCloseItem","mode","transform","baseUrl","SearchPanel","searchRef","useEffect","window","setTimeout","focus","debQ","setDebQ","timeout","clearTimeout","vertical","filled","getRef","placeholder","target","SettingsPanel","userUniverId","setUniver","header","top","bottom","size","ActionsModal","closeModal","right","level","weight","startDateStartOfWeek","entries","App","document","setAttribute","location","search","reduce","queryParam","key","handleSetPopout","initApp","isWebView","modal","subscribe","detail","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.903f051d.chunk.js","sourcesContent":["export const BASE_URL = process.env.REACT_APP_BASE_URL\n\nexport const GROUP_ID = 198278031\n\nexport const SCHEDULE_PANEL = 'schedule'\nexport const MAIN_PANEL = 'main'\nexport const SEARCH_PANEL = 'search'\nexport const SETTINGS_PANEL = 'settings'","import { createSlice } from \"@reduxjs/toolkit\";\nimport { MAIN_PANEL } from \"../../constants\";\nimport { PanelType } from \"../../types\";\n\ntype NavigationState = {\n  activePanel: PanelType\n  prevActivePanel: PanelType\n  history: PanelType[]\n  activeModal: string | null\n}\n\nconst initialState: NavigationState = {\n  activePanel: MAIN_PANEL,\n  history: [MAIN_PANEL],\n  activeModal: null,\n  prevActivePanel: MAIN_PANEL,\n}\n\nconst navigationSlice = createSlice({\n  name: 'navigation',\n  initialState,\n  reducers: {\n    setActivePanel(state, action)\n    {\n      state.prevActivePanel = state.activePanel\n      state.activePanel = action.payload\n    },\n    setActiveModal(state, action)\n    {\n      state.activeModal = action.payload\n    }\n  },\n})\n\nexport const { setActivePanel, setActiveModal } = navigationSlice.actions\nexport default navigationSlice.reducer","import { BASE_URL } from \"../constants\"\nimport { HrefTitle, Schedule } from \"../types\"\n\nconst getSchedule = async ({\n  univer,\n  tail,\n} : {\n  univer: string,\n  tail: string,\n}): Promise<Schedule> => {\n  const queryTail = new URLSearchParams(`tail=${tail}`).toString()\n  const url = [BASE_URL, \"schedule\", univer].join(\"/\") + '?' + queryTail\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst searchSchedule = async ({\n  univer,\n  q,\n} : {\n  univer: string,\n  q: string,\n}) : Promise<HrefTitle[]> => {\n  const url = [ BASE_URL, 'schedule/search', univer, q, ].join('/')\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst schedule = {\n  getSchedule,\n  searchSchedule,\n}\n\nexport default schedule","import { BASE_URL } from \"../constants\"\nimport { Univer } from \"../types\"\n\nconst getUniverList = async (): Promise<Univer[]> => {\n  const url = [ BASE_URL, 'univers'].join('/')\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst config = {\n  getUniverList,\n}\n\nexport default config","import { BASE_URL } from \"../constants\"\nimport { User } from \"../types\"\n\nconst getUser = async (id: number): Promise<User> => {\n  const url = [ BASE_URL, 'users', id].join('/')\n  const res = await fetch(url)\n  const user = await res.json()\n\n  return user  \n}\n\nconst updateUserUniver = async ({\n  id, univerId,\n}: { id: number, univerId: number }): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'univer'].join('/')\n  const options = {\n    method: 'PUT',\n    headers: { 'Content-Type': 'application/json;charset=utf-8' },\n    body: JSON.stringify({univerId}),\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst deleteUserUniver = async (id: number): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'univer'].join('/')\n  const options = {\n    method: 'DELETE',\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst updateUserSchedule = async ({\n  id, scheduleId,\n}: { id: number, scheduleId: string }): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'schedule'].join('/')\n  const options = {\n    method: 'PUT',\n    headers: { 'Content-Type': 'application/json;charset=utf-8' },\n    body: JSON.stringify({scheduleId}),\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst deleteUserSchedule = async (id: number): Promise<User> => {\n  const url = [ BASE_URL, 'users', id, 'schedule'].join('/')\n  const options = {\n    method: 'DELETE',\n  }\n  const res = await fetch(url, options)\n  const user = await res.json()\n\n  return user  \n}\n\nconst user = {\n  getUser,\n  updateUserSchedule,\n  deleteUserSchedule,\n  updateUserUniver,\n  deleteUserUniver,\n}\n\nexport default user","import schedule from './schedule'\nimport config from './config'\nimport user from './user'\nimport qoute from './qoute'\n\nconst api = {\n  schedule,\n  config,\n  user,\n  qoute,\n}\n\nexport default api","import { BASE_URL } from \"../constants\"\nimport { Qoute } from \"../types\"\n\nconst getQoute = async (): Promise<Qoute | null> => {\n  const url = [ BASE_URL, 'qoute', new Date().getTime()].join('/')\n  const res = await fetch(url)\n  return await res.json()\n}\n\nconst qoute = {\n  getQoute,\n}\n\nexport default qoute","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\"\nimport { HrefTitle, Schedule, Stats } from \"../../types\"\nimport api from \"../../api\"\nimport { RootState } from \"../rootReducer\"\n\ntype ScheduleHistoryRecord = {\n    id: string,\n    data: Schedule\n  }\n\ntype ScheduleState = {\n  isLoading: boolean\n  error: {\n    message: string,\n    payload: any,\n  } | null\n  schedule: Schedule | null\n  lessonStats: {\n    title: string\n    stats: Stats\n    fromWhoms: HrefTitle[]\n  } | null\n  scheduleHistory: ScheduleHistoryRecord[]\n  scheduleHistoryHrefs: string[]\n\n  q: string\n  isSearchLoading: boolean\n  searchError: {\n    message: string,\n    payload: any,\n  } | null\n  searchedSchedules: HrefTitle[]\n}\n\nexport const requestSchedule = createAsyncThunk(\n  'schedule/request',\n  async ({ univer, tail: href }: {\n    univer: string,\n    tail: string,\n  }, thunkAPI): Promise<{record: ScheduleHistoryRecord, isUniq: boolean }> => {\n    const state = (thunkAPI.getState() as RootState)\n    const scheduleHistory = state.schedule.scheduleHistory\n    const userSchedule = state.user.user?.schedule\n    \n    const schedule = scheduleHistory.find(schedule => schedule.id === href)\n    if(schedule)\n    {\n      return { record: schedule, isUniq: false}\n    }\n    else if(userSchedule && userSchedule.href === href)\n    {\n      return {\n        record: { id: href, data: userSchedule },\n        isUniq: true,\n      }\n    }\n    else\n    {\n      const schedule = await api.schedule.getSchedule({ univer, tail: href })\n      return {\n        record: { id: href, data: schedule },\n        isUniq: true,\n      }\n    }\n  }\n)\n\nexport const requestSearchSchedule = createAsyncThunk(\n  'schedule/search/request',\n  api.schedule.searchSchedule\n)\n\nconst initialState: ScheduleState = {\n  isLoading: false,\n  error: null,\n  schedule: null,\n  lessonStats: null,\n  scheduleHistory: [],\n  scheduleHistoryHrefs: [],\n\n  q: '',\n  isSearchLoading: false,\n  searchError: null,\n  searchedSchedules: [],\n}\n\nconst scheduleSlice = createSlice({\n  name: 'schedule',\n  initialState,\n  reducers: {\n    scheduleHistoryBack(state)\n    {\n      state.scheduleHistoryHrefs.pop()\n      const currentScheduleHref = state.scheduleHistoryHrefs[state.scheduleHistoryHrefs.length - 1]\n      if(currentScheduleHref)\n      {\n        const currentSchedule = state.scheduleHistory.find(schedule => schedule.id === currentScheduleHref)!\n        state.schedule = currentSchedule.data\n      }\n      else\n      {\n        state.schedule = null\n      }\n    },\n    clearScheduleHistory(state)\n    {\n      state.scheduleHistoryHrefs = []\n      state.schedule = null\n    },\n    clearSearchedSchedules(state)\n    {\n      state.searchedSchedules = []\n    },\n    setLessonStats(state,action)\n    {\n      state.lessonStats = action.payload\n    },\n    setQ(state, action)\n    {\n      state.q = action.payload\n    },\n  },\n  extraReducers(builder)\n  {\n    builder\n      .addCase(requestSchedule.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(requestSchedule.rejected, (state,action) => {\n        state.isLoading = false\n        state.error = {\n          message: 'Ошибка при запросе расписания :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestSchedule.fulfilled, (state,action) => {\n        state.isLoading = false\n        state.error = null\n\n        const { isUniq, record } = action.payload\n\n        if(isUniq)\n        {\n          state.scheduleHistory.push(record)\n        }\n\n        state.scheduleHistoryHrefs.push(record.id)\n        state.schedule = record.data\n      })\n\n      .addCase(requestSearchSchedule.pending, (state) => {\n        state.isSearchLoading = true\n        state.searchError = null\n      })\n      .addCase(requestSearchSchedule.rejected, (state,action) => {\n        state.isSearchLoading = false\n        state.searchError = {\n          message: 'Ошибка при запросе расписания :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestSearchSchedule.fulfilled, (state,action) => {\n        state.isSearchLoading = false\n        state.searchError = null\n        state.searchedSchedules = action.payload\n      })\n  },\n})\n\nexport const {\n  scheduleHistoryBack,\n  clearScheduleHistory,\n  clearSearchedSchedules,\n  setLessonStats,\n  setQ,\n} = scheduleSlice.actions\nexport default scheduleSlice.reducer","import { DayRange, HrefTitle, Lesson, Stats, Univer, WeekRange, WeekTypeRange } from \"../types\";\n\nexport const getLessonsInDay = (\n  lessons: Lesson[],\n  day: DayRange,\n  week: WeekRange\n): Lesson[] => {\n  return lessons.filter(lesson => {\n    const inDay = lesson.day === day\n    const inWeek = lesson.week === week || lesson.week === 2\n\n    return inDay && inWeek\n  })\n}\n\nexport const getFromWhomsList = (lessons: Lesson[]): HrefTitle[] => {\n  const lessonsMap: {\n    [key: string]: HrefTitle\n  } = {}\n  lessons.forEach(lesson => {\n    lesson.fromWhoms.forEach(fromWhom => {\n      if(!lessonsMap[fromWhom.href])\n      {\n        lessonsMap[fromWhom.href] = fromWhom\n      }\n    })\n  })\n\n  return Object.values(lessonsMap)\n}\n\nexport const getCurrentDay = (): DayRange => {\n  const dayId = new Date().getDay()\n\n  return (dayId > 0 ? dayId - 1 : dayId) as DayRange\n}\n\nexport const getDaysStats = (\n  startDate: number,\n  endDate: number,\n): {\n  passDays: number,\n  countDays: number,\n  toEndDays: number,\n} => {\n  const DAYS = 1000 * 60 * 60 * 24\n  const now = new Date().getTime()\n  const start = new Date(startDate).getTime()\n  const end = new Date(endDate).getTime()\n\n  const countDays = Math.ceil((end - start) / DAYS)\n  const passDays = Math.ceil((now - start) / DAYS)\n  const toEndDays = Math.ceil((end - now) / DAYS)\n\n  return { passDays: passDays < 0 ? 0 : passDays, countDays, toEndDays }\n}\n\nexport const isPassWeek = (weekEnd: number): boolean => {\n  const now = new Date().getTime()\n  return now > weekEnd\n}\n\nexport const isCurrentWeek = (week: WeekTypeRange): boolean => {\n  const now = new Date().getTime()\n  const [start,end] = week.range\n  return start <= now && now <= end\n}\n\nexport const getCurrentWeek = (weeks: WeekTypeRange[]): WeekRange => {\n  const currentWeek = weeks.find(week => isCurrentWeek(week))\n\n  if(!currentWeek) return 0\n\n  return currentWeek.weekType\n}\n\nexport const getDiff = (their: Lesson[], my: Lesson[]): Lesson[] => {\n  const isIntersection = (a: Lesson, b: Lesson) => {\n    const dayEqual = a.day === b.day\n    const lessonNumEqual = a.lesson === b.lesson\n    const weekEqual = a.week === b.week || a.week === 2 || b.week === 2\n    const groupEqual = a.group === b.group || a.group === 3 || b.group === 3\n\n    return dayEqual && lessonNumEqual && weekEqual && groupEqual\n  }\n\n  return their.filter(theirLesson => !my.find(myLesson => isIntersection(theirLesson, myLesson)))\n}\n\nexport const getStatsForLesson = ({\n  lesson,\n  lessons,\n  currentUniver,\n}: {\n  lesson: Lesson,\n  lessons: Lesson[],\n  currentUniver: Univer\n}): { stats: Stats, fromWhoms: HrefTitle[] } => {\n  const { subject, time } = lesson\n  const { weeks, startDate } = currentUniver\n\n  const stats: Stats = {\n    lec: {pass:0,total:0},\n    pr: {pass:0,total:0},\n    lab: {pass:0,total:0},\n  }\n\n  const thisLessons = lessons.filter(lesson => lesson.subject === subject)\n  const thisLessons0 = thisLessons.filter(l => l.week === 0)\n  const thisLessons1 = thisLessons.filter(l => l.week === 1)\n  const thisLessons2 = thisLessons.filter(l => l.week === 2)\n\n  const weeks0Count = weeks.filter(w => w.weekType === 0).length\n  const weeks1Count = weeks.filter(w => w.weekType === 1).length\n\n  stats.lec.total =\n    weeks0Count * thisLessons0.filter(l => l.type === 0).length +\n    weeks1Count * thisLessons1.filter(l => l.type === 0).length +\n    (weeks0Count + weeks1Count) * thisLessons2.filter(l => l.type === 0).length\n\n  stats.pr.total =\n    weeks0Count * thisLessons0.filter(l => l.type === 1).length +\n    weeks1Count * thisLessons1.filter(l => l.type === 1).length +\n    (weeks0Count + weeks1Count) * thisLessons2.filter(l => l.type === 1).length\n\n  stats.lab.total =\n    weeks0Count * thisLessons0.filter(l => l.type === 2).length +\n    weeks1Count * thisLessons1.filter(l => l.type === 2).length +\n    (weeks0Count + weeks1Count) * thisLessons2.filter(l => l.type === 2).length\n\n  const now = new Date()\n  const nowMs = now.getTime()\n  const startMs = new Date(startDate).getTime()\n\n  if(nowMs < startMs)\n  {\n    return {\n      fromWhoms: getFromWhomsList(thisLessons),\n      stats: {\n        lec: {pass:0,total:stats.lec.total},\n        pr: {pass:0,total:stats.pr.total},\n        lab: {pass:0,total:stats.lab.total},\n      }\n    }\n  }\n\n  const currentWeekIdx = weeks.findIndex(w => {\n    const [start, end] = w.range\n    return start <= nowMs && nowMs <= end\n  })\n  const passedWeeks = weeks.slice(0, currentWeekIdx)\n\n  const weeksPassed0Count = passedWeeks.filter(w => w.weekType === 0).length\n  const weeksPassed1Count = passedWeeks.filter(w => w.weekType === 1).length\n\n  stats.lec.pass =\n    weeksPassed0Count * thisLessons0.filter(l => l.type === 0).length +\n    weeksPassed1Count * thisLessons1.filter(l => l.type === 0).length +\n    (weeksPassed0Count + weeksPassed1Count) * thisLessons2.filter(l => l.type === 0).length\n\n  stats.pr.pass =\n    weeksPassed0Count * thisLessons0.filter(l => l.type === 1).length +\n    weeksPassed1Count * thisLessons1.filter(l => l.type === 1).length +\n    (weeksPassed0Count + weeksPassed1Count) * thisLessons2.filter(l => l.type === 1).length\n\n  stats.lab.pass =\n    weeksPassed0Count * thisLessons0.filter(l => l.type === 2).length +\n    weeksPassed1Count * thisLessons1.filter(l => l.type === 2).length +\n    (weeksPassed0Count + weeksPassed1Count) * thisLessons2.filter(l => l.type === 2).length\n\n  const currentWeek = weeks[currentWeekIdx]\n  if(currentWeek)\n  {\n    const d = now.getDay()\n    const currentDay = d === 0 ? 6 : d - 1\n    const n = now.getTime()\n\n    const thisLessonsEarlier =\n      thisLessons\n        .filter(lesson => {\n          if(lesson.week !== currentWeek.weekType && lesson.week !== 2) return false\n          if(lesson.day < currentDay) return true\n          if(lesson.day === currentDay)\n          {\n            const [start, end] = lesson.time\n            const [startHours, startMinutes] = start.split(':').map(s=>+s)\n            const s = new Date(n).setHours(startHours, startMinutes)\n            const [endHours, endMinutes] = end.split(':').map(s=>+s)\n            const e = new Date(n).setHours(endHours, endMinutes)\n            \n            if(n > s && n > e) return true\n          }\n          return false\n        })\n  \n    thisLessonsEarlier.forEach(lesson => {\n      const typeLesson = (['lec','pr','lab'][lesson.type]) as keyof Stats\n      stats[typeLesson].pass++\n    })\n  }\n\n  const fromWhoms = getFromWhomsList(thisLessons)\n\n  return { stats, fromWhoms }\n}\n\nexport const isCurrentLesson = (lessonTime: number[][]): boolean => {\n  const TEN_MINUTES = 10 * 60 * 1000\n  const now = new Date().getTime()\n\n  const [start, end] = lessonTime\n  \n  const [startHours, startMinutes] = start\n  const lessonStart = new Date().setHours(startHours, startMinutes) - TEN_MINUTES\n  if(lessonStart > now) return false\n\n  const [endHours, endMinutes] = end\n  const lessonEnd = new Date().setHours(endHours, endMinutes)\n  if(lessonEnd < now) return false\n\n  return true\n}\n\nexport const getDayNameByIndex = (id: DayRange): string => {\n  const DAYS = ['Понедельник','Вторник','Среда','Четверг','Пятница','Суббота']\n  return DAYS[id]\n}","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport api from \"../../api\";\nimport { DayRange, Univer, WeekRange } from \"../../types\";\nimport { getCurrentDay, getCurrentWeek, getDaysStats } from \"../../utils\";\n\ntype ConfigState = {\n  isLoading: boolean\n  error: {\n    message: string\n    payload: any\n  } | null\n  univerList: Univer[]\n  currentUniver: Univer | null\n  \n  passDays: number\n  countDays: number\n  toEndDays: number\n  toEndPercent: number\n  currentDay: DayRange\n  currentWeek: WeekRange\n  config: { [key:string]: boolean }\n}\n\nconst initialState: ConfigState = {\n  isLoading: false,\n  error: null,\n  univerList: [],\n  currentUniver: null,\n\n  passDays: 0,\n  countDays: 0,\n  toEndDays: 0,\n  toEndPercent: 0,\n  currentDay: 0,\n  currentWeek: 0,\n  config: {},\n}\n\nexport const requestConfigUnivers = createAsyncThunk(\n  'config/univers',\n  api.config.getUniverList\n)\n\nconst configSlice = createSlice({\n  name: 'config',\n  initialState,\n  reducers: {\n    setCurrentUniver(state, action)\n    {\n      let currentUniver = action.payload\n      if(!currentUniver)\n      {\n        state.currentUniver = null\n        return\n      }\n      \n      currentUniver = state.univerList.find(univer => univer.id === currentUniver.id)\n      state.currentUniver = currentUniver\n      state.currentDay = getCurrentDay()\n      state.currentWeek = getCurrentWeek(currentUniver.weeks)\n\n      const { passDays, countDays, toEndDays } = getDaysStats(\n        currentUniver.startDate,\n        currentUniver.endDate,\n      )\n      state.countDays = countDays\n      state.passDays = passDays\n      state.toEndDays = toEndDays\n      state.toEndPercent = passDays / countDays * 100\n    },\n    setConfig(state,action)\n    {\n      state.config = action.payload\n    },\n  },\n  extraReducers(builder)\n  {\n    builder\n      .addCase(requestConfigUnivers.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(requestConfigUnivers.rejected, (state,action) => {\n        state.isLoading = false\n        state.error = {\n          message: 'Ошибка при запросе университетов :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestConfigUnivers.fulfilled, (state,action) => {\n        state.isLoading = false\n        state.error = null\n        state.univerList = action.payload\n      })\n  },\n})\n\nexport const { setCurrentUniver, setConfig } = configSlice.actions\nexport default configSlice.reducer","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport api from \"../../api\";\nimport { User, UserData } from \"../../types\";\n\ntype ConfigState = {\n  isLoading: boolean\n  isUniverLoading: boolean\n  isScheduleLoading: boolean\n  error: {\n    message: string\n    payload: any\n  } | null\n  user: User | null\n  userData: UserData | null\n  isLoaderShowing: boolean\n}\n\nconst initialState: ConfigState = {\n  isLoading: false,\n  isLoaderShowing: true,\n  isUniverLoading: false,\n  isScheduleLoading: false,\n  error: null,\n  user: null,\n  userData: null,\n}\n\nexport const requestGetUser = createAsyncThunk(\n  'user/request',\n  api.user.getUser\n)\n\nexport const requestUpdateUserUniver = createAsyncThunk(\n  'user/update/univer',\n  api.user.updateUserUniver\n)\n\nexport const requestDeleteUserUniver = createAsyncThunk(\n  'user/delete/univer',\n  api.user.deleteUserUniver\n)\n\nexport const requestUpdateUserSchedule = createAsyncThunk(\n  'user/update/schedule',\n  api.user.updateUserSchedule\n)\n\nexport const requestDeleteUserSchedule = createAsyncThunk(\n  'user/delete/schedule',\n  api.user.deleteUserSchedule\n)\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setUserData(state, action)\n    {\n      state.userData = action.payload\n    },\n    setIsLoaderShowing(state, action)\n    {\n      state.isLoaderShowing = action.payload\n    },\n  },\n  extraReducers(builder)\n  {\n    builder\n      .addCase(requestGetUser.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(requestGetUser.rejected, (state,action) => {\n        state.isLoading = false\n        state.error = {\n          message: 'Произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestGetUser.fulfilled, (state,action) => {\n        state.isLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestUpdateUserUniver.pending, (state) => {\n        state.isUniverLoading = true\n        state.error = null\n      })\n      .addCase(requestUpdateUserUniver.rejected, (state,action) => {\n        state.isUniverLoading = false\n        state.error = {\n          message: 'При обновлении университета произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestUpdateUserUniver.fulfilled, (state,action) => {\n        state.isUniverLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestDeleteUserUniver.pending, (state) => {\n        state.isUniverLoading = true\n        state.error = null\n      })\n      .addCase(requestDeleteUserUniver.rejected, (state,action) => {\n        state.isUniverLoading = false\n        state.error = {\n          message: 'При обновлении университета произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestDeleteUserUniver.fulfilled, (state,action) => {\n        state.isUniverLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestUpdateUserSchedule.pending, (state) => {\n        state.isScheduleLoading = true\n        state.error = null\n      })\n      .addCase(requestUpdateUserSchedule.rejected, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = {\n          message: 'При обновлении расписания произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestUpdateUserSchedule.fulfilled, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n\n      .addCase(requestDeleteUserSchedule.pending, (state) => {\n        state.isScheduleLoading = true\n        state.error = null\n      })\n      .addCase(requestDeleteUserSchedule.rejected, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = {\n          message: 'При обновлении расписания произошла ошибка :(',\n          payload: action.meta.arg\n        }\n      })\n      .addCase(requestDeleteUserSchedule.fulfilled, (state,action) => {\n        state.isScheduleLoading = false\n        state.error = null        \n        state.user = action.payload\n      })\n  },\n})\n\nexport const { setUserData, setIsLoaderShowing } = userSlice.actions\nexport default userSlice.reducer","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { Qoute } from \"../../types\";\nimport api from \"../../api\";\n\ntype QouteState = {\n  isLoading: boolean\n  error: {\n    message: string\n    payload: any\n  } | null\n  qoute: Qoute | null\n}\n\nconst initialState: QouteState = {\n  isLoading: false,\n  error: null,\n  qoute: null,\n}\n\nexport const requestQoute = createAsyncThunk(\n  'qoute/request',\n  api.qoute.getQoute,\n)\n\nconst qouteSlice = createSlice({\n  name: 'qoute',\n  initialState,\n  reducers: {},\n  extraReducers(builder)\n  {\n    builder\n      .addCase(requestQoute.pending, state => {\n        state.isLoading = true\n      })\n      .addCase(requestQoute.fulfilled, (state, action) => {\n        state.isLoading = false\n        state.qoute = action.payload as Qoute | null\n      })\n  },\n})\n\nexport const {} = qouteSlice.actions\nexport default qouteSlice.reducer","import { combineReducers } from \"@reduxjs/toolkit\"\n\nimport navigation from './slices/navigation'\nimport schedule from './slices/schedule'\nimport config from './slices/config'\nimport user from './slices/user'\nimport qoute from './slices/qoute'\n\nconst rootReducer = combineReducers({\n  navigation,\n  schedule,\n  config,\n  user,\n  qoute,\n})\n\nexport type RootState = ReturnType<typeof rootReducer>\nexport default rootReducer","import { configureStore } from \"@reduxjs/toolkit\"\nimport { useDispatch } from \"react-redux\"\n\nimport rootReducer from './rootReducer'\n\nconst store = configureStore({ reducer : rootReducer })\n\nexport const useAppDispatch = () => useDispatch<typeof store.dispatch>()\nexport default store","import React from 'react'\nimport { Card, Cell, Div } from '@vkontakte/vkui'\nimport { Qoute as QouteType } from '../../types'\n\ntype QouteProps = {\n  qoute: QouteType\n}\n\nconst Qoute: React.FC<QouteProps> = ({\n  qoute,\n}) => {\n  return (\n    <Div>\n      <Card>\n        <Cell disabled description=\"Цитата дня\">\n          {qoute.author}\n        </Cell>\n        <Div style={{paddingTop:4}}>{qoute.text}</Div>\n      </Card>\n    </Div>\n  )\n}\n\nexport default Qoute","import React from \"react\"\nimport {\n  Card,\n  Cell,\n  Div,\n  usePlatform,\n} from \"@vkontakte/vkui\"\nimport {\n  Icon28ChevronDownOutline,\n  Icon28ChevronUpOutline,\n  Icon28FavoriteOutline,\n  Icon28ShareOutline,\n  Icon28SmartphoneOutline,\n  Icon28UsersOutline,\n} from \"@vkontakte/icons\"\nimport bridge from '@vkontakte/vk-bridge'\nimport { GROUP_ID } from \"../../constants\"\nimport './AppActions.sass'\n\nconst AppActions: React.FC = () => {\n  const platform = usePlatform()\n\n  const [appActionsIsOpen, setAppActionsIsOpen] = React.useState(false)\n  const toggleAppActions = () => {\n    setAppActionsIsOpen(!appActionsIsOpen)\n  }  \n\n  const addToFavorite = () => {\n    bridge.send('VKWebAppAddToFavorites')\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  const joinToGroup = () => {\n    bridge.send('VKWebAppJoinGroup', { group_id: GROUP_ID })\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  const addToHomeScreen = () => {\n    bridge.send('VKWebAppAddToHomeScreen')\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  const share = () => {\n    bridge.send('VKWebAppShare', {link: 'https://vk.com/app7908078'})\n      .then(console.log)\n      .catch(console.log)\n  }\n\n  return (\n    <Div style={{paddingTop:0}}>\n      <Card>\n        <Cell\n          onClick={toggleAppActions}\n          after={!appActionsIsOpen ? <Icon28ChevronDownOutline /> : <Icon28ChevronUpOutline/>}\n          description=\"Сохраните приложение:\"\n        >Доступ к приложению</Cell>\n        {appActionsIsOpen && <>\n          {true &&\n            <Cell\n              before={\n                <Icon28FavoriteOutline style={{marginRight:8,padding:0}} fill=\"orange\"/>\n              }\n              description=\"Мини-приложения > Избранное\"\n              onClick={addToFavorite}\n            >В избранном</Cell>\n          }\n          {true &&\n            <Cell\n              before={\n                <Icon28UsersOutline style={{marginRight:8,padding:0}} fill=\"var(--accent)\"/>\n              }\n              description=\"Шапка группы\"\n              onClick={joinToGroup}\n            >Вступите в группу</Cell>\n          }\n          {platform === 'android' &&\n            <Cell\n              before={\n                <Icon28SmartphoneOutline style={{marginRight:8,padding:0}} fill=\"tan\"/>\n              }\n              description=\"Быстрый доступ с дом. экрана\"\n              onClick={addToHomeScreen}\n            >На домашний экран</Cell>\n          }\n          {true &&\n            <Cell\n              before={\n                <Icon28ShareOutline style={{marginRight:8}} fill=\"teal\"/>\n              }\n              description=\"Доступ по ссылке\"\n              onClick={share}\n            >Расскажите друзьям</Cell>\n          }\n        </>}\n      </Card>\n    </Div>\n  )\n}\n\nexport default AppActions","import React from 'react'\nimport { Card, Cell, Div, Header, Progress, Separator } from '@vkontakte/vkui'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { RootState } from '../../store/rootReducer'\nimport { setActivePanel } from '../../store/slices/navigation'\nimport { SEARCH_PANEL } from '../../constants'\nimport { Icon28Search } from '@vkontakte/icons'\n\nconst SemestrInfo: React.FC = () => {\n  const dispatch = useDispatch()\n\n  const {\n    currentUniver,\n    currentWeek,\n    toEndDays,\n    toEndPercent,\n  } = useSelector((s: RootState) => s.config)\n\n  const goToSearchSchedule = () => {\n    dispatch(setActivePanel(SEARCH_PANEL))\n  }\n\n  return (\n    <Div>\n      <Card>\n        <Header\n          subtitle={`До конца семестра ${toEndDays} дн. (${new Date(currentUniver!.endDate).toLocaleDateString()})`}\n        >{currentWeek === 1 ? 'Числитель(четная)' : 'Знаменатель(нечетная)'}</Header>\n        <Progress\n          style={{margin: '0px 12px', background: 'gray'}}\n          value={toEndPercent}\n        />\n        <br />\n        <Separator />\n\n        <Cell\n          after={<Icon28Search/>}\n          onClick={goToSearchSchedule}\n        >Искать расписание</Cell>\n      </Card>\n    </Div>\n  )\n}\n\nexport default SemestrInfo","import React from 'react'\nimport { Lesson } from '../../types'\nimport './LessonRow.sass'\n\ntype LessonRowProps = {\n  current: boolean\n  lesson: Lesson\n  onGoToSchedule: (href: string) => void\n  getStats?: () => void\n}\n\nconst LessonRow: React.FC<LessonRowProps> = ({\n  current,\n  lesson,\n  onGoToSchedule,\n  getStats,\n}) => {\n  return (\n    <div className={`lesson-row${current ? ' lesson-row--current' : ''}`}>\n      <div className=\"lesson-row__time\">\n        {lesson.time.map((time, i) => {\n          return <div\n            key={time}\n            className={`lesson-row__time-item lesson-row__time-item--${i === 0 ? 'start' : 'end'}`}\n          >{time}</div>\n        })}\n      </div>\n      <div className={`lesson-row__body lesson-row__body--${lesson.type}`}>\n        {lesson.typeTitle &&\n          <div className=\"lesson-row__place\">\n            <span className={`lesson-row__type-title--${lesson.type}`}>\n              {lesson.typeTitle}\n            </span>\n            {lesson.place}\n          </div>\n        }\n        <div onClick={() => getStats && getStats()} className=\"lesson-row__subject\">\n          {lesson.subject} {lesson.group !== 3 && `(${lesson.group+1}гр.)`}\n        </div>\n        <div className=\"lesson-row__fromWhoms\">\n          {lesson.fromWhoms.map(fromWhom => {\n            return <div\n              key={fromWhom.href}\n              className={`lesson-row__fromWhoms-item${!fromWhom.href ? '' : ' link'}`}\n              onClick={() => fromWhom.href && onGoToSchedule(fromWhom.href)}\n            >{fromWhom.title}</div>\n          })}\n        </div>\n      </div>\n      <div className=\"lesson-row__after\"></div>\n    </div>\n  )\n}\n\nexport default LessonRow","import React from 'react'\nimport { Icon56GhostOutline } from '@vkontakte/icons'\nimport { Card, Placeholder } from '@vkontakte/vkui'\nimport { Lesson } from '../../types'\nimport LessonRow from '../LessonRow'\nimport { isCurrentLesson } from '../../utils'\n\ntype ScheduleBodyProps = {\n  today: boolean\n  lessons: Lesson[]\n  onGoToSchedule: (href: string) => void\n  onGetStats?: (lesson: Lesson) => void\n}\n\nconst ScheduleBody: React.FC<ScheduleBodyProps> = ({\n  today,\n  lessons,\n  onGoToSchedule,\n  onGetStats,\n}) => {\n  return (\n    <Card className=\"schedule__body\">\n      {lessons.length === 0\n        ? <Placeholder\n            className=\"schedule__empty-placeholder\"\n            icon={<Icon56GhostOutline style={{color:\"teal\"}}/>}\n          >Ничего нет</Placeholder>\n        : lessons.map((lesson, j) => {\n            const lessonTime = lesson.time.map(timeString => timeString.split(':').map(s=>+s))\n            const current = today && isCurrentLesson(lessonTime)\n\n            return <LessonRow\n              key={j}\n              lesson={lesson}\n              onGoToSchedule={onGoToSchedule}\n              current={current}\n              getStats={() => onGetStats && onGetStats(lesson)}\n            />\n          })}\n    </Card>\n  )\n}\n\nexport default ScheduleBody","import React from 'react'\nimport { Card, Cell, CellButton, Div, Header, IconButton, Separator } from '@vkontakte/vkui'\nimport { User } from '../../types'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { requestSchedule } from '../../store/slices/schedule'\nimport { setActivePanel } from '../../store/slices/navigation'\nimport { requestDeleteUserSchedule } from '../../store/slices/user'\nimport { SCHEDULE_PANEL, SEARCH_PANEL } from '../../constants'\nimport { Icon28AddOutline, Icon28ChevronDownOutline, Icon28ChevronUpOutline, Icon28DeleteOutline } from '@vkontakte/icons'\nimport ScheduleBody from '../ScheduleBody'\nimport { getDayNameByIndex, getFromWhomsList, getLessonsInDay } from '../../utils'\nimport { RootState } from '../../store/rootReducer'\n\ntype QouteProps = {\n  user: User\n}\n\nconst UserSchedule: React.FC<QouteProps> = ({\n  user,\n}) => {\n  const dispatch = useDispatch()\n\n  const {\n    currentWeek,\n    currentDay,\n  } = useSelector((s: RootState) => s.config)\n\n  const goToSearchSchedule = () => {\n    dispatch(setActivePanel(SEARCH_PANEL))\n  }\n\n  const goToSchedule = (tail: string) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail,\n    }))\n    dispatch(setActivePanel(SCHEDULE_PANEL))\n  }\n\n  const deleteSchedule = () => {\n    dispatch(requestDeleteUserSchedule(user!.id))\n  }\n\n  const [fromWhomsIsOpen, setFromWhomsIsOpen] = React.useState(false)\n  const toggleFromWhoms = () => {\n    setFromWhomsIsOpen(!fromWhomsIsOpen)\n  }\n\n  if(!user.schedule)\n  {\n    return(\n      <Div style={{paddingTop:0}}>\n        <Card>\n          <Cell\n            after={<Icon28AddOutline fill=\"orange\"/>}\n            onClick={goToSearchSchedule}\n          >Расписание не выбрано</Cell>\n        </Card>\n      </Div>\n    )\n  }\n\n  const lessonsToday = getLessonsInDay(user.schedule.lessons, currentDay, currentWeek)\n  const todayString = `${getDayNameByIndex(currentDay)}, ${new Date().toLocaleDateString()}`\n\n\n  return (<>\n    <Div style={{paddingTop:0}}>\n      <Card>\n        <Cell\n          disabled\n          after={\n            <IconButton>\n              <Icon28DeleteOutline fill=\"tomato\" onClick={deleteSchedule}/>\n            </IconButton>\n          }\n        >{user.schedule.title}</Cell>\n        <Separator/>\n\n        <Header subtitle={todayString}>\n          Расписание на сегодня\n        </Header>\n        <div style={{padding:'0px 8px'}}>\n          <ScheduleBody today lessons={lessonsToday} onGoToSchedule={goToSchedule} />\n        </div>\n        <br/><Separator/>\n        \n        <CellButton\n          onClick={() => goToSchedule(user.schedule!.href)}\n        >Полное расписание</CellButton>\n      </Card>\n    </Div>\n    <Div style={{paddingTop:0}}>\n      <Card>\n        <Cell\n          onClick={toggleFromWhoms}\n          after={!fromWhomsIsOpen ? <Icon28ChevronDownOutline /> : <Icon28ChevronUpOutline/>}\n        >Преподаватели/Группы</Cell>\n        {fromWhomsIsOpen && getFromWhomsList(user.schedule.lessons).map(fromWhom => {\n          return <CellButton\n            key={fromWhom.href}\n            onClick={() => goToSchedule(fromWhom.href)}\n          >{fromWhom.title}</CellButton>\n        })}\n      </Card>\n    </Div>\n  </>)\n}\n\nexport default UserSchedule","import React from 'react'\nimport { Card, Cell, Div, Separator } from '@vkontakte/vkui'\nimport { Icon28ArrowDownOutline, Icon28ArrowUpOutline, Icon28ChevronDownOutline, Icon28ChevronUpOutline } from '@vkontakte/icons'\nimport { isCurrentWeek, isPassWeek } from '../../utils'\nimport { Univer } from '../../types'\n\ntype QouteProps = {\n  univer: Univer\n}\n\nconst UniverInfo: React.FC<QouteProps> = ({\n  univer,\n}) => {\n  const [weeksIsOpen, setWeeksIsOpen] = React.useState(false)\n  const toggleWeeks = () => {\n    setWeeksIsOpen(!weeksIsOpen)\n  }\n\n  const [timeLessonsIsOpen, setTimeLessonsIsOpen] = React.useState(false)\n  const toggleTimeLessons = () => {\n    setTimeLessonsIsOpen(!timeLessonsIsOpen)\n  }\n\n  return (<>\n    <Separator/>\n    <Div>\n      <Card>\n        <Cell\n          onClick={toggleWeeks}\n          after={!weeksIsOpen ? <Icon28ChevronDownOutline /> : <Icon28ChevronUpOutline/>}\n        >Учебные недели</Cell>\n        {weeksIsOpen && <Separator/>}\n        {weeksIsOpen && univer.weeks.map((week, i) => {\n          const startRangString = new Date(week.range[0]).toLocaleDateString()\n          const endRangeString = new Date(week.range[1]).toLocaleDateString()\n          const rangeString = startRangString + ' - ' + endRangeString\n          \n          const weekPassed = isPassWeek(week.range[1])\n\n          return <Cell\n            key={i}\n            disabled\n            description={rangeString}\n            after={\n              week.weekType === 0\n                ? <Icon28ArrowUpOutline fill={isCurrentWeek(week) ? 'tomato' : 'teal'}/>\n                : <Icon28ArrowDownOutline fill={isCurrentWeek(week) ? 'tomato' : 'violet'}/>\n            }\n          >\n            <span style={{\n              textDecoration: weekPassed ? 'line-through': 'none',\n              opacity: weekPassed ? 0.5 : 1,\n              color: isCurrentWeek(week) ? 'tomato' : '',\n            }}>\n              {week.weekType === 0?'Числитель(четная)' : 'Знаменатель(нечетная)'}\n            </span>\n          </Cell>\n        })}\n      </Card>\n    </Div>\n    <Div style={{paddingTop:0}}>\n      <Card>\n        <Cell\n          onClick={toggleTimeLessons}\n          after={!timeLessonsIsOpen ? <Icon28ChevronDownOutline /> : <Icon28ChevronUpOutline/>}\n        >Время занятий</Cell>\n        {timeLessonsIsOpen && <Separator/>}\n        {timeLessonsIsOpen && univer.timeLessons.map((time, i) => {\n          return <Cell\n            key={i}\n            disabled\n            description={`${i+1} пара`}\n          >{time}</Cell>\n        })}\n      </Card>\n    </Div>\n  </>)\n}\n\nexport default UniverInfo","import React from 'react'\nimport {\n  Button,\n  Panel,\n  PanelHeader,\n  Placeholder,\n  Separator,\n  Spinner,\n} from '@vkontakte/vkui'\nimport {\n  Icon28SettingsOutline,\n  Icon28EducationOutline,  \n} from '@vkontakte/icons';\nimport { PanelProps } from '../../types'\nimport { useSelector } from 'react-redux';\nimport { setActivePanel } from '../../store/slices/navigation';\nimport { SETTINGS_PANEL } from '../../constants';\nimport { requestGetUser } from '../../store/slices/user';\nimport { requestConfigUnivers } from '../../store/slices/config';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store';\nimport Qoute from '../../components/Qoute';\nimport AppActions from '../../components/AppActions';\nimport SemestrInfo from '../../components/SemestrInfo';\nimport UserSchedule from '../../components/UserSchedule';\nimport UniverInfo from '../../components/UniverInfo';\n\nconst MainPanel: React.FC<PanelProps> = ({\n  id,\n}) => {\n  const dispatch = useAppDispatch()\n  const {\n    user,\n    isLoading: isUserLoading,\n    error: userError,\n  } = useSelector((s: RootState) => s.user)\n  const {\n    currentUniver,\n    isLoading: isConfigLoading,\n    error: configError,\n  } = useSelector((s: RootState) => s.config)\n  const { qoute } = useSelector((s: RootState) => s.qoute)\n\n  const goToSettings = () => {\n    dispatch(setActivePanel(SETTINGS_PANEL))\n  }\n\n  const tryAgain = () => {\n    if(userError && user)\n    {\n      dispatch(requestGetUser(user.id))\n    }\n    if(configError)\n    {\n      dispatch(requestConfigUnivers())\n    }\n  }\n\n  let content\n  if(isUserLoading || isConfigLoading)\n  {\n    content = <Spinner style={{paddingTop:'20vh'}} />\n  }\n  else if(userError || configError)\n  {\n    const userMessage = userError && userError.message\n    const configMessage = configError && configError.message\n\n    content = (\n      <Placeholder\n        stretched\n        action={\n          <Button onClick={tryAgain}>Повторить</Button>\n        }\n      >{userMessage}<br/>{configMessage}</Placeholder>\n    )\n  }\n  else if(user)\n  {\n    content = (<>\n      {user.univer\n        ? <>\n          {qoute && <Qoute qoute={qoute} />}\n          <AppActions />\n          <Separator/>\n          {currentUniver && <SemestrInfo />}\n          <UserSchedule user={user}/>\n        </>\n        : <Placeholder\n            stretched\n            icon={<Icon28EducationOutline width={64} height={64}/>}\n            action={<Button onClick={goToSettings}>Выбрать</Button>}\n          >Выберите университет, чтобы пользоваться приложением</Placeholder>\n      }\n      {currentUniver && <UniverInfo univer={currentUniver} />}\n    </>)\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={!(isUserLoading || isConfigLoading) && user?.univer && <Icon28SettingsOutline onClick={goToSettings}/>}\n      />\n      {content}\n    </Panel>\n  )\n}\n\nexport default MainPanel","import React from 'react'\nimport {\n  ActionSheet,\n  ActionSheetItem,\n  Button,\n  Card,\n  Div,\n  Gallery,\n  IconButton,\n  Link,\n  Panel,\n  PanelHeader,\n  Placeholder,\n  SimpleCell,\n  Spinner,\n  Tabs,\n  TabsItem,\n} from '@vkontakte/vkui'\nimport {\n  Icon28ArrowUturnLeftOutline,\n  Icon28HomeOutline,\n  Icon28MoreVertical,\n  Icon28DeleteOutline,\n  Icon28SortHorizontalOutline,\n  Icon28Users3Outline,\n  Icon28FavoriteCircleFillYellow,\n} from '@vkontakte/icons';\nimport { useDispatch, useSelector } from 'react-redux'\nimport { RootState } from '../../store/rootReducer'\nimport { DayRange, Lesson, PanelProps, WeekRange } from '../../types'\nimport { getDiff, getLessonsInDay, getStatsForLesson } from '../../utils'\nimport { clearScheduleHistory, clearSearchedSchedules, requestSchedule, scheduleHistoryBack, setLessonStats, setQ } from '../../store/slices/schedule';\nimport { setActiveModal, setActivePanel } from '../../store/slices/navigation';\nimport { MAIN_PANEL, SEARCH_PANEL } from '../../constants';\nimport { requestDeleteUserSchedule, requestUpdateUserSchedule } from '../../store/slices/user';\nimport ScheduleBody from '../../components/ScheduleBody';\nimport './Schedule.sass'\n\nconst DAYS = [\n  { id: 0, title: 'ПН' },\n  { id: 1, title: 'ВТ' },\n  { id: 2, title: 'СР' },\n  { id: 3, title: 'ЧТ' },\n  { id: 4, title: 'ПТ' },\n  { id: 5, title: 'СБ' },\n]\nconst WEEKS = [\n  { id: 0, title: 'Числитель ∧'},\n  { id: 1, title: 'Знаменатель ∨'},\n]\n\nconst SchedulePanel: React.FC<PanelProps> = ({\n  id,\n  setPopout,\n}) => {\n  const dispatch = useDispatch()\n  const { isLoading, error, schedule, scheduleHistoryHrefs, } = useSelector((s: RootState) => s.schedule)\n  const { user } = useSelector((s: RootState) => s.user)\n  const { currentUniver, currentDay, currentWeek } = useSelector((s: RootState) => s.config)\n  const { prevActivePanel } = useSelector((s: RootState) => s.navigation)\n\n  const [activeDay, setActiveDay] = React.useState<DayRange>(currentDay)\n  const [activeWeek, setActiveWeek] = React.useState<WeekRange>(currentWeek)\n\n  const [isDiffShowing, setIsDiffShowing] = React.useState(false)\n  const toggleDiffShowing = () => {\n    setIsDiffShowing(!isDiffShowing)\n  }\n\n  const goToMain = () => {\n    dispatch(setActivePanel(MAIN_PANEL))\n    dispatch(clearScheduleHistory())\n    dispatch(setQ(''))\n    dispatch(clearSearchedSchedules())\n  }\n\n  const goToSearch = () => {\n    dispatch(setActivePanel(SEARCH_PANEL))\n    dispatch(clearScheduleHistory())\n  }\n\n  const goBack = () => {\n    if(scheduleHistoryHrefs.length === 1)\n    {\n      if(prevActivePanel === SEARCH_PANEL) goToSearch()\n      else goToMain()\n    }\n    else\n    {\n      dispatch(scheduleHistoryBack())\n      setIsDiffShowing(false)\n    }\n  }\n\n  const saveSchedule = () => {\n    setIsDiffShowing(false)\n    dispatch(requestUpdateUserSchedule({\n      id: user!.id,\n      scheduleId: schedule!.href,\n    }))\n  }\n\n  const deleteSchedule = () => {\n    setIsDiffShowing(false)\n    dispatch(requestDeleteUserSchedule(user!.id))\n  }\n\n  const showActions = () => {\n    let toggleScheduleItem =\n      user!.schedule && user!.schedule.href === schedule!.href\n        ? <ActionSheetItem\n            autoclose\n            style={{color: 'tomato'}}\n            onClick={deleteSchedule}\n            before={<Icon28DeleteOutline fill=\"tomato\"/>}\n          >Удалить расписание</ActionSheetItem>\n        : <ActionSheetItem\n            autoclose\n            onClick={saveSchedule}\n            before={<Icon28FavoriteCircleFillYellow/>}\n            subtitle={user!.schedule?'вместо текущего':''}\n          >Сохранить расписание</ActionSheetItem>\n\n    const popout = (\n      <ActionSheet\n        onClose={() => setPopout!(null)}\n        iosCloseItem={\n          <ActionSheetItem autoclose mode=\"cancel\">\n            Отменить\n          </ActionSheetItem>\n        }\n      >\n        {false &&\n          <ActionSheetItem\n            autoclose\n            style={{color:'tan'}}\n            before={<Icon28Users3Outline fill=\"tan\"/>}\n            onClick={()=>{}}\n          >Экзамены</ActionSheetItem>\n        }\n        {user!.schedule && !(user!.schedule.href === schedule!.href) &&\n          <ActionSheetItem\n            autoclose\n            style={{color:'teal'}}\n            before={\n              <Icon28SortHorizontalOutline\n                fill={isDiffShowing?'tomato':'orange'}\n                style={{transform:`rotateY(${isDiffShowing?0:180}deg)`}}\n              />\n            }\n            subtitle={\n              isDiffShowing\n                ? 'Все занятия данного расписания'\n                : 'Занятия вне вашего расписания'\n              }\n            onClick={toggleDiffShowing}\n          >\n            {isDiffShowing ? 'Расписание без разницы' : 'Разница расписаний'}\n          </ActionSheetItem>\n        }\n        {toggleScheduleItem}\n      </ActionSheet>\n    )\n    setPopout!(popout)\n  }\n\n  const goToSchedule = (tail: string) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail,\n    }))\n    setIsDiffShowing(false)\n  }\n\n  const cardRef = React.useRef<HTMLDivElement>(null)\n\n  let content\n  if(isLoading)\n  {\n    content = <Spinner />\n  }\n  else if(error)\n  {\n    content = <Placeholder\n      stretched\n      action={\n        <Button onClick={() => {\n          dispatch(requestSchedule(error.payload))\n        }}>Повторить</Button>}\n    >{error.message}</Placeholder>\n  }\n  else if(schedule)\n  {\n    const ls = isDiffShowing ? getDiff(schedule.lessons, user!.schedule!.lessons) : schedule.lessons\n\n    content = ( <>      \n      <div className=\"schedule__card\" ref={cardRef}>\n        <Gallery\n          style={{height:'100%'}}\n          slideIndex={activeDay}\n          onChange={d => setActiveDay(d as DayRange)}\n        >\n          {DAYS.map((_,i) => {\n            const lessons = getLessonsInDay(ls, i as DayRange, activeWeek)\n\n            return <ScheduleBody\n              key={i}\n              today={activeDay === currentDay && activeWeek === currentWeek}\n              lessons={lessons}\n              onGoToSchedule={goToSchedule}\n              onGetStats={(lesson: Lesson) => {\n                const { stats, fromWhoms } = getStatsForLesson({\n                  lesson,\n                  lessons: schedule.lessons,\n                  currentUniver: currentUniver!,\n                })\n                dispatch(setLessonStats({\n                  title: lesson.subject,\n                  stats,\n                  fromWhoms,\n                }))\n                dispatch(setActiveModal('stats'))\n              }}\n            />\n          })}\n        </Gallery>\n      </div>\n\n      <Card style={{marginTop:8}}>\n        <Tabs>\n          {WEEKS.map(week => {\n            return <TabsItem\n              key={week.id}\n              selected={week.id === activeWeek}\n              onClick={() => setActiveWeek(week.id as WeekRange)}\n              style={{color: currentWeek === week.id ? 'tomato': ''}}\n            >{week.title}</TabsItem>\n          })}\n        </Tabs>\n        <Tabs>\n          {DAYS.map(day => {\n            return <TabsItem\n              key={day.id}\n              selected={day.id === activeDay}\n              onClick={() => setActiveDay(day.id as DayRange)}\n              style={{color: currentDay === day.id ? 'tomato': ''}}\n            >{day.title}</TabsItem>\n          })}\n        </Tabs>\n        <SimpleCell\n          disabled\n          before={\n            <IconButton>\n              <Icon28ArrowUturnLeftOutline onClick={goBack} width={20} style={{marginRight: 12, color:'teal'}}/>\n            </IconButton>\n          }\n          after={\n            <IconButton>\n              <Icon28MoreVertical onClick={showActions} width={20} style={{color:'violet'}}/>\n            </IconButton>\n          }\n        >\n          <Link href={`${user!.univer!.baseUrl}${schedule.href}`}>\n            {schedule.title}\n          </Link>\n          {isDiffShowing &&\n            <Icon28SortHorizontalOutline className=\"schedule__icon--diff\"/>\n          }\n          {user?.schedule && user.schedule.href === schedule.href &&\n            <Icon28FavoriteCircleFillYellow className=\"schedule__icon--fav\"/>\n          }\n        </SimpleCell>\n      </Card>\n    </>)\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={\n          <Icon28HomeOutline onClick={goToMain} />\n        }\n      />\n      <Div className=\"schedule__wrapper\">\n        {content}\n      </Div>\n    </Panel>\n  )\n}\n\nexport default SchedulePanel","import React, { ChangeEvent } from 'react'\nimport {\n  CellButton,\n  Div,\n  FixedLayout,\n  Footer,\n  Panel,\n  PanelHeader,\n  PanelHeaderBack,\n  Placeholder,\n  Search,\n  Spinner,\n} from '@vkontakte/vkui'\nimport { Icon56GhostOutline } from '@vkontakte/icons'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { MAIN_PANEL, SCHEDULE_PANEL } from '../../constants'\nimport { RootState } from '../../store/rootReducer'\nimport { setActivePanel } from '../../store/slices/navigation'\nimport { clearSearchedSchedules, requestSchedule, requestSearchSchedule, setQ } from '../../store/slices/schedule'\nimport { HrefTitle, PanelProps } from '../../types'\n\nconst SearchPanel: React.FC<PanelProps> = ({\n  id,\n}) => {\n  const dispatch = useDispatch()\n  const { isSearchLoading, searchedSchedules, q } = useSelector((s: RootState) => s.schedule)\n  const { user } = useSelector((s: RootState) => s.user)\n\n  const handleQChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const q = e.target.value\n\n    dispatch(setQ(q))\n    if(!q)\n    {\n      dispatch(clearSearchedSchedules())\n    }\n  }\n\n  const searchRef = React.useRef<HTMLInputElement>(null)\n  React.useEffect(() => {\n    window.setTimeout(() => {\n      searchRef.current && searchRef.current.focus()\n    },100)\n  },[])\n\n  const [debQ, setDebQ] = React.useState(q)\n  React.useEffect(() => {\n    const timeout = window.setTimeout(() => {\n      setDebQ(q)\n    }, 500)\n\n    return () => {\n      window.clearTimeout(timeout)\n    }\n  }, [q])\n\n  React.useEffect(() => {\n    if(debQ)\n    {\n      dispatch(requestSearchSchedule({\n        univer: user!.univer!.code,\n        q: debQ,\n      }))\n    }\n  }, [debQ])\n\n  const goToMainPanel = () => {\n    dispatch(setActivePanel(MAIN_PANEL))\n    dispatch(setQ(''))\n    dispatch(clearSearchedSchedules())\n  }\n\n  const goToSchedule = (schedule: HrefTitle) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail: schedule.href,\n    }))\n    dispatch(setActivePanel(SCHEDULE_PANEL))\n  }\n\n  let content\n\n  if(isSearchLoading)\n  {\n    content = <Spinner />\n  }\n  else if(searchedSchedules.length === 0)\n  {\n    content = <Placeholder\n      icon={<Icon56GhostOutline style={{color:\"teal\"}} />}\n    >Ничего не найдено</Placeholder>\n  }\n  else\n  {\n    content = (<>\n      {searchedSchedules.map((schedule, i) => {\n        return <CellButton\n          key={i}\n          onClick={() => goToSchedule(schedule)}\n        >{schedule.title}</CellButton>\n      })}\n      <Footer>\n        Найдено {searchedSchedules.length} расписаний <br/>\n        Уточните или исправьте запрос, <br/> если не нашли нужное расписание\n      </Footer>\n    </>)\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={\n          <PanelHeaderBack onClick={goToMainPanel} />\n        }\n      >Поиск</PanelHeader>\n\n      <FixedLayout style={{paddingTop:24}} vertical=\"top\" filled>\n        <Search\n          getRef={searchRef}\n          placeholder=\"Поиск расписания\"\n          after={null}\n          value={q}\n          onChange={handleQChange}\n        />\n      </FixedLayout>\n\n      <Div style={{marginTop:70}}>{content}</Div>\n    </Panel>\n  )\n}\n\nexport default SearchPanel","import React, { ChangeEvent } from 'react'\nimport {\n  Button,\n  Div,\n  FormItem,\n  Group,\n  Header,\n  NativeSelect,\n  Panel,\n  PanelHeader,\n  PanelHeaderBack,\n} from '@vkontakte/vkui'\nimport { PanelProps } from '../../types'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { setActivePanel } from '../../store/slices/navigation'\nimport { MAIN_PANEL } from '../../constants'\nimport { RootState } from '../../store/rootReducer'\nimport { requestDeleteUserUniver, requestUpdateUserUniver } from '../../store/slices/user'\n\nconst SettingsPanel: React.FC<PanelProps> = ({\n  id,\n}) => {\n  const dispatch = useDispatch()\n  const { univerList } = useSelector((s: RootState) => s.config)\n  const { user } = useSelector((s: RootState) => s.user)\n\n  const goToMain = () => {\n    dispatch(setActivePanel(MAIN_PANEL))\n  }\n\n  const userUniverId = user?.univer?.id ?? ''\n  const [univer, setUniver] = React.useState(''+userUniverId)\n  const handleChangeUniver = (e: ChangeEvent<HTMLSelectElement>) => {\n    setUniver(e.target.value)\n  }\n\n  const changeUniver = () => {\n    if((''+userUniverId) !== univer)\n    {\n      if(univer === '')\n      {\n        dispatch(requestDeleteUserUniver(user!.id))\n      }\n      else\n      {\n        dispatch(requestUpdateUserUniver({\n          id: user!.id,\n          univerId: +univer,\n        }))\n      }\n    }\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader\n        separator={false}\n        left={<PanelHeaderBack onClick={goToMain} />}\n      >Настройки</PanelHeader>\n\n      <Group header={<Header mode=\"secondary\">Главное</Header>}>      \n        <FormItem\n          top=\"Университет\"\n          bottom=\"При изменении университета, выбранная группа удалится!\"\n          >\n          <NativeSelect\n            placeholder=\"Не выбран\"\n            value={univer}\n            onChange={handleChangeUniver}\n            >\n            {univerList.map(univer => {\n              return <option\n              key={univer.code}\n              value={univer.id}\n              >{univer.subtitle}</option>\n            })}\n          </NativeSelect>\n        </FormItem>\n        <Div style={{paddingTop:0}}>\n          <Button\n            disabled={(''+userUniverId) === univer}\n            style={{width:'100%'}}\n            size=\"l\"\n            onClick={changeUniver}\n            >Сохранить</Button>\n        </Div>\n      </Group>\n    </Panel>\n  )\n}\n\nexport default SettingsPanel","import React from \"react\"\nimport { Caption, Card, CellButton, Div, Header, ModalPage, ModalPageHeader, ModalRoot, Progress } from \"@vkontakte/vkui\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { RootState } from \"../../store/rootReducer\"\nimport { setActiveModal } from \"../../store/slices/navigation\"\nimport { Icon24Dismiss } from \"@vkontakte/icons\"\nimport { requestSchedule } from \"../../store/slices/schedule\"\nimport './ActionsModal.sass'\n\n\nconst ActionsModal = () => {\n  const dispatch = useDispatch()\n  const { activeModal } = useSelector((s: RootState) => s.navigation)\n  const { lessonStats } = useSelector((s: RootState) => s.schedule)\n  const { user } = useSelector((s: RootState) => s.user)\n  const { currentUniver } = useSelector((s: RootState) => s.config)\n  \n  const closeModal = () => {\n    dispatch(setActiveModal(null))\n  }\n\n  const goToSchedule = (tail: string) => {\n    dispatch(requestSchedule({\n      univer: user!.univer!.code,\n      tail,\n    }))\n    closeModal()\n  }\n\n  return (\n    <ModalRoot\n      activeModal={activeModal}\n      onClose={closeModal}\n    >\n      <ModalPage id=\"stats\">\n        <ModalPageHeader\n          right={<Icon24Dismiss onClick={closeModal} style={{marginRight:8}}/>}\n        >Статистика</ModalPageHeader>\n        {lessonStats && <>\n          <Div>\n            <Card>\n              <Div>{lessonStats.title}</Div>\n            </Card>\n          </Div>\n          <Div style={{paddingTop:'0px 12px'}}>\n            {currentUniver &&\n              <Caption level=\"2\" weight=\"regular\" style={{opacity:0.5}}>\n                Пожалуйста, не воспринимайте данную статистику буквально!\n                Т.к. для расчета, первым днем принят {new Date(currentUniver.startDateStartOfWeek).toLocaleDateString()},\n                а последним {new Date(currentUniver.endDate).toLocaleDateString()}.\n              </Caption>\n            }\n          </Div>\n          <Div>\n            {Object.entries(lessonStats.stats).map(([typeLesson, values]) => {\n              const { pass, total } = values\n              if(total === 0) return null\n              \n              const title = {\n                lec: 'Лекция',\n                pr: 'Практика',\n                lab: 'Лабораторная',\n              }[typeLesson]\n              \n              return (\n                <div className=\"stats__item\" key={typeLesson}>\n                  <Header>\n                    {title}\n                    <span className=\"stats__secondary\">{pass}/{total}</span>\n                  </Header>\n                  <Progress\n                    className={`stats__progress--${typeLesson}`}\n                    style={{margin: '0px 12px 8px 12px',}}\n                    value={pass / total * 100}\n                    />\n                </div>\n              )\n            })}\n          </Div>\n          {lessonStats.fromWhoms.length !== 0 &&\n            <Div style={{paddingTop:0}}>\n              <Header>Преподаватели / группы</Header>\n              {lessonStats.fromWhoms.map(fromWhom => {\n                return <CellButton\n                  key={fromWhom.href}\n                  onClick={() => goToSchedule(fromWhom.href)}\n                >{fromWhom.title}</CellButton>\n              })}\n            </Div>\n          }\n        </>}\n      </ModalPage>\n    </ModalRoot>\n  )\n}\n\nexport default ActionsModal","import React from 'react';\nimport {\n  AppRoot,\n  ConfigProvider,\n  ScreenSpinner,\n  View,\n} from '@vkontakte/vkui';\nimport bridge from '@vkontakte/vk-bridge';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { MAIN_PANEL, SCHEDULE_PANEL, SEARCH_PANEL, SETTINGS_PANEL } from './constants';\nimport MainPanel from './panels/main';\nimport SchedulePanel from './panels/schedule';\nimport SearchPanel from './panels/search';\nimport SettingsPanel from './panels/settings';\nimport { RootState } from './store/rootReducer';\nimport ActionsModal from './components/ActionsModal';\nimport { requestGetUser, setUserData } from './store/slices/user';\nimport { requestConfigUnivers, setConfig, setCurrentUniver } from './store/slices/config';\nimport { requestQoute } from './store/slices/qoute';\n\nconst App: React.FC = () => {\n  const dispatch = useDispatch()\n  const { activePanel, history } = useSelector((s: RootState) => s.navigation)\n  const {\n    user,\n    isUniverLoading,\n    isScheduleLoading,\n  } = useSelector((s: RootState) => s.user)\n\n  React.useEffect(() => {\n    document.body.setAttribute('scheme', 'space_gray')\n\n    const config =\n      window.location.search.slice(1)\n        .split('&')\n        .reduce((config, queryParam) => {\n          const [key, value] = queryParam.split('=')\n          return { ...config, [key.slice(3)]: value === '1' }\n        },{})\n    dispatch(setConfig(config))\n  },[])\n\n  const [popout, setPopout] = React.useState<React.ReactNode>(null)\n  const handleSetPopout = (popout: React.ReactNode) => {\n    setPopout(popout)\n  }\n\n  React.useEffect(() => {\n    const initApp = async () => {\n      const userData = await bridge.send('VKWebAppGetUserInfo')\n      // const userData = {id:0}\n\n      dispatch(setUserData(userData))\n      dispatch(requestConfigUnivers())\n      dispatch(requestGetUser(userData.id))\n      dispatch(requestQoute())\n    }\n\n    if(!user) initApp()\n  },[])\n\n  React.useEffect(() => {\n    if(user)\n    {\n      if(user.univer)\n        dispatch(setCurrentUniver(user.univer))\n      else\n        dispatch(setCurrentUniver(null))\n    }\n  }, [user])\n\n  React.useEffect(() => {\n    if(isUniverLoading || isScheduleLoading)\n    {\n      setPopout(<ScreenSpinner/>)\n    }\n    else\n    {\n      setPopout(null)\n    }\n  }, [isUniverLoading, isScheduleLoading])\n\n  return (\n    <ConfigProvider isWebView={true}>\n      <AppRoot>\n        <View\n          popout={popout}\n          modal={<ActionsModal/>}\n          activePanel={activePanel}\n          history={history}\n        >\n          <MainPanel id={MAIN_PANEL} />\n          <SettingsPanel id={SETTINGS_PANEL} setPopout={handleSetPopout}/>\n          <SearchPanel id={SEARCH_PANEL} />\n          <SchedulePanel id={SCHEDULE_PANEL} setPopout={handleSetPopout}/>\n        </View>\n      </AppRoot>\n    </ConfigProvider>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport bridge from '@vkontakte/vk-bridge'\nimport '@vkontakte/vkui/dist/vkui.css'\n\nimport store from './store'\nimport { Provider } from 'react-redux'\n\nimport './index.sass';\n\nimport App from './App';\n\nbridge.send('VKWebAppInit')\nbridge.subscribe(e => {\n  if(e.detail.type === 'VKWebAppUpdateConfig')\n    // document.body.setAttribute('scheme', e.detail.data.scheme)\n    document.body.setAttribute('scheme', 'space_gray')\n})\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}